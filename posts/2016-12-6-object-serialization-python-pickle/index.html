<!doctype html><html lang=en-us><head><script data-ad-client=ca-pub-1030730506660314 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script><script id=mNCC language=javascript>medianet_width="728",medianet_height="90",medianet_crid="167545135",medianet_versionId="3111299"</script><script src="//contextual.media.net/nmedianet.js?cid=8CU62P5S3"></script><script type=text/javascript src=https://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js></script><script type=text/javascript src=https://blockchain.info/Resources/js/pay-now-button.js></script><link rel=preload href=../../lib/font-awesome/webfonts/fa-brands-400.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=../../lib/font-awesome/webfonts/fa-regular-400.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=../../lib/font-awesome/webfonts/fa-solid-900.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=../../lib/JetBrainsMono/web/woff2/JetBrainsMono-Regular.woff2 as=font type=font/woff2 crossorigin=anonymous><script type=text/javascript src=https://latest.cactus.chat/cactus.js></script><link rel=stylesheet href=https://latest.cactus.chat/style.css type=text/css><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><title>Object Serialization in Python With the Pickle Module | The Python Corner</title><link rel=canonical href=https://mastro35.github.io/tpc/posts/2016-12-6-object-serialization-python-pickle/><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="all,follow"><meta name=googlebot content="index,follow,snippet,archive"><meta property="og:title" content="Object Serialization in Python With the Pickle Module"><meta property="og:description" content="DISCLAMER: There&rsquo;s a newer (and probably better) article about this topic that I wrote for Real Python website.
It&rsquo;s longer and more detailed and it also have a section about the security concern when using the pickle module, so&mldr; I want to be honest and I suggest you to read that article &mldr; but if you like it, don&rsquo;t forget to come back here and buy me a coffe! :)"><meta property="og:type" content="article"><meta property="og:url" content="https://mastro35.github.io/tpc/posts/2016-12-6-object-serialization-python-pickle/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2016-12-06T00:00:49+01:00"><meta property="article:modified_time" content="2016-12-06T00:00:49+01:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Object Serialization in Python With the Pickle Module"><meta name=twitter:description content="DISCLAMER: There&rsquo;s a newer (and probably better) article about this topic that I wrote for Real Python website.
It&rsquo;s longer and more detailed and it also have a section about the security concern when using the pickle module, so&mldr; I want to be honest and I suggest you to read that article &mldr; but if you like it, don&rsquo;t forget to come back here and buy me a coffe! :)"><link rel=stylesheet href=https://mastro35.github.io/tpc/css/styles.c05d68261bf086a9d7713c4f8a6215a3601608e267a816a7ee58f139b3d1aae51222aae2081c8e0c6bd35e1334773b7a16283022f31f92afd93bb37e5e822e66.css integrity="sha512-wF1oJhvwhqnXcTxPimIVo2AWCOJnqBan7ljxObPRquUSIqriCByODGvTXhM0dzt6FigwIvMfkq/ZO7N+XoIuZg=="><!--[if lt IE 9]><script src=https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js></script><script src=https://oss.maxcdn.com/respond/1.4.2/respond.min.js></script><![endif]--><link rel=icon type=image/png href=https://mastro35.github.io/tpc/images/favicon.ico><script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga('create','UA-120027408-1','auto'),ga('send','pageview'))</script><script async src=https://www.google-analytics.com/analytics.js></script></head><body class="max-width mx-auto px3 ltr"><div class="content index py4"><a href=https://mastro35.github.io/tpc/><image id=banner src=../../images/logo.png width=100%></a><div id=header-post><a id=menu-icon href=#><i class="fas fa-bars fa-lg"></i></a>
<a id=menu-icon-tablet href=#><i class="fas fa-bars fa-lg"></i></a>
<a id=top-icon-tablet href=# onclick="$('html, body').animate({scrollTop:0},'fast')" style=display:none aria-label="Top of Page"><i class="fas fa-chevron-up fa-lg"></i></a>
<span id=menu><span id=nav><ul><li><a href=../../>Home</a></li><li><a href=../../posts>Articles</a></li><li><a href=../../tags>Tags</a></li><li><a href=../../about>About</a></li><li><a href=../../help_us>Help Us</a></li><li><a href=https://buttondown.email/thepythoncorner>Newsletter</a></li><li><a href=https://shop.spreadshirt.com/the-python-corner>Swag Store</a></li></ul></span><br><span id=actions><ul><li><a class=icon href=https://mastro35.github.io/tpc/posts/2016-11-29-using-virtual-environments-python/ aria-label=Previous><i class="fas fa-chevron-left" aria-hidden=true onmouseover="$('#i-prev').toggle()" onmouseout="$('#i-prev').toggle()"></i></a></li><li><a class=icon href=https://mastro35.github.io/tpc/posts/2016-12-13-syntax_sugar_python_36/ aria-label=Next><i class="fas fa-chevron-right" aria-hidden=true onmouseover="$('#i-next').toggle()" onmouseout="$('#i-next').toggle()"></i></a></li><li><a class=icon href=# onclick="$('html, body').animate({scrollTop:0},'fast')" aria-label="Top of Page"><i class="fas fa-chevron-up" aria-hidden=true onmouseover="$('#i-top').toggle()" onmouseout="$('#i-top').toggle()"></i></a></li><li><a class=icon href=# aria-label=Share><i class="fas fa-share-alt" aria-hidden=true onmouseover="$('#i-share').toggle()" onmouseout="$('#i-share').toggle()" onclick="return $('#share').toggle(),!1"></i></a></li></ul><span id=i-prev class=info style=display:none>Previous post</span>
<span id=i-next class=info style=display:none>Next post</span>
<span id=i-top class=info style=display:none>Back to top</span>
<span id=i-share class=info style=display:none>Share post</span></span><br><div id=share style=display:none><ul><li><a class=icon href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fmastro35.github.io%2ftpc%2fposts%2f2016-12-6-object-serialization-python-pickle%2f" aria-label=Facebook><i class="fab fa-facebook" aria-hidden=true></i></a></li><li><a class=icon href="https://twitter.com/share?url=https%3a%2f%2fmastro35.github.io%2ftpc%2fposts%2f2016-12-6-object-serialization-python-pickle%2f&text=Object%20Serialization%20in%20Python%20With%20the%20Pickle%20Module" aria-label=Twitter><i class="fab fa-twitter" aria-hidden=true></i></a></li><li><a class=icon href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2fmastro35.github.io%2ftpc%2fposts%2f2016-12-6-object-serialization-python-pickle%2f&title=Object%20Serialization%20in%20Python%20With%20the%20Pickle%20Module" aria-label=Linkedin><i class="fab fa-linkedin" aria-hidden=true></i></a></li><li><a class=icon href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2fmastro35.github.io%2ftpc%2fposts%2f2016-12-6-object-serialization-python-pickle%2f&is_video=false&description=Object%20Serialization%20in%20Python%20With%20the%20Pickle%20Module" aria-label=Pinterest><i class="fab fa-pinterest" aria-hidden=true></i></a></li><li><a class=icon href="mailto:?subject=Object%20Serialization%20in%20Python%20With%20the%20Pickle%20Module&body=Check out this article: https%3a%2f%2fmastro35.github.io%2ftpc%2fposts%2f2016-12-6-object-serialization-python-pickle%2f" aria-label=Email><i class="fas fa-envelope" aria-hidden=true></i></a></li><li><a class=icon href="https://getpocket.com/save?url=https%3a%2f%2fmastro35.github.io%2ftpc%2fposts%2f2016-12-6-object-serialization-python-pickle%2f&title=Object%20Serialization%20in%20Python%20With%20the%20Pickle%20Module" aria-label=Pocket><i class="fab fa-get-pocket" aria-hidden=true></i></a></li><li><a class=icon href="http://reddit.com/submit?url=https%3a%2f%2fmastro35.github.io%2ftpc%2fposts%2f2016-12-6-object-serialization-python-pickle%2f&title=Object%20Serialization%20in%20Python%20With%20the%20Pickle%20Module" aria-label=reddit><i class="fab fa-reddit" aria-hidden=true></i></a></li><li><a class=icon href="http://www.tumblr.com/share/link?url=https%3a%2f%2fmastro35.github.io%2ftpc%2fposts%2f2016-12-6-object-serialization-python-pickle%2f&name=Object%20Serialization%20in%20Python%20With%20the%20Pickle%20Module&description=DISCLAMER%3a%20There%26rsquo%3bs%20a%20newer%20%28and%20probably%20better%29%20article%20about%20this%20topic%20that%20I%20wrote%20for%20Real%20Python%20website.%0aIt%26rsquo%3bs%20longer%20and%20more%20detailed%20and%20it%20also%20have%20a%20section%20about%20the%20security%20concern%20when%20using%20the%20pickle%20module%2c%20so%26hellip%3b%20I%20want%20to%20be%20honest%20and%20I%20suggest%20you%20to%20read%20that%20article%20%26hellip%3b%20but%20if%20you%20like%20it%2c%20don%26rsquo%3bt%20forget%20to%20come%20back%20here%20and%20buy%20me%20a%20coffe%21%20%3a%29" aria-label=Tumblr><i class="fab fa-tumblr" aria-hidden=true></i></a></li><li><a class=icon href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fmastro35.github.io%2ftpc%2fposts%2f2016-12-6-object-serialization-python-pickle%2f&t=Object%20Serialization%20in%20Python%20With%20the%20Pickle%20Module" aria-label="Hacker News"><i class="fab fa-hacker-news" aria-hidden=true></i></a></li></ul></div><div id=toc><nav id=TableOfContents><ul><li><a href=#pickling>Pickling</a></li><li><a href=#unpickling>Unpickling</a></li><li><a href=#some-notes-about-pickling>Some notes about pickling</a></li><li><a href=#the-security-concern>The security concern</a></li></ul></nav></div></span></div><article class=post itemscope itemtype=http://schema.org/BlogPosting><header><h1 class=posttitle itemprop="name headline">Object Serialization in Python With the Pickle Module</h1><div class=meta><div class=postdate><time datetime="2016-12-06 00:00:49 +0100 +0100" itemprop=datePublished>2016-12-06</time></div><div class=author>by
Davide Mastromatteo</div><div class=article-read-time><i class="far fa-clock"></i>
6 minute read</div><div class=article-category><i class="fas fa-archive"></i>
<a class=category-link href=../../categories/dev>Dev</a></div><div class=article-tag><i class="fas fa-tag"></i>
<a class=tag-link href=../../tags/serialization rel=tag>serialization</a>
,
<a class=tag-link href=../../tags/pickle rel=tag>pickle</a>
,
<a class=tag-link href=../../tags/python rel=tag>python</a></div></div></header><div class=content itemprop=articleBody><p><img src=https://imgs.xkcd.com/comics/expiration_date_high_score.png alt=teaser></p><p><strong>DISCLAMER</strong>: There&rsquo;s a newer (and probably better) <a href=https://realpython.com/python-pickle-module/>article</a> about this topic that I wrote for <a href=https://realpython.com>Real Python</a> website.</p><p>It&rsquo;s longer and more detailed and it also have a section about the security concern when using the pickle module, so&mldr; I want to be honest and I suggest you to read <a href=https://realpython.com/python-pickle-module/>that article</a> &mldr; but if you like it, don&rsquo;t forget to come back here and <a href=https://www.buymeacoffee.com/dXjDHmt>buy me a coffe</a>! :)</p><hr><p>Today we&rsquo;re going to explore a wonderful feature that the Python library offers to you out of the box: the serialization. To serialize an object means to transform it in a format that can be stored, so as to be able to deserialize it later, recreating the original object from the serialized format. To do all these operations we will use the pickle module.</p><h2 id=pickling>Pickling</h2><p>Pickling is the name of the serialization process in Python. By pickling, we can convert an object hierarchy to a binary format (usually not human readable) that can be stored. To pickle an object we just need to import the pickle module and call the dumps() function passing the object to be pickled as a parameter.</p><p>For example:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Python data-lang=Python><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span style=color:#ff79c6>import</span> pickle
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span>​
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span style=color:#ff79c6>class</span> <span style=color:#50fa7b>Animal</span>:
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span>    <span style=color:#ff79c6>def</span> __init__(self, number_of_paws, color):
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span>        self<span style=color:#ff79c6>.</span>number_of_paws <span style=color:#ff79c6>=</span> number_of_paws
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span>        self<span style=color:#ff79c6>.</span>color <span style=color:#ff79c6>=</span> color
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span>​
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span><span style=color:#ff79c6>class</span> <span style=color:#50fa7b>Sheep</span>(Animal):
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span>    <span style=color:#ff79c6>def</span> __init__(self, color):
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span>        Animal<span style=color:#ff79c6>.</span>__init__(self, <span style=color:#bd93f9>4</span>, color)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span>​
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span>mary <span style=color:#ff79c6>=</span> Sheep(<span style=color:#f1fa8c>&#34;white&#34;</span>)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span>​
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">14</span><span style=color:#8be9fd;font-style:italic>print</span> (<span style=color:#8be9fd;font-style:italic>str</span><span style=color:#ff79c6>.</span>format(<span style=color:#f1fa8c>&#34;My sheep mary is </span><span style=color:#f1fa8c>{0}</span><span style=color:#f1fa8c> and has </span><span style=color:#f1fa8c>{1}</span><span style=color:#f1fa8c> paws&#34;</span>, mary<span style=color:#ff79c6>.</span>color, mary<span style=color:#ff79c6>.</span>number_of_paws))
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">15</span>my_pickled_mary <span style=color:#ff79c6>=</span> pickle<span style=color:#ff79c6>.</span>dumps(mary)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">16</span>​
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">17</span><span style=color:#8be9fd;font-style:italic>print</span> (<span style=color:#f1fa8c>&#34;Would you like to see her pickled? Here she is!&#34;</span>)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">18</span><span style=color:#8be9fd;font-style:italic>print</span> (my_pickled_mary)
</code></pre></div><p>So, in the example above, we have created an instance of a sheep class and then we&rsquo;ve pickled it, transforming our sheep instance into a simple array of bytes.
It&rsquo;s been easy, hasn&rsquo;t it?</p><p>Now we can easily store the bytes array on a binary file or in a database field and restore it from our storage support in a later time to transform back this bunch of bytes in an object hierarchy.</p><p>Note that if you want to create a file with a pickled object, you can use the dump() method (instead of the dumps() one) passing also an opened binary file and the pickling result will be stored in the file automatically.</p><p>To do so, the previous example could be changed like this:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Python data-lang=Python><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span style=color:#ff79c6>import</span> pickle
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span>​
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span style=color:#ff79c6>class</span> <span style=color:#50fa7b>Animal</span>:
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span>    <span style=color:#ff79c6>def</span> __init__(self, number_of_paws, color):
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span>        self<span style=color:#ff79c6>.</span>number_of_paws <span style=color:#ff79c6>=</span> number_of_paws
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span>        self<span style=color:#ff79c6>.</span>color <span style=color:#ff79c6>=</span> color
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span>​
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span><span style=color:#ff79c6>class</span> <span style=color:#50fa7b>Sheep</span>(Animal):
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span>    <span style=color:#ff79c6>def</span> __init__(self, color):
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span>        Animal<span style=color:#ff79c6>.</span>__init__(self, <span style=color:#bd93f9>4</span>, color)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span>​
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span>mary <span style=color:#ff79c6>=</span> Sheep(<span style=color:#f1fa8c>&#34;white&#34;</span>)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span>​
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">14</span><span style=color:#8be9fd;font-style:italic>print</span> (<span style=color:#8be9fd;font-style:italic>str</span><span style=color:#ff79c6>.</span>format(<span style=color:#f1fa8c>&#34;My sheep mary is </span><span style=color:#f1fa8c>{0}</span><span style=color:#f1fa8c> and has </span><span style=color:#f1fa8c>{1}</span><span style=color:#f1fa8c> paws&#34;</span>, mary<span style=color:#ff79c6>.</span>color, mary<span style=color:#ff79c6>.</span>number_of_paws))
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">15</span>my_pickled_mary <span style=color:#ff79c6>=</span> pickle<span style=color:#ff79c6>.</span>dumps(mary)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">16</span>​
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">17</span>binary_file <span style=color:#ff79c6>=</span> <span style=color:#8be9fd;font-style:italic>open</span>(<span style=color:#f1fa8c>&#39;my_pickled_mary.bin&#39;</span>, mode<span style=color:#ff79c6>=</span><span style=color:#f1fa8c>&#39;wb&#39;</span>)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">18</span>my_pickled_mary <span style=color:#ff79c6>=</span> pickle<span style=color:#ff79c6>.</span>dump(mary, binary_file)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">19</span>binary_file<span style=color:#ff79c6>.</span>close()
</code></pre></div><h2 id=unpickling>Unpickling</h2><p>The process that takes a binary array and converts it to an object hierarchy is called unpickling.</p><p>The unpickling process is done by using the load() function of the pickle module and returns a complete object hierarchy from a simple bytes array. Let&rsquo;s try to use the load function on the example above:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Python data-lang=Python><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span style=color:#ff79c6>import</span> pickle
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span>​
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span style=color:#ff79c6>class</span> <span style=color:#50fa7b>Animal</span>:
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span>    <span style=color:#ff79c6>def</span> __init__(self, number_of_paws, color):
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span>        self<span style=color:#ff79c6>.</span>number_of_paws <span style=color:#ff79c6>=</span> number_of_paws
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span>        self<span style=color:#ff79c6>.</span>color <span style=color:#ff79c6>=</span> color
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span>​
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span><span style=color:#ff79c6>class</span> <span style=color:#50fa7b>Sheep</span>(Animal):
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span>    <span style=color:#ff79c6>def</span> __init__(self, color):
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span>        Animal<span style=color:#ff79c6>.</span>__init__(self, <span style=color:#bd93f9>4</span>, color)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span>​
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span><span style=color:#6272a4># Step 1: Let&#39;s create the sheep Mary</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span>mary <span style=color:#ff79c6>=</span> Sheep(<span style=color:#f1fa8c>&#34;white&#34;</span>)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">14</span>​
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">15</span><span style=color:#6272a4># Step 2: Let&#39;s pickle Mary</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">16</span>my_pickled_mary <span style=color:#ff79c6>=</span> pickle<span style=color:#ff79c6>.</span>dumps(mary)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">17</span>​
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">18</span><span style=color:#6272a4># Step 3: Now, let&#39;s unpickle our sheep Mary creating another instance, another sheep... Dolly!</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">19</span>dolly <span style=color:#ff79c6>=</span> pickle<span style=color:#ff79c6>.</span>loads(my_pickled_mary)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">20</span>​
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">21</span><span style=color:#6272a4># Dolly and Mary are two different objects, in fact if we specify another color for dolly</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">22</span><span style=color:#6272a4># there are no conseguencies for Mary</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">23</span>dolly<span style=color:#ff79c6>.</span>color <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#34;black&#34;</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">24</span>​
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">25</span><span style=color:#8be9fd;font-style:italic>print</span> (<span style=color:#8be9fd;font-style:italic>str</span><span style=color:#ff79c6>.</span>format(<span style=color:#f1fa8c>&#34;Dolly is </span><span style=color:#f1fa8c>{0}</span><span style=color:#f1fa8c> &#34;</span>, dolly<span style=color:#ff79c6>.</span>color))
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">26</span><span style=color:#8be9fd;font-style:italic>print</span> (<span style=color:#8be9fd;font-style:italic>str</span><span style=color:#ff79c6>.</span>format(<span style=color:#f1fa8c>&#34;Mary is </span><span style=color:#f1fa8c>{0}</span><span style=color:#f1fa8c> &#34;</span>, mary<span style=color:#ff79c6>.</span>color))
</code></pre></div><p>In this example you can see that after having pickled the first sheep object (Mary) we have unpickled it to another variable (Dolly) and so we have — in a sense — cloned Mary to create Dolly (Yes, we&rsquo;re cloning sheep&mldr; lol!).</p><p>It goes without saying that changing an attribute value on one of these objects the other one remain untouched because we haven&rsquo;t just copied the reference to the original object, we have actually cloned the original object and its state to create a perfect copy in a completely different instance.</p><blockquote><p>Note: in this example we have cloned an object using the trick of pickling it and unpickling the resulting binary stream in another variable.
This is ok and there are several languages where this approach could even be advised, but if you need to clone an object in Python it&rsquo;s probably better to use the copy module of the standard lib. Since it&rsquo;s designed to clone objects, it works far better.</p></blockquote><h2 id=some-notes-about-pickling>Some notes about pickling</h2><p>All I&rsquo;ve said so far is just to whet your appetite because there&rsquo;s a lot more we could say about pickling. One important thing to be known is that there are several types (or protocols) of pickling because this technic is evolving as the language evolves.</p><p>So, there are currently 5 protocols of pickling:</p><p>According to the <a href=https://docs.python.org/3.4/library/pickle.html#data-stream-format>official documentation</a>:</p><blockquote><p>Protocol version 0 is the original &ldquo;human-readable&rdquo; protocol and is backwards compatible with earlier versions of Python.
Protocol version 1 is an old binary format which is also compatible with earlier versions of Python.
Protocol version 2 was introduced in Python 2.3. It provides much more efficient pickling of new-style classes. Refer to PEP 307 for information about improvements brought by protocol 2.
Protocol version 3 was added in Python 3.0. It has explicit support for bytes objects and cannot be unpickled by Python 2.x. This is the default protocol, and the recommended protocol when compatibility with other Python 3 versions is required.
Protocol version 4 was added in Python 3.4. It adds support for very large objects, pickling more kinds of objects, and some data format optimizations. Refer to PEP 3154 for information about improvements brought by protocol 4.</p></blockquote><p>Another thing that is important to keep in mind is that not every object is picklable. Some objects (like DB connections, handles to opened files etc&mldr;) can&rsquo;t be pickled and trying to pickle an unpicklable object (or to unpickle an object that is not a valid pickle), a pickle.PickleError exception or one of its subclasses (PicklingError and UnpicklingError) is raised.</p><p>For example:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Python data-lang=Python><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span style=color:#ff79c6>import</span> pickle
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span>​
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span>my_custom_pickle <span style=color:#ff79c6>=</span> <span style=color:#8be9fd;font-style:italic>bytes</span>(<span style=color:#f1fa8c>&#34;this is unpicklable&#34;</span>, encoding<span style=color:#ff79c6>=</span><span style=color:#f1fa8c>&#34;UTF-8&#34;</span>)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span>​
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">5</span><span style=color:#6272a4># this next statement will raise a _pickle.UnpicklingError</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">6</span>my_new_object <span style=color:#ff79c6>=</span> pickle<span style=color:#ff79c6>.</span>loads(my_custom_pickle)
</code></pre></div><p>The problem when you have unpicklable object in the hierarchy of the object you want to pickle is that this prevents you to serialize (and store) the entire object. Fortunately, Python offers you two convenient methods to specify what you want to pickle and how to re-initialize (during the unpickling process) the objects that you haven&rsquo;t pickled before. These methods are <strong>setstate</strong>() and <strong>getstate</strong>()</p><p>For example:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Python data-lang=Python><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span style=color:#ff79c6>import</span> pickle
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span>​
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span style=color:#ff79c6>class</span> <span style=color:#50fa7b>my_zen_class</span>:
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span>   number_of_meditations <span style=color:#ff79c6>=</span> <span style=color:#bd93f9>0</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span>​
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span>    <span style=color:#ff79c6>def</span> __init__(self, name):
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span>        self<span style=color:#ff79c6>.</span>number_of_meditations <span style=color:#ff79c6>=</span> <span style=color:#bd93f9>0</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span>        self<span style=color:#ff79c6>.</span>name <span style=color:#ff79c6>=</span> name
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span>​
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span>    <span style=color:#ff79c6>def</span> <span style=color:#50fa7b>meditate</span>(self):
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span>        self<span style=color:#ff79c6>.</span>number_of_meditations <span style=color:#ff79c6>=</span> self<span style=color:#ff79c6>.</span>number_of_meditations <span style=color:#ff79c6>+</span> <span style=color:#bd93f9>1</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span>​
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span>    <span style=color:#ff79c6>def</span> <span style=color:#50fa7b>__getstate__</span>(self):
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">14</span>        <span style=color:#6272a4># this method is called when you are </span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">15</span>        <span style=color:#6272a4># going to pickle the class, to know what to pickle</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">16</span>​
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">17</span>        state <span style=color:#ff79c6>=</span> self<span style=color:#ff79c6>.</span>__dict__<span style=color:#ff79c6>.</span>copy()
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">18</span>​
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">19</span>        <span style=color:#6272a4># You will never get the Buddha state if you count </span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">20</span>        <span style=color:#6272a4># meditations, so </span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">21</span>        <span style=color:#6272a4># don&#39;t pickle this counter, the next time you will just </span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">22</span>        <span style=color:#6272a4># start meditating from scratch :)</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">23</span>        <span style=color:#ff79c6>del</span> state[<span style=color:#f1fa8c>&#39;number_of_meditations&#39;</span>]
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">24</span>​
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">25</span>        <span style=color:#ff79c6>return</span> state
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">26</span>​
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">27</span>    <span style=color:#ff79c6>def</span> <span style=color:#50fa7b>__setstate__</span>(self, state):
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">28</span>        <span style=color:#6272a4># this method is called when you are going to </span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">29</span>        <span style=color:#6272a4># unpickle the class,</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">30</span>        <span style=color:#6272a4># if you need some initialization after the </span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">31</span>        <span style=color:#6272a4># unpickling you can do it here.</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">32</span>​
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">33</span>        self<span style=color:#ff79c6>.</span>__dict__<span style=color:#ff79c6>.</span>update(state)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">34</span>​
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">35</span><span style=color:#6272a4># I start meditating</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">36</span>my_zen_object <span style=color:#ff79c6>=</span> my_zen_class(<span style=color:#f1fa8c>&#34;Dave&#34;</span>)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">37</span><span style=color:#ff79c6>for</span> i <span style=color:#ff79c6>in</span> <span style=color:#8be9fd;font-style:italic>range</span>(<span style=color:#bd93f9>100</span>):
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">38</span>    my_zen_object<span style=color:#ff79c6>.</span>meditate()
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">39</span>​
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">40</span><span style=color:#6272a4># Now I pickle my meditation experience</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">41</span><span style=color:#8be9fd;font-style:italic>print</span>(<span style=color:#8be9fd;font-style:italic>str</span><span style=color:#ff79c6>.</span>format(<span style=color:#f1fa8c>&#34;I&#39;m </span><span style=color:#f1fa8c>{0}</span><span style=color:#f1fa8c>, and I&#39;ve meditated </span><span style=color:#f1fa8c>{1}</span><span style=color:#f1fa8c> times&#39;&#34;</span>, my_zen_object<span style=color:#ff79c6>.</span>name, my_zen_object<span style=color:#ff79c6>.</span>number_of_meditations))
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">42</span>my_pickled_zen_object <span style=color:#ff79c6>=</span> pickle<span style=color:#ff79c6>.</span>dumps(my_zen_object)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">43</span>my_zen_object <span style=color:#ff79c6>=</span> <span style=color:#ff79c6>None</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">44</span>​
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">45</span><span style=color:#6272a4># Now I get my meditation experience back</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">46</span>my_new_zen_object <span style=color:#ff79c6>=</span> pickle<span style=color:#ff79c6>.</span>loads(my_pickled_zen_object)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">47</span>​
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">48</span><span style=color:#6272a4># As expected, the number_of_meditations property </span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">49</span><span style=color:#6272a4># has not been restored because it hasn&#39;t been pickled</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">50</span><span style=color:#8be9fd;font-style:italic>print</span>(<span style=color:#8be9fd;font-style:italic>str</span><span style=color:#ff79c6>.</span>format(<span style=color:#f1fa8c>&#34;I&#39;m </span><span style=color:#f1fa8c>{0}</span><span style=color:#f1fa8c>, and I don&#39;t have a beginner mind yet because I&#39;ve meditated only </span><span style=color:#f1fa8c>{1}</span><span style=color:#f1fa8c> times&#39;&#34;</span>, my_new_zen_object<span style=color:#ff79c6>.</span>name, my_new_zen_object<span style=color:#ff79c6>.</span>number_of_meditations))
</code></pre></div><h2 id=the-security-concern>The security concern</h2><p>Now you know about what does it means to serialize and deserialize objects in Python but&mldr; have you ever tought at what could it means from a security perspective? If not, go ahead and have a loot to <a href=https://realpython.com/python-pickle-module/>this article I wrote for &ldquo;Real Python&rdquo;</a>. It has a lot of details and a specific section about the security topic.</p><p>Enjoy!
D.</p></div></article><hr><h2 style=color:#2bbc8a;text-align:center>Did you find this article helpful?</h2><br><style>.bmc-button img{height:34px!important;width:35px!important;margin-bottom:1px!important;box-shadow:none!important;border:none!important;vertical-align:middle!important}.bmc-button{padding:7px 10px!important;line-height:35px!important;height:51px!important;min-width:217px!important;text-decoration:none!important;display:inline-flex!important;color:#fff!important;background-color:#ff813f!important;border-radius:5px!important;border:1px solid transparent!important;padding:7px 10px!important;font-size:22px!important;letter-spacing:.6px!important;box-shadow:0 1px 2px rgba(190,190,190,.5)!important;-webkit-box-shadow:0 1px 2px 2px rgba(190,190,190,.5)!important;margin:0 auto!important;font-family:cookie,cursive!important;-webkit-box-sizing:border-box!important;box-sizing:border-box!important;-o-transition:.3s all linear!important;-webkit-transition:.3s all linear!important;-moz-transition:.3s all linear!important;-ms-transition:.3s all linear!important;transition:.3s all linear!important}.bmc-button:hover,.bmc-button:active,.bmc-button:focus{-webkit-box-shadow:0 1px 2px 2px rgba(190,190,190,.5)!important;text-decoration:none!important;box-shadow:0 1px 2px 2px rgba(190,190,190,.5)!important;opacity:.85!important;color:#fff!important}</style><link href="https://fonts.googleapis.com/css?family=Cookie" rel=stylesheet><a class=bmc-button target=_blank href=https://www.buymeacoffee.com/dXjDHmt style=align:left><img src=https://cdn.buymeacoffee.com/buttons/bmc-new-btn-logo.svg alt="Buy me a coffee!" align=left>
<span style=margin-left:15px;font-size:28px!important>Buy me a coffee!</span></a><hr><div class=blog-post-comments><div id=disquss_thread><script src=https://utteranc.es/client.js repo=mastro35/tpc issue-term=pathname label="The Python Corner" theme=github-dark crossorigin=anonymous async></script></div></div><div id=footer-post-container><div id=footer-post><div id=nav-footer style=display:none><ul><li><a href=../../>Home</a></li><li><a href=../../posts>Articles</a></li><li><a href=../../tags>Tags</a></li><li><a href=../../about>About</a></li><li><a href=../../help_us>Help Us</a></li><li><a href=https://buttondown.email/thepythoncorner>Newsletter</a></li><li><a href=https://shop.spreadshirt.com/the-python-corner>Swag Store</a></li></ul></div><div id=toc-footer style=display:none><nav id=TableOfContents><ul><li><a href=#pickling>Pickling</a></li><li><a href=#unpickling>Unpickling</a></li><li><a href=#some-notes-about-pickling>Some notes about pickling</a></li><li><a href=#the-security-concern>The security concern</a></li></ul></nav></div><div id=share-footer style=display:none><ul><li><a class=icon href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fmastro35.github.io%2ftpc%2fposts%2f2016-12-6-object-serialization-python-pickle%2f" aria-label=Facebook><i class="fab fa-facebook fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://twitter.com/share?url=https%3a%2f%2fmastro35.github.io%2ftpc%2fposts%2f2016-12-6-object-serialization-python-pickle%2f&text=Object%20Serialization%20in%20Python%20With%20the%20Pickle%20Module" aria-label=Twitter><i class="fab fa-twitter fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2fmastro35.github.io%2ftpc%2fposts%2f2016-12-6-object-serialization-python-pickle%2f&title=Object%20Serialization%20in%20Python%20With%20the%20Pickle%20Module" aria-label=Linkedin><i class="fab fa-linkedin fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2fmastro35.github.io%2ftpc%2fposts%2f2016-12-6-object-serialization-python-pickle%2f&is_video=false&description=Object%20Serialization%20in%20Python%20With%20the%20Pickle%20Module" aria-label=Pinterest><i class="fab fa-pinterest fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="mailto:?subject=Object%20Serialization%20in%20Python%20With%20the%20Pickle%20Module&body=Check out this article: https%3a%2f%2fmastro35.github.io%2ftpc%2fposts%2f2016-12-6-object-serialization-python-pickle%2f" aria-label=Email><i class="fas fa-envelope fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://getpocket.com/save?url=https%3a%2f%2fmastro35.github.io%2ftpc%2fposts%2f2016-12-6-object-serialization-python-pickle%2f&title=Object%20Serialization%20in%20Python%20With%20the%20Pickle%20Module" aria-label=Pocket><i class="fab fa-get-pocket fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://reddit.com/submit?url=https%3a%2f%2fmastro35.github.io%2ftpc%2fposts%2f2016-12-6-object-serialization-python-pickle%2f&title=Object%20Serialization%20in%20Python%20With%20the%20Pickle%20Module" aria-label=reddit><i class="fab fa-reddit fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://www.tumblr.com/share/link?url=https%3a%2f%2fmastro35.github.io%2ftpc%2fposts%2f2016-12-6-object-serialization-python-pickle%2f&name=Object%20Serialization%20in%20Python%20With%20the%20Pickle%20Module&description=DISCLAMER%3a%20There%26rsquo%3bs%20a%20newer%20%28and%20probably%20better%29%20article%20about%20this%20topic%20that%20I%20wrote%20for%20Real%20Python%20website.%0aIt%26rsquo%3bs%20longer%20and%20more%20detailed%20and%20it%20also%20have%20a%20section%20about%20the%20security%20concern%20when%20using%20the%20pickle%20module%2c%20so%26hellip%3b%20I%20want%20to%20be%20honest%20and%20I%20suggest%20you%20to%20read%20that%20article%20%26hellip%3b%20but%20if%20you%20like%20it%2c%20don%26rsquo%3bt%20forget%20to%20come%20back%20here%20and%20buy%20me%20a%20coffe%21%20%3a%29" aria-label=Tumblr><i class="fab fa-tumblr fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fmastro35.github.io%2ftpc%2fposts%2f2016-12-6-object-serialization-python-pickle%2f&t=Object%20Serialization%20in%20Python%20With%20the%20Pickle%20Module" aria-label="Hacker News"><i class="fab fa-hacker-news fa-lg" aria-hidden=true></i></a></li></ul></div><div id=actions-footer><a id=menu-toggle class=icon href=# onclick="return $('#nav-footer').toggle(),!1" aria-label=Menu><i class="fas fa-bars fa-lg" aria-hidden=true></i> Menu</a>
<a id=toc-toggle class=icon href=# onclick="return $('#toc-footer').toggle(),!1" aria-label=TOC><i class="fas fa-list fa-lg" aria-hidden=true></i> TOC</a>
<a id=share-toggle class=icon href=# onclick="return $('#share-footer').toggle(),!1" aria-label=Share><i class="fas fa-share-alt fa-lg" aria-hidden=true></i> share</a>
<a id=top style=display:none class=icon href=# onclick="$('html, body').animate({scrollTop:0},'fast')" aria-label="Top of Page"><i class="fas fa-chevron-up fa-lg" aria-hidden=true></i> Top</a></div></div></div><footer id=footer><div class=footer-left>Copyright &copy; 2021 Davide Mastromatteo</div><div class=footer-right><nav><ul><li><a href=../../>Home</a></li><li><a href=../../posts>Articles</a></li><li><a href=../../tags>Tags</a></li><li><a href=../../about>About</a></li><li><a href=../../help_us>Help Us</a></li><li><a href=https://buttondown.email/thepythoncorner>Newsletter</a></li><li><a href=https://shop.spreadshirt.com/the-python-corner>Swag Store</a></li></ul></nav></div></footer></div></body><link rel=stylesheet href=../../lib/font-awesome/css/all.min.css><script src=../../lib/jquery/jquery.min.js></script><script src=../../js/main.js></script><script src=../../js/code-copy.js></script></html>
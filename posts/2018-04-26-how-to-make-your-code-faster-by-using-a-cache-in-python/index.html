<!doctype html><html lang=en-us><head><script data-ad-client=ca-pub-1030730506660314 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script><script id=mNCC language=javascript>medianet_width="728",medianet_height="90",medianet_crid="167545135",medianet_versionId="3111299"</script><script src="//contextual.media.net/nmedianet.js?cid=8CU62P5S3"></script><script type=text/javascript src=https://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js></script><script type=text/javascript src=https://blockchain.info/Resources/js/pay-now-button.js></script><link rel=preload href=../../lib/font-awesome/webfonts/fa-brands-400.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=../../lib/font-awesome/webfonts/fa-regular-400.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=../../lib/font-awesome/webfonts/fa-solid-900.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=../../lib/JetBrainsMono/web/woff2/JetBrainsMono-Regular.woff2 as=font type=font/woff2 crossorigin=anonymous><script type=text/javascript src=https://latest.cactus.chat/cactus.js></script><link rel=stylesheet href=https://latest.cactus.chat/style.css type=text/css><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><title>Speed up your code by using a cache in Python | The Python Corner</title><link rel=canonical href=https://mastro35.github.io/tpc/posts/2018-04-26-how-to-make-your-code-faster-by-using-a-cache-in-python/><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="all,follow"><meta name=googlebot content="index,follow,snippet,archive"><meta property="og:title" content="Speed up your code by using a cache in Python"><meta property="og:description" content="If the first concern of a developer is to be sure that the code they write works well, the second one is to make sure that it run fast. This is expecially true when you&rsquo;re dealing with web applications, where the scalability of your application is a crucial topic. For this reason, one of the most important tool we can use to improve the speed of our code is the use of a cache system."><meta property="og:type" content="article"><meta property="og:url" content="https://mastro35.github.io/tpc/posts/2018-04-26-how-to-make-your-code-faster-by-using-a-cache-in-python/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2018-04-26T11:26:00+02:00"><meta property="article:modified_time" content="2018-04-26T11:26:00+02:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Speed up your code by using a cache in Python"><meta name=twitter:description content="If the first concern of a developer is to be sure that the code they write works well, the second one is to make sure that it run fast. This is expecially true when you&rsquo;re dealing with web applications, where the scalability of your application is a crucial topic. For this reason, one of the most important tool we can use to improve the speed of our code is the use of a cache system."><link rel=stylesheet href=https://mastro35.github.io/tpc/css/styles.c05d68261bf086a9d7713c4f8a6215a3601608e267a816a7ee58f139b3d1aae51222aae2081c8e0c6bd35e1334773b7a16283022f31f92afd93bb37e5e822e66.css integrity="sha512-wF1oJhvwhqnXcTxPimIVo2AWCOJnqBan7ljxObPRquUSIqriCByODGvTXhM0dzt6FigwIvMfkq/ZO7N+XoIuZg=="><!--[if lt IE 9]><script src=https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js></script><script src=https://oss.maxcdn.com/respond/1.4.2/respond.min.js></script><![endif]--><link rel=icon type=image/png href=https://mastro35.github.io/tpc/images/favicon.ico><script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga('create','UA-120027408-1','auto'),ga('send','pageview'))</script><script async src=https://www.google-analytics.com/analytics.js></script></head><body class="max-width mx-auto px3 ltr"><div class="content index py4"><div id=header-post><a id=menu-icon href=#><i class="fas fa-bars fa-lg"></i></a>
<a id=menu-icon-tablet href=#><i class="fas fa-bars fa-lg"></i></a>
<a id=top-icon-tablet href=# onclick="$('html, body').animate({scrollTop:0},'fast')" style=display:none aria-label="Top of Page"><i class="fas fa-chevron-up fa-lg"></i></a>
<span id=menu><span id=nav><ul><li><a href=../../>Home</a></li><li><a href=../../posts>Articles</a></li><li><a href=../../tags>Tags</a></li><li><a href=../../about>About</a></li><li><a href=../../help_us>Help Us</a></li><li><a href=https://buttondown.email/thepythoncorner>Newsletter</a></li><li><a href=https://shop.spreadshirt.com/the-python-corner>Swag Store</a></li></ul></span><br><span id=actions><ul><li><a class=icon href=https://mastro35.github.io/tpc/posts/2018-04-17-generators-in-python-should-i-use-them/ aria-label=Previous><i class="fas fa-chevron-left" aria-hidden=true onmouseover="$('#i-prev').toggle()" onmouseout="$('#i-prev').toggle()"></i></a></li><li><a class=icon href=https://mastro35.github.io/tpc/posts/2018-08-01-how-to-create-a-windows-service-in-python/ aria-label=Next><i class="fas fa-chevron-right" aria-hidden=true onmouseover="$('#i-next').toggle()" onmouseout="$('#i-next').toggle()"></i></a></li><li><a class=icon href=# onclick="$('html, body').animate({scrollTop:0},'fast')" aria-label="Top of Page"><i class="fas fa-chevron-up" aria-hidden=true onmouseover="$('#i-top').toggle()" onmouseout="$('#i-top').toggle()"></i></a></li><li><a class=icon href=# aria-label=Share><i class="fas fa-share-alt" aria-hidden=true onmouseover="$('#i-share').toggle()" onmouseout="$('#i-share').toggle()" onclick="return $('#share').toggle(),!1"></i></a></li></ul><span id=i-prev class=info style=display:none>Previous post</span>
<span id=i-next class=info style=display:none>Next post</span>
<span id=i-top class=info style=display:none>Back to top</span>
<span id=i-share class=info style=display:none>Share post</span></span><br><div id=share style=display:none><ul><li><a class=icon href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fmastro35.github.io%2ftpc%2fposts%2f2018-04-26-how-to-make-your-code-faster-by-using-a-cache-in-python%2f" aria-label=Facebook><i class="fab fa-facebook" aria-hidden=true></i></a></li><li><a class=icon href="https://twitter.com/share?url=https%3a%2f%2fmastro35.github.io%2ftpc%2fposts%2f2018-04-26-how-to-make-your-code-faster-by-using-a-cache-in-python%2f&text=Speed%20up%20your%20code%20by%20using%20a%20cache%20in%20Python" aria-label=Twitter><i class="fab fa-twitter" aria-hidden=true></i></a></li><li><a class=icon href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2fmastro35.github.io%2ftpc%2fposts%2f2018-04-26-how-to-make-your-code-faster-by-using-a-cache-in-python%2f&title=Speed%20up%20your%20code%20by%20using%20a%20cache%20in%20Python" aria-label=Linkedin><i class="fab fa-linkedin" aria-hidden=true></i></a></li><li><a class=icon href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2fmastro35.github.io%2ftpc%2fposts%2f2018-04-26-how-to-make-your-code-faster-by-using-a-cache-in-python%2f&is_video=false&description=Speed%20up%20your%20code%20by%20using%20a%20cache%20in%20Python" aria-label=Pinterest><i class="fab fa-pinterest" aria-hidden=true></i></a></li><li><a class=icon href="mailto:?subject=Speed%20up%20your%20code%20by%20using%20a%20cache%20in%20Python&body=Check out this article: https%3a%2f%2fmastro35.github.io%2ftpc%2fposts%2f2018-04-26-how-to-make-your-code-faster-by-using-a-cache-in-python%2f" aria-label=Email><i class="fas fa-envelope" aria-hidden=true></i></a></li><li><a class=icon href="https://getpocket.com/save?url=https%3a%2f%2fmastro35.github.io%2ftpc%2fposts%2f2018-04-26-how-to-make-your-code-faster-by-using-a-cache-in-python%2f&title=Speed%20up%20your%20code%20by%20using%20a%20cache%20in%20Python" aria-label=Pocket><i class="fab fa-get-pocket" aria-hidden=true></i></a></li><li><a class=icon href="http://reddit.com/submit?url=https%3a%2f%2fmastro35.github.io%2ftpc%2fposts%2f2018-04-26-how-to-make-your-code-faster-by-using-a-cache-in-python%2f&title=Speed%20up%20your%20code%20by%20using%20a%20cache%20in%20Python" aria-label=reddit><i class="fab fa-reddit" aria-hidden=true></i></a></li><li><a class=icon href="http://www.tumblr.com/share/link?url=https%3a%2f%2fmastro35.github.io%2ftpc%2fposts%2f2018-04-26-how-to-make-your-code-faster-by-using-a-cache-in-python%2f&name=Speed%20up%20your%20code%20by%20using%20a%20cache%20in%20Python&description=If%20the%20first%20concern%20of%20a%20developer%20is%20to%20be%20sure%20that%20the%20code%20they%20write%20works%20well%2c%20the%20second%20one%20is%20to%20make%20sure%20that%20it%20run%20fast.%20This%20is%20expecially%20true%20when%20you%26rsquo%3bre%20dealing%20with%20web%20applications%2c%20where%20the%20scalability%20of%20your%20application%20is%20a%20crucial%20topic.%20For%20this%20reason%2c%20one%20of%20the%20most%20important%20tool%20we%20can%20use%20to%20improve%20the%20speed%20of%20our%20code%20is%20the%20use%20of%20a%20cache%20system." aria-label=Tumblr><i class="fab fa-tumblr" aria-hidden=true></i></a></li><li><a class=icon href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fmastro35.github.io%2ftpc%2fposts%2f2018-04-26-how-to-make-your-code-faster-by-using-a-cache-in-python%2f&t=Speed%20up%20your%20code%20by%20using%20a%20cache%20in%20Python" aria-label="Hacker News"><i class="fab fa-hacker-news" aria-hidden=true></i></a></li></ul></div><div id=toc><nav id=TableOfContents><ul><li><a href=#cachetools-cache-type>Cachetools' cache type</a></li><li><a href=#the-drawbacks>The drawbacks</a></li></ul></nav></div></span></div><article class=post itemscope itemtype=http://schema.org/BlogPosting><header><h1 class=posttitle itemprop="name headline">Speed up your code by using a cache in Python</h1><div class=meta><div class=postdate><time datetime="2018-04-26 11:26:00 +0200 +0200" itemprop=datePublished>2018-04-26</time></div><div class=article-read-time><i class="far fa-clock"></i>
6 minute read</div><div class=article-category><i class="fas fa-archive"></i>
<a class=category-link href=../../categories/dev>Dev</a></div><div class=article-tag><i class="fas fa-tag"></i>
<a class=tag-link href=../../tags/cache rel=tag>Cache</a>
,
<a class=tag-link href=../../tags/featured rel=tag>Featured</a>
,
<a class=tag-link href=../../tags/performance rel=tag>Performance</a>
,
<a class=tag-link href=../../tags/python rel=tag>Python</a></div></div></header><div class=content itemprop=articleBody><p><img src=https://imgs.xkcd.com/comics/refresh_types.png alt=teaser></p><p>If the first concern of a developer is to be sure that the code they write works well, the second one is to make sure that it run fast. This is expecially true when you&rsquo;re dealing with web applications, where the scalability of your application is a crucial topic. For this reason, one of the most important tool we can use to improve the speed of our code is the use of a cache system.</p><p>A cache system is a component that stores data so that future requests for data we already served in the past, could be accomplished faster. There are a lot of solutions that can be used to implement a cache system but today I want to point out a specific solution that allows your Python code to use a cache for everyday use, without setting up a complex (and yet more powerful) system like <a href=http://redis.io>Redis</a> or other: the package <a href=https://pypi.org/project/cachetools/>cachetools</a>.</p><p>As always, let&rsquo;s make the code talk for us! :)</p><p>It goes without saying that to use the package cachetools we need to install it, so before trying the code in this article, please install the required package:</p><pre><code class=language-console data-lang=console>pip install cachetools
</code></pre><p>As always, my advise is to install everyting into a virtual environment. If you don&rsquo;t know what a virtual environment is or how to use it, <a href=https://www.thepythoncorner.com/2016/11/using-virtual-environments-with-python/>check my previous article</a> about this topic.</p><p>Now, let&rsquo;s pretend that you have an application with a very time consuming function that you call many times in your code, with 100 different parameters, but the result you get, if the input parameter remain the same, doesn&rsquo;t change very often. To make it more concrete, let&rsquo;s say that your work is to sell candies, and you have 100 different kind of candies in stock.</p><p>In the cash register&rsquo;s python source code, you have a function that check the price of a single candy by connecting with a web service of a server in the cloud. Unfortunately, this web service is very slow to response (you should fire the guy who wrote it maybe), so this function that check the price is always very slow.</p><p>Here is your code:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span style=color:#ff79c6>import</span> time
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span style=color:#ff79c6>import</span> datetime
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span><span style=color:#ff79c6>def</span> <span style=color:#50fa7b>get_candy_price</span>(candy_id):
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span>    <span style=color:#6272a4># let&#39;s use a sleep to simulate the time your function spends trying to connect to</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span>    <span style=color:#6272a4># the web service, 5 seconds will be enough.</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span>    time<span style=color:#ff79c6>.</span>sleep(<span style=color:#bd93f9>5</span>)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span>    <span style=color:#6272a4># let&#39;s pretend that the price returned by the web service is $1 for candies with a</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span>    <span style=color:#6272a4># odd candy_id and $1,5 for candies with a even candy_id</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span>    price <span style=color:#ff79c6>=</span> <span style=color:#bd93f9>1.5</span> <span style=color:#ff79c6>if</span> candy_id <span style=color:#ff79c6>%</span> <span style=color:#bd93f9>2</span> <span style=color:#ff79c6>==</span> <span style=color:#bd93f9>0</span> <span style=color:#ff79c6>else</span> <span style=color:#bd93f9>1</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">14</span>    <span style=color:#ff79c6>return</span> (datetime<span style=color:#ff79c6>.</span>datetime<span style=color:#ff79c6>.</span>now()<span style=color:#ff79c6>.</span>strftime(<span style=color:#f1fa8c>&#34;</span><span style=color:#f1fa8c>%c</span><span style=color:#f1fa8c>&#34;</span>), price)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">15</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">16</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">17</span><span style=color:#6272a4># now, let&#39;s simulate 20 customers in your show.</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">18</span><span style=color:#6272a4># They are asking for candy with id 2 and candy with id 3...</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">19</span><span style=color:#ff79c6>for</span> i <span style=color:#ff79c6>in</span> <span style=color:#8be9fd;font-style:italic>range</span>(<span style=color:#bd93f9>0</span>,<span style=color:#bd93f9>20</span>):
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">20</span>    <span style=color:#8be9fd;font-style:italic>print</span>(get_candy_price(<span style=color:#bd93f9>2</span>))
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">21</span>    <span style=color:#8be9fd;font-style:italic>print</span>(get_candy_price(<span style=color:#bd93f9>3</span>))
</code></pre></div><p>As you can see, the get_candy_price is very slow (we have put a &ldquo;sleep&rdquo; in the function to simulate the slowness due to the bad web service we are relying on).</p><p>What can we do?</p><p>Well, this seems the perfect function that can benefit from the use of a cache system. The candy price is not going to vary so often and even if it change, we could assume that it&rsquo;s ok if it&rsquo;s updated on our system within 5 minutes, with no hurry.</p><p>So, how can we implement this behaviour?
It&rsquo;s super easy, we need just three code lines.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span style=color:#ff79c6>import</span> time
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span style=color:#ff79c6>import</span> datetime
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span><span style=color:#ff79c6>from</span> cachetools <span style=color:#ff79c6>import</span> cached, TTLCache  <span style=color:#6272a4># 1 - let&#39;s import the &#34;cached&#34; decorator and the &#34;TTLCache&#34; object from cachetools</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span>cache <span style=color:#ff79c6>=</span> TTLCache(maxsize<span style=color:#ff79c6>=</span><span style=color:#bd93f9>100</span>, ttl<span style=color:#ff79c6>=</span><span style=color:#bd93f9>300</span>)  <span style=color:#6272a4># 2 - let&#39;s create the cache object.</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span>@cached(cache)  <span style=color:#6272a4># 3 - it&#39;s time to decorate the method to use our cache system!</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span><span style=color:#ff79c6>def</span> <span style=color:#50fa7b>get_candy_price</span>(candy_id):
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span>    <span style=color:#6272a4># let&#39;s use a sleep to simulate the time your function spends trying to connect to</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span>    <span style=color:#6272a4># the web service, 5 seconds will be enough.</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span>    time<span style=color:#ff79c6>.</span>sleep(<span style=color:#bd93f9>5</span>)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span>    <span style=color:#6272a4># let&#39;s pretend that the price returned by the web service is $1 for candies with a</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">14</span>    <span style=color:#6272a4># odd candy_id and $1,5 for candies with a even candy_id</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">15</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">16</span>    price <span style=color:#ff79c6>=</span> <span style=color:#bd93f9>1.5</span> <span style=color:#ff79c6>if</span> candy_id <span style=color:#ff79c6>%</span> <span style=color:#bd93f9>2</span> <span style=color:#ff79c6>==</span> <span style=color:#bd93f9>0</span> <span style=color:#ff79c6>else</span> <span style=color:#bd93f9>1</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">17</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">18</span>    <span style=color:#ff79c6>return</span> (datetime<span style=color:#ff79c6>.</span>datetime<span style=color:#ff79c6>.</span>now()<span style=color:#ff79c6>.</span>strftime(<span style=color:#f1fa8c>&#34;</span><span style=color:#f1fa8c>%c</span><span style=color:#f1fa8c>&#34;</span>), price)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">19</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">20</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">21</span><span style=color:#6272a4># now, let&#39;s simulate 20 customers in your show.</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">22</span><span style=color:#6272a4># They are asking for candy with id 2 and candy with id 3...</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">23</span><span style=color:#ff79c6>for</span> i <span style=color:#ff79c6>in</span> <span style=color:#8be9fd;font-style:italic>range</span>(<span style=color:#bd93f9>0</span>,<span style=color:#bd93f9>20</span>):
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">24</span>    <span style=color:#8be9fd;font-style:italic>print</span>(get_candy_price(<span style=color:#bd93f9>2</span>))
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">25</span>    <span style=color:#8be9fd;font-style:italic>print</span>(get_candy_price(<span style=color:#bd93f9>3</span>))
</code></pre></div><p>Can you spot the three new lines?</p><p>The first one is the import statement that we need to use the cachetools package.</p><p>The second one is the line to create the cache. We need to specify how many objects we will store (100, because we have just 100 kind of candies) and the time each cached results have to live (300 seconds, 5 minutes for us).</p><p>The third line is the decorator, that enable the function to use the cached results.</p><p>Now try to execute this program again and you will notice that the first time the function is called (with parameter &ldquo;2&rdquo;) it takes 5 seconds to be executed (yes, the cache is empty at that time) and so it does the second time the function is called (with parameter &ldquo;3&rdquo;) because in the cache there&rsquo;s just the result for the candy_id 2 that can&rsquo;t be used since we are asking for the candy_id 3. But from the third call on, every single call is super fast, since the body of the method is NOT executed at all. The results we get are just taken from the cache system. Isn&rsquo;t that cool?</p><h2 id=cachetools-cache-type>Cachetools' cache type</h2><p>In the example above we have used a &ldquo;Time To Live Cache&rdquo;. This cache associates a time to live value to each item stored in cache. Items that expire because they have exceeded their time-to-live are removed automatically, making room for new values. If no expired items are there to remove, the least recently used items will be discarded first to make space when necessary.</p><p>Other kinds of cache that are available in the cachetools package are:</p><ul><li>the <em>LFUCache</em> (Least Frequently Used), that counts how often an item is retrieved, and discards the items used least often to make space when necessary.</li><li>the <em>LRUCache</em> (Least Recently Used), that discards the least recently used items first to make space when necessary.</li><li>the <em>RRCache</em> (Random Replacement), that randomly selects candidate items and discards them to make space when necessary.</li></ul><p>And all these cache types can be used in a decorator of a function, like we did it before, or simply by creating a cache object and using it directly, choosing at run time what to add to the cache and when to retrieve the values added.</p><h2 id=the-drawbacks>The drawbacks</h2><p>One thing a wise person should always keep in consideration is that</p><blockquote><p>not all that glitters is gold</p></blockquote><p>A cache system bring also some disadvantages.</p><p>The first and more obvious one is that cached data are  (by definition )  &ldquo;old&rdquo;. That means that when you reuse these old data, you run the risk of presenting data that are no more relevant in the new context. In the example that we&rsquo;ve seen before, if you are selling candies you can assume that a five minutes delay in retrieving the candy price from the server is fair enough to reuse the cached data. But if you were in a different context, and you were getting the current Bitcoin value, reuse a five minutes old result could be the most stupid thing to do. :)</p><p>Another thing that you have to keep in mind when using a cache is that the data you are caching are not stored in &ldquo;Eega Beeva&rsquo;s pockets&rdquo;, they are stored in your RAM. So, if you cache 100 complex objects that are 5 Megabytes each, you are storing 500 Megabytes in the ram of your server.</p><blockquote><p>Developing is often a matter of tradeoffs, think about it not only when you have to decide if to use a cache or not, but always when you start designing a software solution.</p></blockquote><p>Ok, that&rsquo;s all folks, if you want to dig in this topic, go and check <a href=http://cachetools.readthedocs.io/en/latest/>the documentation of the cachetools package</a>.ù</p><p>Happy caching! :)</p><p>D.</p></div></article><hr><h2 style=color:#2bbc8a;text-align:center>Did you find this article helpful?</h2><br><style>.bmc-button img{height:34px!important;width:35px!important;margin-bottom:1px!important;box-shadow:none!important;border:none!important;vertical-align:middle!important}.bmc-button{padding:7px 10px!important;line-height:35px!important;height:51px!important;min-width:217px!important;text-decoration:none!important;display:inline-flex!important;color:#fff!important;background-color:#ff813f!important;border-radius:5px!important;border:1px solid transparent!important;padding:7px 10px!important;font-size:22px!important;letter-spacing:.6px!important;box-shadow:0 1px 2px rgba(190,190,190,.5)!important;-webkit-box-shadow:0 1px 2px 2px rgba(190,190,190,.5)!important;margin:0 auto!important;font-family:cookie,cursive!important;-webkit-box-sizing:border-box!important;box-sizing:border-box!important;-o-transition:.3s all linear!important;-webkit-transition:.3s all linear!important;-moz-transition:.3s all linear!important;-ms-transition:.3s all linear!important;transition:.3s all linear!important}.bmc-button:hover,.bmc-button:active,.bmc-button:focus{-webkit-box-shadow:0 1px 2px 2px rgba(190,190,190,.5)!important;text-decoration:none!important;box-shadow:0 1px 2px 2px rgba(190,190,190,.5)!important;opacity:.85!important;color:#fff!important}</style><link href="https://fonts.googleapis.com/css?family=Cookie" rel=stylesheet><a class=bmc-button target=_blank href=https://www.buymeacoffee.com/dXjDHmt style=align:left><img src=https://cdn.buymeacoffee.com/buttons/bmc-new-btn-logo.svg alt="Buy me a coffee!" align=left>
<span style=margin-left:15px;font-size:28px!important>Buy me a coffee!</span></a><hr><div class=blog-post-comments><div id=disquss_thread><script src=https://utteranc.es/client.js repo=mastro35/tpc issue-term=pathname label="The Python Corner" theme=github-dark crossorigin=anonymous async></script></div></div><div id=footer-post-container><div id=footer-post><div id=nav-footer style=display:none><ul><li><a href=../../>Home</a></li><li><a href=../../posts>Articles</a></li><li><a href=../../tags>Tags</a></li><li><a href=../../about>About</a></li><li><a href=../../help_us>Help Us</a></li><li><a href=https://buttondown.email/thepythoncorner>Newsletter</a></li><li><a href=https://shop.spreadshirt.com/the-python-corner>Swag Store</a></li></ul></div><div id=toc-footer style=display:none><nav id=TableOfContents><ul><li><a href=#cachetools-cache-type>Cachetools' cache type</a></li><li><a href=#the-drawbacks>The drawbacks</a></li></ul></nav></div><div id=share-footer style=display:none><ul><li><a class=icon href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fmastro35.github.io%2ftpc%2fposts%2f2018-04-26-how-to-make-your-code-faster-by-using-a-cache-in-python%2f" aria-label=Facebook><i class="fab fa-facebook fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://twitter.com/share?url=https%3a%2f%2fmastro35.github.io%2ftpc%2fposts%2f2018-04-26-how-to-make-your-code-faster-by-using-a-cache-in-python%2f&text=Speed%20up%20your%20code%20by%20using%20a%20cache%20in%20Python" aria-label=Twitter><i class="fab fa-twitter fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2fmastro35.github.io%2ftpc%2fposts%2f2018-04-26-how-to-make-your-code-faster-by-using-a-cache-in-python%2f&title=Speed%20up%20your%20code%20by%20using%20a%20cache%20in%20Python" aria-label=Linkedin><i class="fab fa-linkedin fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2fmastro35.github.io%2ftpc%2fposts%2f2018-04-26-how-to-make-your-code-faster-by-using-a-cache-in-python%2f&is_video=false&description=Speed%20up%20your%20code%20by%20using%20a%20cache%20in%20Python" aria-label=Pinterest><i class="fab fa-pinterest fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="mailto:?subject=Speed%20up%20your%20code%20by%20using%20a%20cache%20in%20Python&body=Check out this article: https%3a%2f%2fmastro35.github.io%2ftpc%2fposts%2f2018-04-26-how-to-make-your-code-faster-by-using-a-cache-in-python%2f" aria-label=Email><i class="fas fa-envelope fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://getpocket.com/save?url=https%3a%2f%2fmastro35.github.io%2ftpc%2fposts%2f2018-04-26-how-to-make-your-code-faster-by-using-a-cache-in-python%2f&title=Speed%20up%20your%20code%20by%20using%20a%20cache%20in%20Python" aria-label=Pocket><i class="fab fa-get-pocket fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://reddit.com/submit?url=https%3a%2f%2fmastro35.github.io%2ftpc%2fposts%2f2018-04-26-how-to-make-your-code-faster-by-using-a-cache-in-python%2f&title=Speed%20up%20your%20code%20by%20using%20a%20cache%20in%20Python" aria-label=reddit><i class="fab fa-reddit fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://www.tumblr.com/share/link?url=https%3a%2f%2fmastro35.github.io%2ftpc%2fposts%2f2018-04-26-how-to-make-your-code-faster-by-using-a-cache-in-python%2f&name=Speed%20up%20your%20code%20by%20using%20a%20cache%20in%20Python&description=If%20the%20first%20concern%20of%20a%20developer%20is%20to%20be%20sure%20that%20the%20code%20they%20write%20works%20well%2c%20the%20second%20one%20is%20to%20make%20sure%20that%20it%20run%20fast.%20This%20is%20expecially%20true%20when%20you%26rsquo%3bre%20dealing%20with%20web%20applications%2c%20where%20the%20scalability%20of%20your%20application%20is%20a%20crucial%20topic.%20For%20this%20reason%2c%20one%20of%20the%20most%20important%20tool%20we%20can%20use%20to%20improve%20the%20speed%20of%20our%20code%20is%20the%20use%20of%20a%20cache%20system." aria-label=Tumblr><i class="fab fa-tumblr fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fmastro35.github.io%2ftpc%2fposts%2f2018-04-26-how-to-make-your-code-faster-by-using-a-cache-in-python%2f&t=Speed%20up%20your%20code%20by%20using%20a%20cache%20in%20Python" aria-label="Hacker News"><i class="fab fa-hacker-news fa-lg" aria-hidden=true></i></a></li></ul></div><div id=actions-footer><a id=menu-toggle class=icon href=# onclick="return $('#nav-footer').toggle(),!1" aria-label=Menu><i class="fas fa-bars fa-lg" aria-hidden=true></i> Menu</a>
<a id=toc-toggle class=icon href=# onclick="return $('#toc-footer').toggle(),!1" aria-label=TOC><i class="fas fa-list fa-lg" aria-hidden=true></i> TOC</a>
<a id=share-toggle class=icon href=# onclick="return $('#share-footer').toggle(),!1" aria-label=Share><i class="fas fa-share-alt fa-lg" aria-hidden=true></i> share</a>
<a id=top style=display:none class=icon href=# onclick="$('html, body').animate({scrollTop:0},'fast')" aria-label="Top of Page"><i class="fas fa-chevron-up fa-lg" aria-hidden=true></i> Top</a></div></div></div><footer id=footer><div class=footer-left>Copyright &copy; 2021 Davide Mastromatteo</div><div class=footer-right><nav><ul><li><a href=../../>Home</a></li><li><a href=../../posts>Articles</a></li><li><a href=../../tags>Tags</a></li><li><a href=../../about>About</a></li><li><a href=../../help_us>Help Us</a></li><li><a href=https://buttondown.email/thepythoncorner>Newsletter</a></li><li><a href=https://shop.spreadshirt.com/the-python-corner>Swag Store</a></li></ul></nav></div></footer></div></body><link rel=stylesheet href=../../lib/font-awesome/css/all.min.css><script src=../../lib/jquery/jquery.min.js></script><script src=../../js/main.js></script><script src=../../js/code-copy.js></script></html>
<!doctype html><html lang=en-us><head><script data-ad-client=ca-pub-1030730506660314 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script><script id=mNCC language=javascript>medianet_width="728",medianet_height="90",medianet_crid="167545135",medianet_versionId="3111299"</script><script src="//contextual.media.net/nmedianet.js?cid=8CU62P5S3"></script><script type=text/javascript src=https://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js></script><script type=text/javascript src=https://blockchain.info/Resources/js/pay-now-button.js></script><link rel=preload href=../../lib/font-awesome/webfonts/fa-brands-400.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=../../lib/font-awesome/webfonts/fa-regular-400.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=../../lib/font-awesome/webfonts/fa-solid-900.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=../../lib/JetBrainsMono/web/woff2/JetBrainsMono-Regular.woff2 as=font type=font/woff2 crossorigin=anonymous><script type=text/javascript src=https://latest.cactus.chat/cactus.js></script><link rel=stylesheet href=https://latest.cactus.chat/style.css type=text/css><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><title>How to create a watchdog in Python to look for filesystem changes | The Python Corner</title><link rel=canonical href=https://mastro35.github.io/tpc/posts/2019-01-13-how-to-create-a-watchdog-in-python-to-look-for-filesystem-changes/><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="all,follow"><meta name=googlebot content="index,follow,snippet,archive"><meta property="og:title" content="How to create a watchdog in Python to look for filesystem changes"><meta property="og:description" content="Hey guys, today&rsquo;s post is about how to create a watchdog in Python. But what is a &ldquo;watchdog&rdquo;?
A watchdog is a little piece of software that monitors our filesystem looking for any changes (like the creation, change or deletion of a file or of a directory). When a change occurs, the watchdog report it to us raising a specific event that we can handle.
For example, let&rsquo;s suppose you have developed a program that use a configuration file."><meta property="og:type" content="article"><meta property="og:url" content="https://mastro35.github.io/tpc/posts/2019-01-13-how-to-create-a-watchdog-in-python-to-look-for-filesystem-changes/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2019-01-13T19:08:55+01:00"><meta property="article:modified_time" content="2019-01-13T19:08:55+01:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="How to create a watchdog in Python to look for filesystem changes"><meta name=twitter:description content="Hey guys, today&rsquo;s post is about how to create a watchdog in Python. But what is a &ldquo;watchdog&rdquo;?
A watchdog is a little piece of software that monitors our filesystem looking for any changes (like the creation, change or deletion of a file or of a directory). When a change occurs, the watchdog report it to us raising a specific event that we can handle.
For example, let&rsquo;s suppose you have developed a program that use a configuration file."><link rel=stylesheet href=https://mastro35.github.io/tpc/css/styles.c05d68261bf086a9d7713c4f8a6215a3601608e267a816a7ee58f139b3d1aae51222aae2081c8e0c6bd35e1334773b7a16283022f31f92afd93bb37e5e822e66.css integrity="sha512-wF1oJhvwhqnXcTxPimIVo2AWCOJnqBan7ljxObPRquUSIqriCByODGvTXhM0dzt6FigwIvMfkq/ZO7N+XoIuZg=="><!--[if lt IE 9]><script src=https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js></script><script src=https://oss.maxcdn.com/respond/1.4.2/respond.min.js></script><![endif]--><link rel=icon type=image/png href=https://mastro35.github.io/tpc/images/favicon.ico><script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga('create','UA-120027408-1','auto'),ga('send','pageview'))</script><script async src=https://www.google-analytics.com/analytics.js></script></head><body class="max-width mx-auto px3 ltr"><div class="content index py4"><div id=header-post><a id=menu-icon href=#><i class="fas fa-bars fa-lg"></i></a>
<a id=menu-icon-tablet href=#><i class="fas fa-bars fa-lg"></i></a>
<a id=top-icon-tablet href=# onclick="$('html, body').animate({scrollTop:0},'fast')" style=display:none aria-label="Top of Page"><i class="fas fa-chevron-up fa-lg"></i></a>
<span id=menu><span id=nav><ul><li><a href=../../>Home</a></li><li><a href=../../posts>Articles</a></li><li><a href=../../tags>Tags</a></li><li><a href=../../about>About</a></li><li><a href=../../help_us>Help Us</a></li><li><a href=https://buttondown.email/thepythoncorner>Newsletter</a></li><li><a href=https://shop.spreadshirt.com/the-python-corner>Swag Store</a></li></ul></span><br><span id=actions><ul><li><a class=icon href=https://mastro35.github.io/tpc/posts/2018-08-01-how-to-create-a-windows-service-in-python/ aria-label=Previous><i class="fas fa-chevron-left" aria-hidden=true onmouseover="$('#i-prev').toggle()" onmouseout="$('#i-prev').toggle()"></i></a></li><li><a class=icon href=https://mastro35.github.io/tpc/posts/2019-10-22-the-detailed-guide-on-sending-emails-from-your-python-app/ aria-label=Next><i class="fas fa-chevron-right" aria-hidden=true onmouseover="$('#i-next').toggle()" onmouseout="$('#i-next').toggle()"></i></a></li><li><a class=icon href=# onclick="$('html, body').animate({scrollTop:0},'fast')" aria-label="Top of Page"><i class="fas fa-chevron-up" aria-hidden=true onmouseover="$('#i-top').toggle()" onmouseout="$('#i-top').toggle()"></i></a></li><li><a class=icon href=# aria-label=Share><i class="fas fa-share-alt" aria-hidden=true onmouseover="$('#i-share').toggle()" onmouseout="$('#i-share').toggle()" onclick="return $('#share').toggle(),!1"></i></a></li></ul><span id=i-prev class=info style=display:none>Previous post</span>
<span id=i-next class=info style=display:none>Next post</span>
<span id=i-top class=info style=display:none>Back to top</span>
<span id=i-share class=info style=display:none>Share post</span></span><br><div id=share style=display:none><ul><li><a class=icon href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fmastro35.github.io%2ftpc%2fposts%2f2019-01-13-how-to-create-a-watchdog-in-python-to-look-for-filesystem-changes%2f" aria-label=Facebook><i class="fab fa-facebook" aria-hidden=true></i></a></li><li><a class=icon href="https://twitter.com/share?url=https%3a%2f%2fmastro35.github.io%2ftpc%2fposts%2f2019-01-13-how-to-create-a-watchdog-in-python-to-look-for-filesystem-changes%2f&text=How%20to%20create%20a%20watchdog%20in%20Python%20to%20look%20for%20filesystem%20changes" aria-label=Twitter><i class="fab fa-twitter" aria-hidden=true></i></a></li><li><a class=icon href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2fmastro35.github.io%2ftpc%2fposts%2f2019-01-13-how-to-create-a-watchdog-in-python-to-look-for-filesystem-changes%2f&title=How%20to%20create%20a%20watchdog%20in%20Python%20to%20look%20for%20filesystem%20changes" aria-label=Linkedin><i class="fab fa-linkedin" aria-hidden=true></i></a></li><li><a class=icon href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2fmastro35.github.io%2ftpc%2fposts%2f2019-01-13-how-to-create-a-watchdog-in-python-to-look-for-filesystem-changes%2f&is_video=false&description=How%20to%20create%20a%20watchdog%20in%20Python%20to%20look%20for%20filesystem%20changes" aria-label=Pinterest><i class="fab fa-pinterest" aria-hidden=true></i></a></li><li><a class=icon href="mailto:?subject=How%20to%20create%20a%20watchdog%20in%20Python%20to%20look%20for%20filesystem%20changes&body=Check out this article: https%3a%2f%2fmastro35.github.io%2ftpc%2fposts%2f2019-01-13-how-to-create-a-watchdog-in-python-to-look-for-filesystem-changes%2f" aria-label=Email><i class="fas fa-envelope" aria-hidden=true></i></a></li><li><a class=icon href="https://getpocket.com/save?url=https%3a%2f%2fmastro35.github.io%2ftpc%2fposts%2f2019-01-13-how-to-create-a-watchdog-in-python-to-look-for-filesystem-changes%2f&title=How%20to%20create%20a%20watchdog%20in%20Python%20to%20look%20for%20filesystem%20changes" aria-label=Pocket><i class="fab fa-get-pocket" aria-hidden=true></i></a></li><li><a class=icon href="http://reddit.com/submit?url=https%3a%2f%2fmastro35.github.io%2ftpc%2fposts%2f2019-01-13-how-to-create-a-watchdog-in-python-to-look-for-filesystem-changes%2f&title=How%20to%20create%20a%20watchdog%20in%20Python%20to%20look%20for%20filesystem%20changes" aria-label=reddit><i class="fab fa-reddit" aria-hidden=true></i></a></li><li><a class=icon href="http://www.tumblr.com/share/link?url=https%3a%2f%2fmastro35.github.io%2ftpc%2fposts%2f2019-01-13-how-to-create-a-watchdog-in-python-to-look-for-filesystem-changes%2f&name=How%20to%20create%20a%20watchdog%20in%20Python%20to%20look%20for%20filesystem%20changes&description=Hey%20guys%2c%20today%26rsquo%3bs%20post%20is%20about%20how%20to%20create%20a%20watchdog%20in%20Python.%20But%20what%20is%20a%20%26ldquo%3bwatchdog%26rdquo%3b%3f%0aA%20watchdog%20is%20a%20little%20piece%20of%20software%20that%20monitors%20our%20filesystem%20looking%20for%20any%20changes%20%28like%20the%20creation%2c%20change%20or%20deletion%20of%20a%20file%20or%20of%20a%20directory%29.%20When%20a%20change%20occurs%2c%20the%20watchdog%20report%20it%20to%20us%20raising%20a%20specific%20event%20that%20we%20can%20handle.%0aFor%20example%2c%20let%26rsquo%3bs%20suppose%20you%20have%20developed%20a%20program%20that%20use%20a%20configuration%20file." aria-label=Tumblr><i class="fab fa-tumblr" aria-hidden=true></i></a></li><li><a class=icon href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fmastro35.github.io%2ftpc%2fposts%2f2019-01-13-how-to-create-a-watchdog-in-python-to-look-for-filesystem-changes%2f&t=How%20to%20create%20a%20watchdog%20in%20Python%20to%20look%20for%20filesystem%20changes" aria-label="Hacker News"><i class="fab fa-hacker-news" aria-hidden=true></i></a></li></ul></div><div id=toc><nav id=TableOfContents><ul><li><a href=#step-1-import-some-stuff>Step 1. Import some stuff</a></li><li><a href=#step-2-create-the-event-handler>Step 2. Create the event handler</a></li><li><a href=#step-3-handle-all-the-events>Step 3. Handle all the events</a></li><li><a href=#step-4-create-an-observer>Step 4. Create an observer</a></li><li><a href=#step-5-start-the-observer>Step 5. Start the observer</a></li><li><a href=#testing-our-new-shiny-watchdog>Testing our new shiny watchdog</a></li><li><a href=#the-bottom-line>The bottom line</a></li></ul></nav></div></span></div><article class=post itemscope itemtype=http://schema.org/BlogPosting><header><h1 class=posttitle itemprop="name headline">How to create a watchdog in Python to look for filesystem changes</h1><div class=meta><div class=postdate><time datetime="2019-01-13 19:08:55 +0100 +0100" itemprop=datePublished>2019-01-13</time></div><div class=article-read-time><i class="far fa-clock"></i>
5 minute read</div><div class=article-category><i class="fas fa-archive"></i>
<a class=category-link href=../../categories/dev>Dev</a></div><div class=article-tag><i class="fas fa-tag"></i>
<a class=tag-link href=../../tags/check rel=tag>check</a>
,
<a class=tag-link href=../../tags/filesystem rel=tag>Filesystem</a>
,
<a class=tag-link href=../../tags/python rel=tag>Python</a>
,
<a class=tag-link href=../../tags/watchdog rel=tag>watchdog</a></div></div></header><div class=content itemprop=articleBody><p><img src=https://imgs.xkcd.com/comics/vet.png alt=teaser></p><p>Hey guys, today&rsquo;s post is about how to create a watchdog in Python. But what is a &ldquo;watchdog&rdquo;?<br>A watchdog is a little piece of software that monitors our filesystem looking for any changes (like the creation, change or deletion of a file or of a directory). When a change occurs, the watchdog report it to us raising a specific event that we can handle.<br>For example, let&rsquo;s suppose you have developed a program that use a configuration file. Your program could set a watchdog to monitor that file and if the configuration file is modified you could think to reload it and apply the new configuration at runtime, without the need of restarting your program.<br>That&rsquo;s cool, uh?<br>So, today we will code a watchdog in Python.<br>To code this program we will need an additional module called &ldquo;watchdog&rdquo; (wow, who could have guessed it?) written by <a href=yesudeep@gmail.com>Yesudeep Mangalapilly</a>, so let&rsquo;s start by installing it. As always, I raccomand to use virtual environments instead of installing packages system wide. If you want to find out more about virtual environments (that&rsquo;s probabilly because you haven&rsquo;t read all my previous post, so shame on you!), just have a look at this article.<br>Now, create your virtual environment (optional but raccomended&mldr; at least by me), activate it and install the package watchdog with the following command:</p><pre><code class=language-console data-lang=console>pip install watchdog
</code></pre><p>Done, we have almost finished, haven&rsquo;t we?<br>I mean, we still need to code the program that will actually use this module, but trust me, that will be really easy!</p><p>Ok, let&rsquo;s start and pretend that we want to create a program that logs all the file that are created or modified in the same directory of our program.</p><h2 id=step-1-import-some-stuff>Step 1. Import some stuff</h2><div class=highlight><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span style=color:#ff79c6>import</span> time
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span style=color:#ff79c6>from</span> watchdog.observers <span style=color:#ff79c6>import</span> Observer
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span style=color:#ff79c6>from</span> watchdog.events <span style=color:#ff79c6>import</span> PatternMatchingEventHandler
</code></pre></div><p>I won&rsquo;t explain these imports right now, they will be clear in a moment.</p><h2 id=step-2-create-the-event-handler>Step 2. Create the event handler</h2><p>The event handler is the object that will be notified when something happen on the filesystem you are monitoring.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span style=color:#ff79c6>if</span> __name__ <span style=color:#ff79c6>==</span> <span style=color:#f1fa8c>&#34;__main__&#34;</span>:
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span>    patterns <span style=color:#ff79c6>=</span> [<span style=color:#f1fa8c>&#34;*&#34;</span>]
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span>    ignore_patterns <span style=color:#ff79c6>=</span> <span style=color:#ff79c6>None</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span>    ignore_directories <span style=color:#ff79c6>=</span> <span style=color:#ff79c6>False</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">5</span>    case_sensitive <span style=color:#ff79c6>=</span> <span style=color:#ff79c6>True</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">6</span>    my_event_handler <span style=color:#ff79c6>=</span> PatternMatchingEventHandler(patterns, ignore_patterns, ignore_directories, case_sensitive)
</code></pre></div><p>In my example I have used some variables just to made the configuration of the event handler a little bit easier to be undestood.<br>The &ldquo;patterns&rdquo; variable contains the file patterns we want to handle (in my scenario, I will handle all the files), the &ldquo;ignore_patterns&rdquo; variable contains the patterns that we don&rsquo;t want to handle, the &ldquo;ignore_directories&rdquo; is just a boolean that we can set to True if we want to be notified just for regular files (not for directories) and the &ldquo;case_sensitive&rdquo; variable is just another boolean that, if set to &ldquo;True&rdquo;, made the patterns we previously introduced &ldquo;case sensitive&rdquo; (that&rsquo;s normally a good idea, unless you are working with stupid case-insensitive-file-systems&mldr; yeah, I&rsquo;m talking about you Windows! :P ).</p><h2 id=step-3-handle-all-the-events>Step 3. Handle all the events</h2><p>Now that we have created the handler we need to write the code we want to run when the events are raised.<br>So, let&rsquo;s start creating four different functions that will be used when a file is modified, created, deleted or moved.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span style=color:#ff79c6>def</span> <span style=color:#50fa7b>on_created</span>(event):
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span>    <span style=color:#8be9fd;font-style:italic>print</span>(<span style=color:#f1fa8c>f</span><span style=color:#f1fa8c>&#34;hey, </span><span style=color:#f1fa8c>{</span>event<span style=color:#ff79c6>.</span>src_path<span style=color:#f1fa8c>}</span><span style=color:#f1fa8c> has been created!&#34;</span>)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span><span style=color:#ff79c6>def</span> <span style=color:#50fa7b>on_deleted</span>(event):
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span>    <span style=color:#8be9fd;font-style:italic>print</span>(<span style=color:#f1fa8c>f</span><span style=color:#f1fa8c>&#34;what the f**k! Someone deleted </span><span style=color:#f1fa8c>{</span>event<span style=color:#ff79c6>.</span>src_path<span style=color:#f1fa8c>}</span><span style=color:#f1fa8c>!&#34;</span>)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span><span style=color:#ff79c6>def</span> <span style=color:#50fa7b>on_modified</span>(event):
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span>    <span style=color:#8be9fd;font-style:italic>print</span>(<span style=color:#f1fa8c>f</span><span style=color:#f1fa8c>&#34;hey buddy, </span><span style=color:#f1fa8c>{</span>event<span style=color:#ff79c6>.</span>src_path<span style=color:#f1fa8c>}</span><span style=color:#f1fa8c> has been modified&#34;</span>)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span><span style=color:#ff79c6>def</span> <span style=color:#50fa7b>on_moved</span>(event):
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span>    <span style=color:#8be9fd;font-style:italic>print</span>(<span style=color:#f1fa8c>f</span><span style=color:#f1fa8c>&#34;ok ok ok, someone moved </span><span style=color:#f1fa8c>{</span>event<span style=color:#ff79c6>.</span>src_path<span style=color:#f1fa8c>}</span><span style=color:#f1fa8c> to </span><span style=color:#f1fa8c>{</span>event<span style=color:#ff79c6>.</span>dest_path<span style=color:#f1fa8c>}</span><span style=color:#f1fa8c>&#34;</span>)
</code></pre></div><p>In our example we will just print out something regarding the events that has been captured.<br>It goes without saying that this is just an example, we could execute any kind of code instead of these useless print functions&mldr;</p><p>And now, under the creation of our event handler (the code of the previous step) we need to specify to the handler that we want these functions to be called when the corresponding event is raised</p><div class=highlight><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span>my_event_handler<span style=color:#ff79c6>.</span>on_created <span style=color:#ff79c6>=</span> on_created
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span>    my_event_handler<span style=color:#ff79c6>.</span>on_deleted <span style=color:#ff79c6>=</span> on_deleted
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span>    my_event_handler<span style=color:#ff79c6>.</span>on_modified <span style=color:#ff79c6>=</span> on_modified
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span>    my_event_handler<span style=color:#ff79c6>.</span>on_moved <span style=color:#ff79c6>=</span> on_moved
</code></pre></div><h2 id=step-4-create-an-observer>Step 4. Create an observer</h2><p>We need another object, known as the observer, that will monitor our filesystem, looking for changes that will be handled by the event handler.</p><p>Let&rsquo;s create it right now.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span>    path <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#34;.&#34;</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span>    go_recursively <span style=color:#ff79c6>=</span> <span style=color:#ff79c6>True</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span>    my_observer <span style=color:#ff79c6>=</span> Observer()
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span>    my_observer<span style=color:#ff79c6>.</span>schedule(my_event_handler, path, recursive<span style=color:#ff79c6>=</span>go_recursively)
</code></pre></div><p>As you can see, I have just created an object of the Observer class and then called the schedule method, passing to it:</p><ul><li>the event handler that will handle the event</li><li>the path to be monitored (in my case is &ldquo;.&rdquo;, that&rsquo;s the current directory)</li><li>a boolean that allow me to catch all the event that occurs even in the sub directories of my current directory.</li></ul><h2 id=step-5-start-the-observer>Step 5. Start the observer</h2><p>Ok, we almost finished our program, now we need just to start the observer thread.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span>    my_observer<span style=color:#ff79c6>.</span>start()
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span>    <span style=color:#ff79c6>try</span>:
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span>        <span style=color:#ff79c6>while</span> <span style=color:#ff79c6>True</span>:
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span>            time<span style=color:#ff79c6>.</span>sleep(<span style=color:#bd93f9>1</span>)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">5</span>    <span style=color:#ff79c6>except</span> KeyboardInterrupt:
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">6</span>        my_observer<span style=color:#ff79c6>.</span>stop()
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">7</span>        my_observer<span style=color:#ff79c6>.</span>join()
</code></pre></div><p>I think this snippet doesn&rsquo;t need any comments, does it? We are just starting the observer thread to get all the events.</p><p>Ok, if everything is correct the result should be the one you can see below.</p><h2 id=testing-our-new-shiny-watchdog>Testing our new shiny watchdog</h2><p>And now it&rsquo;s showtime guys, let&rsquo;s test our watchdog!</p><p>Start the program from a terminal and you will see your cursor just hang. That&rsquo;s a good start.</p><p>Now open a different terminal, move under the directory of your program and try to do something. For example, I have started vim (my favourite editor) to create a file:</p><pre><code class=language-console data-lang=console>$ vim dave.txt
</code></pre><p>by the time vim started, in my running console some statement has been printed:</p><pre><code class=language-console data-lang=console>hey, ./.dave.txt.swp has been created!
hey buddy, . has been modified
</code></pre><p>Wow, it works! When you try to create a file with Vim it start by creating a .swp file and that&rsquo;s what our program has detected, printing the first line. But why the second line? Well, if the current directory has a new file we can say that it&rsquo;s changed as well, can&rsquo;t we?</p><p>Now I will try to save my file and&mldr;</p><pre><code class=language-console data-lang=console>hey, ./dave.txt has been created!
hey buddy, . has been modified
</code></pre><p>Ok, Vim has created my file (dave.txt) and my program has detected it! Well done!</p><p>Now I quit vim (for the record and for all the &ldquo;Windows guys&rdquo; that are currently reading this&mldr; you don&rsquo;t need to unplug the power cord of your pc to quit vim, it&rsquo;s enough to press the [esc] key and to type :q )</p><pre><code class=language-console data-lang=console>what the f**k! Someone deleted ./.dave.txt.swp!
hey buddy, . has been modified
</code></pre><p>Ok, vim has deleted the temporary .swp file and the program has detected it. Mission accomplished! :)</p><h2 id=the-bottom-line>The bottom line</h2><p>In this article you have seen how easy it could be to set up a <a href=https://pypi.org/project/watchdog/>watchdog</a> in Python that monitors a filesystem and react when a change occurs.</p><p>If you want to find out more about the watchdog module, you can have a look at the <a href=https://pythonhosted.org/watchdog/>official documentation</a>.</p><p>Happy Coding!
D.</p></div></article><hr><h2 style=color:#2bbc8a;text-align:center>Did you find this article helpful?</h2><br><style>.bmc-button img{height:34px!important;width:35px!important;margin-bottom:1px!important;box-shadow:none!important;border:none!important;vertical-align:middle!important}.bmc-button{padding:7px 10px!important;line-height:35px!important;height:51px!important;min-width:217px!important;text-decoration:none!important;display:inline-flex!important;color:#fff!important;background-color:#ff813f!important;border-radius:5px!important;border:1px solid transparent!important;padding:7px 10px!important;font-size:22px!important;letter-spacing:.6px!important;box-shadow:0 1px 2px rgba(190,190,190,.5)!important;-webkit-box-shadow:0 1px 2px 2px rgba(190,190,190,.5)!important;margin:0 auto!important;font-family:cookie,cursive!important;-webkit-box-sizing:border-box!important;box-sizing:border-box!important;-o-transition:.3s all linear!important;-webkit-transition:.3s all linear!important;-moz-transition:.3s all linear!important;-ms-transition:.3s all linear!important;transition:.3s all linear!important}.bmc-button:hover,.bmc-button:active,.bmc-button:focus{-webkit-box-shadow:0 1px 2px 2px rgba(190,190,190,.5)!important;text-decoration:none!important;box-shadow:0 1px 2px 2px rgba(190,190,190,.5)!important;opacity:.85!important;color:#fff!important}</style><link href="https://fonts.googleapis.com/css?family=Cookie" rel=stylesheet><a class=bmc-button target=_blank href=https://www.buymeacoffee.com/dXjDHmt style=align:left><img src=https://cdn.buymeacoffee.com/buttons/bmc-new-btn-logo.svg alt="Buy me a coffee!" align=left>
<span style=margin-left:15px;font-size:28px!important>Buy me a coffee!</span></a><hr><div class=blog-post-comments><div id=disquss_thread><script src=https://utteranc.es/client.js repo=mastro35/tpc issue-term=pathname label="The Python Corner" theme=github-dark crossorigin=anonymous async></script></div></div><div id=footer-post-container><div id=footer-post><div id=nav-footer style=display:none><ul><li><a href=../../>Home</a></li><li><a href=../../posts>Articles</a></li><li><a href=../../tags>Tags</a></li><li><a href=../../about>About</a></li><li><a href=../../help_us>Help Us</a></li><li><a href=https://buttondown.email/thepythoncorner>Newsletter</a></li><li><a href=https://shop.spreadshirt.com/the-python-corner>Swag Store</a></li></ul></div><div id=toc-footer style=display:none><nav id=TableOfContents><ul><li><a href=#step-1-import-some-stuff>Step 1. Import some stuff</a></li><li><a href=#step-2-create-the-event-handler>Step 2. Create the event handler</a></li><li><a href=#step-3-handle-all-the-events>Step 3. Handle all the events</a></li><li><a href=#step-4-create-an-observer>Step 4. Create an observer</a></li><li><a href=#step-5-start-the-observer>Step 5. Start the observer</a></li><li><a href=#testing-our-new-shiny-watchdog>Testing our new shiny watchdog</a></li><li><a href=#the-bottom-line>The bottom line</a></li></ul></nav></div><div id=share-footer style=display:none><ul><li><a class=icon href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fmastro35.github.io%2ftpc%2fposts%2f2019-01-13-how-to-create-a-watchdog-in-python-to-look-for-filesystem-changes%2f" aria-label=Facebook><i class="fab fa-facebook fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://twitter.com/share?url=https%3a%2f%2fmastro35.github.io%2ftpc%2fposts%2f2019-01-13-how-to-create-a-watchdog-in-python-to-look-for-filesystem-changes%2f&text=How%20to%20create%20a%20watchdog%20in%20Python%20to%20look%20for%20filesystem%20changes" aria-label=Twitter><i class="fab fa-twitter fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2fmastro35.github.io%2ftpc%2fposts%2f2019-01-13-how-to-create-a-watchdog-in-python-to-look-for-filesystem-changes%2f&title=How%20to%20create%20a%20watchdog%20in%20Python%20to%20look%20for%20filesystem%20changes" aria-label=Linkedin><i class="fab fa-linkedin fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2fmastro35.github.io%2ftpc%2fposts%2f2019-01-13-how-to-create-a-watchdog-in-python-to-look-for-filesystem-changes%2f&is_video=false&description=How%20to%20create%20a%20watchdog%20in%20Python%20to%20look%20for%20filesystem%20changes" aria-label=Pinterest><i class="fab fa-pinterest fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="mailto:?subject=How%20to%20create%20a%20watchdog%20in%20Python%20to%20look%20for%20filesystem%20changes&body=Check out this article: https%3a%2f%2fmastro35.github.io%2ftpc%2fposts%2f2019-01-13-how-to-create-a-watchdog-in-python-to-look-for-filesystem-changes%2f" aria-label=Email><i class="fas fa-envelope fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://getpocket.com/save?url=https%3a%2f%2fmastro35.github.io%2ftpc%2fposts%2f2019-01-13-how-to-create-a-watchdog-in-python-to-look-for-filesystem-changes%2f&title=How%20to%20create%20a%20watchdog%20in%20Python%20to%20look%20for%20filesystem%20changes" aria-label=Pocket><i class="fab fa-get-pocket fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://reddit.com/submit?url=https%3a%2f%2fmastro35.github.io%2ftpc%2fposts%2f2019-01-13-how-to-create-a-watchdog-in-python-to-look-for-filesystem-changes%2f&title=How%20to%20create%20a%20watchdog%20in%20Python%20to%20look%20for%20filesystem%20changes" aria-label=reddit><i class="fab fa-reddit fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://www.tumblr.com/share/link?url=https%3a%2f%2fmastro35.github.io%2ftpc%2fposts%2f2019-01-13-how-to-create-a-watchdog-in-python-to-look-for-filesystem-changes%2f&name=How%20to%20create%20a%20watchdog%20in%20Python%20to%20look%20for%20filesystem%20changes&description=Hey%20guys%2c%20today%26rsquo%3bs%20post%20is%20about%20how%20to%20create%20a%20watchdog%20in%20Python.%20But%20what%20is%20a%20%26ldquo%3bwatchdog%26rdquo%3b%3f%0aA%20watchdog%20is%20a%20little%20piece%20of%20software%20that%20monitors%20our%20filesystem%20looking%20for%20any%20changes%20%28like%20the%20creation%2c%20change%20or%20deletion%20of%20a%20file%20or%20of%20a%20directory%29.%20When%20a%20change%20occurs%2c%20the%20watchdog%20report%20it%20to%20us%20raising%20a%20specific%20event%20that%20we%20can%20handle.%0aFor%20example%2c%20let%26rsquo%3bs%20suppose%20you%20have%20developed%20a%20program%20that%20use%20a%20configuration%20file." aria-label=Tumblr><i class="fab fa-tumblr fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fmastro35.github.io%2ftpc%2fposts%2f2019-01-13-how-to-create-a-watchdog-in-python-to-look-for-filesystem-changes%2f&t=How%20to%20create%20a%20watchdog%20in%20Python%20to%20look%20for%20filesystem%20changes" aria-label="Hacker News"><i class="fab fa-hacker-news fa-lg" aria-hidden=true></i></a></li></ul></div><div id=actions-footer><a id=menu-toggle class=icon href=# onclick="return $('#nav-footer').toggle(),!1" aria-label=Menu><i class="fas fa-bars fa-lg" aria-hidden=true></i> Menu</a>
<a id=toc-toggle class=icon href=# onclick="return $('#toc-footer').toggle(),!1" aria-label=TOC><i class="fas fa-list fa-lg" aria-hidden=true></i> TOC</a>
<a id=share-toggle class=icon href=# onclick="return $('#share-footer').toggle(),!1" aria-label=Share><i class="fas fa-share-alt fa-lg" aria-hidden=true></i> share</a>
<a id=top style=display:none class=icon href=# onclick="$('html, body').animate({scrollTop:0},'fast')" aria-label="Top of Page"><i class="fas fa-chevron-up fa-lg" aria-hidden=true></i> Top</a></div></div></div><footer id=footer><div class=footer-left>Copyright &copy; 2021 Davide Mastromatteo</div><div class=footer-right><nav><ul><li><a href=../../>Home</a></li><li><a href=../../posts>Articles</a></li><li><a href=../../tags>Tags</a></li><li><a href=../../about>About</a></li><li><a href=../../help_us>Help Us</a></li><li><a href=https://buttondown.email/thepythoncorner>Newsletter</a></li><li><a href=https://shop.spreadshirt.com/the-python-corner>Swag Store</a></li></ul></nav></div></footer></div></body><link rel=stylesheet href=../../lib/font-awesome/css/all.min.css><script src=../../lib/jquery/jquery.min.js></script><script src=../../js/main.js></script><script src=../../js/code-copy.js></script></html>
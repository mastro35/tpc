<!doctype html><html lang=en-us><head><script data-ad-client=ca-pub-1030730506660314 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script><script id=mNCC language=javascript>medianet_width="728",medianet_height="90",medianet_crid="167545135",medianet_versionId="3111299"</script><script src="//contextual.media.net/nmedianet.js?cid=8CU62P5S3"></script><script type=text/javascript src=https://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js></script><script type=text/javascript src=https://blockchain.info/Resources/js/pay-now-button.js></script><link rel=preload href=../../lib/font-awesome/webfonts/fa-brands-400.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=../../lib/font-awesome/webfonts/fa-regular-400.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=../../lib/font-awesome/webfonts/fa-solid-900.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=../../lib/JetBrainsMono/web/woff2/JetBrainsMono-Regular.woff2 as=font type=font/woff2 crossorigin=anonymous><script type=text/javascript src=https://latest.cactus.chat/cactus.js></script><link rel=stylesheet href=https://latest.cactus.chat/style.css type=text/css><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><title>When To Use Generators in Python | The Python Corner</title><link rel=canonical href=https://mastro35.github.io/tpc/posts/2018-04-17-generators-in-python-should-i-use-them/><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="all,follow"><meta name=googlebot content="index,follow,snippet,archive"><meta property="og:title" content="When To Use Generators in Python"><meta property="og:description" content="Following a request of a reader, today we&rsquo;re going to discuss when to use iterators and generators in Python.
First of all, it&rsquo;s important to know what iterators and generators are, so if you don&rsquo;t know exactly what they are, I suggest to have a look at my previous article on this topic.
Now that everything is clear, we can start analyzing when to use these features.
 Let&rsquo;s start saying that if you have read my previous article, the use of the iterator protocol should be quite clear: you use iterator protocol when you have a custom object that you want to be &ldquo;iterable&rdquo;."><meta property="og:type" content="article"><meta property="og:url" content="https://mastro35.github.io/tpc/posts/2018-04-17-generators-in-python-should-i-use-them/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2018-04-17T11:46:00+02:00"><meta property="article:modified_time" content="2018-04-17T11:46:00+02:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="When To Use Generators in Python"><meta name=twitter:description content="Following a request of a reader, today we&rsquo;re going to discuss when to use iterators and generators in Python.
First of all, it&rsquo;s important to know what iterators and generators are, so if you don&rsquo;t know exactly what they are, I suggest to have a look at my previous article on this topic.
Now that everything is clear, we can start analyzing when to use these features.
 Let&rsquo;s start saying that if you have read my previous article, the use of the iterator protocol should be quite clear: you use iterator protocol when you have a custom object that you want to be &ldquo;iterable&rdquo;."><link rel=stylesheet href=https://mastro35.github.io/tpc/css/styles.c05d68261bf086a9d7713c4f8a6215a3601608e267a816a7ee58f139b3d1aae51222aae2081c8e0c6bd35e1334773b7a16283022f31f92afd93bb37e5e822e66.css integrity="sha512-wF1oJhvwhqnXcTxPimIVo2AWCOJnqBan7ljxObPRquUSIqriCByODGvTXhM0dzt6FigwIvMfkq/ZO7N+XoIuZg=="><!--[if lt IE 9]><script src=https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js></script><script src=https://oss.maxcdn.com/respond/1.4.2/respond.min.js></script><![endif]--><link rel=icon type=image/png href=https://mastro35.github.io/tpc/images/favicon.ico><script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga('create','UA-120027408-1','auto'),ga('send','pageview'))</script><script async src=https://www.google-analytics.com/analytics.js></script></head><body class="max-width mx-auto px3 ltr"><div class="content index py4"><div id=header-post><a id=menu-icon href=#><i class="fas fa-bars fa-lg"></i></a>
<a id=menu-icon-tablet href=#><i class="fas fa-bars fa-lg"></i></a>
<a id=top-icon-tablet href=# onclick="$('html, body').animate({scrollTop:0},'fast')" style=display:none aria-label="Top of Page"><i class="fas fa-chevron-up fa-lg"></i></a>
<span id=menu><span id=nav><ul><li><a href=../../>Home</a></li><li><a href=../../posts>Articles</a></li><li><a href=../../tags>Tags</a></li><li><a href=../../about>About</a></li><li><a href=../../help_us>Help Us</a></li><li><a href=https://buttondown.email/thepythoncorner>Newsletter</a></li><li><a href=https://shop.spreadshirt.com/the-python-corner>Swag Store</a></li></ul></span><br><span id=actions><ul><li><a class=icon href=https://mastro35.github.io/tpc/posts/2017-12-13-lambdas-and-functions-in-python/ aria-label=Previous><i class="fas fa-chevron-left" aria-hidden=true onmouseover="$('#i-prev').toggle()" onmouseout="$('#i-prev').toggle()"></i></a></li><li><a class=icon href=https://mastro35.github.io/tpc/posts/2018-04-26-how-to-make-your-code-faster-by-using-a-cache-in-python/ aria-label=Next><i class="fas fa-chevron-right" aria-hidden=true onmouseover="$('#i-next').toggle()" onmouseout="$('#i-next').toggle()"></i></a></li><li><a class=icon href=# onclick="$('html, body').animate({scrollTop:0},'fast')" aria-label="Top of Page"><i class="fas fa-chevron-up" aria-hidden=true onmouseover="$('#i-top').toggle()" onmouseout="$('#i-top').toggle()"></i></a></li><li><a class=icon href=# aria-label=Share><i class="fas fa-share-alt" aria-hidden=true onmouseover="$('#i-share').toggle()" onmouseout="$('#i-share').toggle()" onclick="return $('#share').toggle(),!1"></i></a></li></ul><span id=i-prev class=info style=display:none>Previous post</span>
<span id=i-next class=info style=display:none>Next post</span>
<span id=i-top class=info style=display:none>Back to top</span>
<span id=i-share class=info style=display:none>Share post</span></span><br><div id=share style=display:none><ul><li><a class=icon href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fmastro35.github.io%2ftpc%2fposts%2f2018-04-17-generators-in-python-should-i-use-them%2f" aria-label=Facebook><i class="fab fa-facebook" aria-hidden=true></i></a></li><li><a class=icon href="https://twitter.com/share?url=https%3a%2f%2fmastro35.github.io%2ftpc%2fposts%2f2018-04-17-generators-in-python-should-i-use-them%2f&text=When%20To%20Use%20Generators%20in%20Python" aria-label=Twitter><i class="fab fa-twitter" aria-hidden=true></i></a></li><li><a class=icon href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2fmastro35.github.io%2ftpc%2fposts%2f2018-04-17-generators-in-python-should-i-use-them%2f&title=When%20To%20Use%20Generators%20in%20Python" aria-label=Linkedin><i class="fab fa-linkedin" aria-hidden=true></i></a></li><li><a class=icon href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2fmastro35.github.io%2ftpc%2fposts%2f2018-04-17-generators-in-python-should-i-use-them%2f&is_video=false&description=When%20To%20Use%20Generators%20in%20Python" aria-label=Pinterest><i class="fab fa-pinterest" aria-hidden=true></i></a></li><li><a class=icon href="mailto:?subject=When%20To%20Use%20Generators%20in%20Python&body=Check out this article: https%3a%2f%2fmastro35.github.io%2ftpc%2fposts%2f2018-04-17-generators-in-python-should-i-use-them%2f" aria-label=Email><i class="fas fa-envelope" aria-hidden=true></i></a></li><li><a class=icon href="https://getpocket.com/save?url=https%3a%2f%2fmastro35.github.io%2ftpc%2fposts%2f2018-04-17-generators-in-python-should-i-use-them%2f&title=When%20To%20Use%20Generators%20in%20Python" aria-label=Pocket><i class="fab fa-get-pocket" aria-hidden=true></i></a></li><li><a class=icon href="http://reddit.com/submit?url=https%3a%2f%2fmastro35.github.io%2ftpc%2fposts%2f2018-04-17-generators-in-python-should-i-use-them%2f&title=When%20To%20Use%20Generators%20in%20Python" aria-label=reddit><i class="fab fa-reddit" aria-hidden=true></i></a></li><li><a class=icon href="http://www.tumblr.com/share/link?url=https%3a%2f%2fmastro35.github.io%2ftpc%2fposts%2f2018-04-17-generators-in-python-should-i-use-them%2f&name=When%20To%20Use%20Generators%20in%20Python&description=Following%20a%20request%20of%20a%20reader%2c%20today%20we%26rsquo%3bre%20going%20to%20discuss%20when%20to%20use%20iterators%20and%20generators%20in%20Python.%0aFirst%20of%20all%2c%20it%26rsquo%3bs%20important%20to%20know%20what%20iterators%20and%20generators%20are%2c%20so%20if%20you%20don%26rsquo%3bt%20know%20exactly%20what%20they%20are%2c%20I%20suggest%20to%20have%20a%20look%20at%20my%20previous%20article%20on%20this%20topic.%0aNow%20that%20everything%20is%20clear%2c%20we%20can%20start%20analyzing%20when%20to%20use%20these%20features.%0a%20Let%26rsquo%3bs%20start%20saying%20that%20if%20you%20have%20read%20my%20previous%20article%2c%20the%20use%20of%20the%20iterator%20protocol%20should%20be%20quite%20clear%3a%20you%20use%20iterator%20protocol%20when%20you%20have%20a%20custom%20object%20that%20you%20want%20to%20be%20%26ldquo%3biterable%26rdquo%3b." aria-label=Tumblr><i class="fab fa-tumblr" aria-hidden=true></i></a></li><li><a class=icon href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fmastro35.github.io%2ftpc%2fposts%2f2018-04-17-generators-in-python-should-i-use-them%2f&t=When%20To%20Use%20Generators%20in%20Python" aria-label="Hacker News"><i class="fab fa-hacker-news" aria-hidden=true></i></a></li></ul></div><div id=toc><nav id=TableOfContents><ul><li><a href=#do-i-need-all-the-items-of-the-returned-list>Do I need all the items of the returned list?</a></li><li><a href=#do-i-need-to-be-notified-while-the-results-of-the-list-are-generated>Do I need to be notified while the results of the list are generated?</a></li><li><a href=#is-the-memory-footprint-of-the-function-im-writing-relevant>Is the memory footprint of the function I&rsquo;m writing relevant?</a></li></ul></nav></div></span></div><article class=post itemscope itemtype=http://schema.org/BlogPosting><header><h1 class=posttitle itemprop="name headline">When To Use Generators in Python</h1><div class=meta><div class=postdate><time datetime="2018-04-17 11:46:00 +0200 +0200" itemprop=datePublished>2018-04-17</time></div><div class=author>by
Davide Mastromatteo</div><div class=article-read-time><i class="far fa-clock"></i>
6 minute read</div><div class=article-category><i class="fas fa-archive"></i>
<a class=category-link href=../../categories/dev>Dev</a></div><div class=article-tag><i class="fas fa-tag"></i>
<a class=tag-link href=../../tags/featured rel=tag>Featured</a>
,
<a class=tag-link href=../../tags/generators rel=tag>Generators</a>
,
<a class=tag-link href=../../tags/python rel=tag>Python</a></div></div></header><div class=content itemprop=articleBody><p><img src=https://imgs.xkcd.com/comics/goto.png alt=teaser></p><p>Following a request of a reader, today we&rsquo;re going to discuss when to use iterators and generators in Python.</p><p>First of all, it&rsquo;s important to know what iterators and generators are, so if you don&rsquo;t know exactly what they are, I suggest to have a look at <a href=https://www.thepythoncorner.com/2016/11/iterators-and-generators-in-python/>my previous article</a> on this topic.</p><p>Now that everything is clear, we can start analyzing when to use these features.</p><hr><p>Let&rsquo;s start saying that if you have read my previous article, the use of the iterator protocol should be quite clear: you use iterator protocol when you have a custom object that you want to be &ldquo;<em>iterable</em>&rdquo;.</p><p>That&rsquo;s it, so easy.</p><p>If you want to use your custom object in a loop with something like</p><div class=highlight><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span style=color:#ff79c6>for</span> i <span style=color:#ff79c6>in</span> my_object():
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span>    <span style=color:#6272a4># do something</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span>    <span style=color:#ff79c6>pass</span>
</code></pre></div><p>you just need to adopt the iterator protocol.
But what about generators?</p><p>When am I supposed to write a generator instead of a simple function that returns a list of objects?</p><p>Well, I have to admit that this can be a little bit tricky for a beginner&mldr; so let&rsquo;s try to answer this question pretending to be there to write a function that returns a list of objects and let&rsquo;s answer the following questions.</p><h2 id=do-i-need-all-the-items-of-the-returned-list>Do I need all the items of the returned list?</h2><p>This is the first question you should ask yourself when writing a function that returns a list of objects. If the answer is &ldquo;no&rdquo;, that probably means that a generator would be a better choice because its main feature is the &ldquo;lazy evaluation&rdquo;.</p><p>With a generator, you generate a result <strong>only when you really need it</strong>, so if you&rsquo;re not going to use all the items in the list, why bother creating them?</p><p>You will save time and resources not creating them and your users will be happier!</p><p>To make an example, have a look at this program.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span style=color:#ff79c6>import</span> time
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span style=color:#ff79c6>import</span> random
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span><span style=color:#ff79c6>def</span> <span style=color:#50fa7b>get_winning_numbers</span>():
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span>    random<span style=color:#ff79c6>.</span>seed()
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span>    elements <span style=color:#ff79c6>=</span> []
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span>    <span style=color:#ff79c6>for</span> i <span style=color:#ff79c6>in</span> <span style=color:#8be9fd;font-style:italic>range</span> (<span style=color:#bd93f9>0</span>,<span style=color:#bd93f9>10</span>):
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span>        time<span style=color:#ff79c6>.</span>sleep(<span style=color:#bd93f9>1</span>) <span style=color:#6272a4># let&#39;s simulate some kind of delay</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span>        elements<span style=color:#ff79c6>.</span>append(random<span style=color:#ff79c6>.</span>randint(<span style=color:#bd93f9>1</span>,<span style=color:#bd93f9>10</span>))
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span>    <span style=color:#ff79c6>return</span> elements
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span>random<span style=color:#ff79c6>.</span>seed()
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">14</span>my_number <span style=color:#ff79c6>=</span> random<span style=color:#ff79c6>.</span>randint(<span style=color:#bd93f9>1</span>,<span style=color:#bd93f9>10</span>)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">15</span><span style=color:#8be9fd;font-style:italic>print</span> (<span style=color:#f1fa8c>&#34;my number is &#34;</span> <span style=color:#ff79c6>+</span> <span style=color:#8be9fd;font-style:italic>str</span>(my_number))
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">16</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">17</span><span style=color:#ff79c6>for</span> winning_number <span style=color:#ff79c6>in</span> get_winning_numbers():
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">18</span>    <span style=color:#8be9fd;font-style:italic>print</span>(winning_number)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">19</span>    <span style=color:#ff79c6>if</span> my_number <span style=color:#ff79c6>==</span> winning_number:
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">20</span>        <span style=color:#8be9fd;font-style:italic>print</span> (<span style=color:#f1fa8c>&#34;you win!&#34;</span>)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">21</span>        <span style=color:#ff79c6>break</span>
</code></pre></div><p>The function &ldquo;get_winning_numbers&rdquo; is a time-consuming function that generates 10 random &ldquo;winning numbers&rdquo; (to simulate the &ldquo;time-consuming function&rdquo; we have added a delay of a second for every number generated).</p><p>The winning numbers are then checked against &ldquo;my_number&rdquo;; if my_number is in these 10 numbers, the player wins and the execution ends.</p><p>Made in this way, however, you have always to wait at least 10 seconds because all the winning numbers **are all generated before **the check against the player lucky number. That&rsquo;s a waste of time because if the first of the winning numbers were the player&rsquo;s number, we&rsquo;d had generated 9 other winning numbers (using a time-consuming function) that we don&rsquo;t need and that we will never use.</p><p>Using a generator, we can solve this problem pretty easily:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span style=color:#ff79c6>import</span> time
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span style=color:#ff79c6>import</span> random
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span><span style=color:#ff79c6>def</span> <span style=color:#50fa7b>get_winning_numbers</span>():
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span>    random<span style=color:#ff79c6>.</span>seed()
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span>    <span style=color:#ff79c6>for</span> i <span style=color:#ff79c6>in</span> <span style=color:#8be9fd;font-style:italic>range</span>(<span style=color:#bd93f9>0</span>,<span style=color:#bd93f9>10</span>):
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span>        time<span style=color:#ff79c6>.</span>sleep(<span style=color:#bd93f9>1</span>)  <span style=color:#6272a4># let&#39;s simulate some kind of delay</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span>        <span style=color:#ff79c6>yield</span> random<span style=color:#ff79c6>.</span>randint(<span style=color:#bd93f9>1</span>,<span style=color:#bd93f9>10</span>)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span>random<span style=color:#ff79c6>.</span>seed()
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span>my_number <span style=color:#ff79c6>=</span> random<span style=color:#ff79c6>.</span>randint(<span style=color:#bd93f9>1</span>,<span style=color:#bd93f9>10</span>)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span><span style=color:#8be9fd;font-style:italic>print</span> (<span style=color:#f1fa8c>&#34;my number is &#34;</span> <span style=color:#ff79c6>+</span> <span style=color:#8be9fd;font-style:italic>str</span>(my_number))
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">14</span><span style=color:#ff79c6>for</span> winning_number <span style=color:#ff79c6>in</span> get_winning_numbers():
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">15</span>    <span style=color:#8be9fd;font-style:italic>print</span>(winning_number)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">16</span>    <span style=color:#ff79c6>if</span> my_number <span style=color:#ff79c6>==</span> winning_number:
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">17</span>        <span style=color:#8be9fd;font-style:italic>print</span> (<span style=color:#f1fa8c>&#34;you win!&#34;</span>)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">18</span>        <span style=color:#ff79c6>break</span>
</code></pre></div><p>We don&rsquo;t need to make a big change to our program, we have the same result but the execution is often faster than the old version. In fact, now if the first winning number is equal to the lucky number of the player, we generate just that number, the player wins and the execution ends in just one second.</p><h2 id=do-i-need-to-be-notified-while-the-results-of-the-list-are-generated>Do I need to be notified while the results of the list are generated?</h2><p>If the answer to this question is yes, well, you will probably need a generator.</p><p>Think about a function that searches something on your filesystem or any other slow device and returns a list of results. If your function takes 5 seconds to find every single element and there are just 4 elements to be found, you have to wait 20 seconds before getting the results.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span style=color:#ff79c6>import</span> time
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span style=color:#ff79c6>def</span> <span style=color:#50fa7b>elements</span>():
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span>    elements <span style=color:#ff79c6>=</span> []
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span>    <span style=color:#ff79c6>for</span> i <span style=color:#ff79c6>in</span> <span style=color:#8be9fd;font-style:italic>range</span> (<span style=color:#bd93f9>0</span>,<span style=color:#bd93f9>4</span>):
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span>        <span style=color:#6272a4># simulate a slow search</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span>        time<span style=color:#ff79c6>.</span>sleep(<span style=color:#bd93f9>5</span>)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span>        elements<span style=color:#ff79c6>.</span>append(i)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span>    <span style=color:#ff79c6>return</span> elements
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span><span style=color:#8be9fd;font-style:italic>print</span>(<span style=color:#f1fa8c>&#34;start&#34;</span>)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span><span style=color:#8be9fd;font-style:italic>print</span>(elements())
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span><span style=color:#8be9fd;font-style:italic>print</span>(<span style=color:#f1fa8c>&#34;end&#34;</span>)
</code></pre></div><p>In this case, even if you need all the four elements before going on, your app will seem to be frozen for 20 seconds, and this could be annoying for the user.</p><p>Wouldn&rsquo;t it be better to be notified after every result, even just to have the time to update the user interface, maybe showing the partial results found or even a simple progress bar?</p><div class=highlight><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span style=color:#ff79c6>import</span> time
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span style=color:#ff79c6>def</span> <span style=color:#50fa7b>elements</span>():
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span>    elements <span style=color:#ff79c6>=</span> []
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span>    <span style=color:#ff79c6>for</span> i <span style=color:#ff79c6>in</span> <span style=color:#8be9fd;font-style:italic>range</span> (<span style=color:#bd93f9>0</span>,<span style=color:#bd93f9>4</span>):
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span>        <span style=color:#6272a4># simulate a slow search</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span>        time<span style=color:#ff79c6>.</span>sleep(<span style=color:#bd93f9>5</span>)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span>        <span style=color:#ff79c6>yield</span>(i)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span><span style=color:#8be9fd;font-style:italic>print</span>(<span style=color:#f1fa8c>&#34;start&#34;</span>)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span><span style=color:#ff79c6>for</span> i <span style=color:#ff79c6>in</span> elements():
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span>    <span style=color:#6272a4># show a &#34;console style&#34; progress bar  :)</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span>    <span style=color:#8be9fd;font-style:italic>print</span>(<span style=color:#f1fa8c>&#34;.&#34;</span>, end<span style=color:#ff79c6>=</span><span style=color:#f1fa8c>&#34;&#34;</span>, flush<span style=color:#ff79c6>=</span><span style=color:#ff79c6>True</span>)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">14</span><span style=color:#8be9fd;font-style:italic>print</span>()
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">15</span><span style=color:#8be9fd;font-style:italic>print</span>(<span style=color:#f1fa8c>&#34;end&#34;</span>)
</code></pre></div><h2 id=is-the-memory-footprint-of-the-function-im-writing-relevant>Is the memory footprint of the function I&rsquo;m writing relevant?</h2><p>If the answer is &ldquo;yes&rdquo;, it&rsquo;s probably a good idea to use a generator.</p><p>That&rsquo;s because with a generator you create a result just when you need it and after the result has been created you can start working on it, removing it from the memory when you have finished and before asking for another item.</p><p>Let&rsquo;s say that your function is supposed to return a huge list of big objects, to return a single list you have to create that list and keep it all in memory.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span style=color:#ff79c6>import</span> time
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span style=color:#ff79c6>def</span> <span style=color:#50fa7b>get_elements</span>():
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span>    elements <span style=color:#ff79c6>=</span> []
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span>    <span style=color:#ff79c6>for</span> i <span style=color:#ff79c6>in</span> <span style=color:#8be9fd;font-style:italic>range</span> (<span style=color:#bd93f9>0</span>,<span style=color:#bd93f9>10000</span>):
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span>        elements<span style=color:#ff79c6>.</span>append(<span style=color:#f1fa8c>&#34;x&#34;</span><span style=color:#ff79c6>*</span><span style=color:#bd93f9>10240</span>)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span>    <span style=color:#6272a4># return a list of 10.000 items, each of 10KB...</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span>    <span style=color:#ff79c6>return</span> elements
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span>characters_count <span style=color:#ff79c6>=</span> <span style=color:#bd93f9>0</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span>my_elements<span style=color:#ff79c6>=</span>get_elements()
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span><span style=color:#6272a4># in this moment, our program has a memory footprint of more than 100MB!!!</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">14</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">15</span><span style=color:#ff79c6>for</span> i <span style=color:#ff79c6>in</span> my_elements:
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">16</span>    characters_count <span style=color:#ff79c6>=</span> characters_count <span style=color:#ff79c6>+</span> <span style=color:#8be9fd;font-style:italic>len</span>(i)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">17</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">18</span><span style=color:#8be9fd;font-style:italic>print</span>(characters_count)
</code></pre></div><p>As you see, in this case, we are allocating more than 100MB RAM before actually doing anything&mldr; But using a generator&mldr;</p><div class=highlight><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span style=color:#ff79c6>def</span> <span style=color:#50fa7b>get_elements</span>():
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span>    <span style=color:#ff79c6>for</span> i <span style=color:#ff79c6>in</span> <span style=color:#8be9fd;font-style:italic>range</span> (<span style=color:#bd93f9>0</span>,<span style=color:#bd93f9>10000</span>):
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span>        <span style=color:#ff79c6>yield</span>(<span style=color:#f1fa8c>&#34;x&#34;</span><span style=color:#ff79c6>*</span><span style=color:#bd93f9>10240</span>)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span>characters_count <span style=color:#ff79c6>=</span> <span style=color:#bd93f9>0</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span>my_elements<span style=color:#ff79c6>=</span>get_elements()
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span><span style=color:#ff79c6>for</span> i <span style=color:#ff79c6>in</span> my_elements:
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span>    characters_count <span style=color:#ff79c6>=</span> characters_count <span style=color:#ff79c6>+</span> <span style=color:#8be9fd;font-style:italic>len</span>(i)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span><span style=color:#8be9fd;font-style:italic>print</span>(characters_count)
</code></pre></div><p>we get the same result with just 10KB RAM used at a time.</p><hr><p>Now I can hear you wondering &ldquo;well, I have to use generators if the function that creates an element is time-consuming, if the memory footprint of that function is relevant or if I don&rsquo;t need all the elements of the list, but in every other case it&rsquo;s ok to create a list, right?&rdquo;&mldr; Well, it could be ok&mldr; but&mldr; even in this case, why not to use a generator? A generator, for me, is always a better choice and consider that if you have a generator, converting it in a list is a trivial operation that can be done by using the &ldquo;list&rdquo; keyword like that.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span>mylist <span style=color:#ff79c6>=</span> <span style=color:#8be9fd;font-style:italic>list</span>(my_generator())
</code></pre></div><p>or by using list comprehension syntax</p><div class=highlight><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span>mylist <span style=color:#ff79c6>=</span> [element <span style=color:#ff79c6>for</span> element <span style=color:#ff79c6>in</span> my_generator()]
</code></pre></div><p>To sum up: <strong>ask not</strong> &ldquo;<em>why should I use a generator?</em>&rdquo; but ask &ldquo;<em>why shouldn&rsquo;t I?</em>&rdquo;</p><p>:)</p><p>Happy Coding!</p><p>D.</p></div></article><hr><h2 style=color:#2bbc8a;text-align:center>Did you find this article helpful?</h2><br><style>.bmc-button img{height:34px!important;width:35px!important;margin-bottom:1px!important;box-shadow:none!important;border:none!important;vertical-align:middle!important}.bmc-button{padding:7px 10px!important;line-height:35px!important;height:51px!important;min-width:217px!important;text-decoration:none!important;display:inline-flex!important;color:#fff!important;background-color:#ff813f!important;border-radius:5px!important;border:1px solid transparent!important;padding:7px 10px!important;font-size:22px!important;letter-spacing:.6px!important;box-shadow:0 1px 2px rgba(190,190,190,.5)!important;-webkit-box-shadow:0 1px 2px 2px rgba(190,190,190,.5)!important;margin:0 auto!important;font-family:cookie,cursive!important;-webkit-box-sizing:border-box!important;box-sizing:border-box!important;-o-transition:.3s all linear!important;-webkit-transition:.3s all linear!important;-moz-transition:.3s all linear!important;-ms-transition:.3s all linear!important;transition:.3s all linear!important}.bmc-button:hover,.bmc-button:active,.bmc-button:focus{-webkit-box-shadow:0 1px 2px 2px rgba(190,190,190,.5)!important;text-decoration:none!important;box-shadow:0 1px 2px 2px rgba(190,190,190,.5)!important;opacity:.85!important;color:#fff!important}</style><link href="https://fonts.googleapis.com/css?family=Cookie" rel=stylesheet><a class=bmc-button target=_blank href=https://www.buymeacoffee.com/dXjDHmt style=align:left><img src=https://cdn.buymeacoffee.com/buttons/bmc-new-btn-logo.svg alt="Buy me a coffee!" align=left>
<span style=margin-left:15px;font-size:28px!important>Buy me a coffee!</span></a><hr><div class=blog-post-comments><div id=disquss_thread><script src=https://utteranc.es/client.js repo=mastro35/tpc issue-term=pathname label="The Python Corner" theme=github-dark crossorigin=anonymous async></script></div></div><div id=footer-post-container><div id=footer-post><div id=nav-footer style=display:none><ul><li><a href=../../>Home</a></li><li><a href=../../posts>Articles</a></li><li><a href=../../tags>Tags</a></li><li><a href=../../about>About</a></li><li><a href=../../help_us>Help Us</a></li><li><a href=https://buttondown.email/thepythoncorner>Newsletter</a></li><li><a href=https://shop.spreadshirt.com/the-python-corner>Swag Store</a></li></ul></div><div id=toc-footer style=display:none><nav id=TableOfContents><ul><li><a href=#do-i-need-all-the-items-of-the-returned-list>Do I need all the items of the returned list?</a></li><li><a href=#do-i-need-to-be-notified-while-the-results-of-the-list-are-generated>Do I need to be notified while the results of the list are generated?</a></li><li><a href=#is-the-memory-footprint-of-the-function-im-writing-relevant>Is the memory footprint of the function I&rsquo;m writing relevant?</a></li></ul></nav></div><div id=share-footer style=display:none><ul><li><a class=icon href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fmastro35.github.io%2ftpc%2fposts%2f2018-04-17-generators-in-python-should-i-use-them%2f" aria-label=Facebook><i class="fab fa-facebook fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://twitter.com/share?url=https%3a%2f%2fmastro35.github.io%2ftpc%2fposts%2f2018-04-17-generators-in-python-should-i-use-them%2f&text=When%20To%20Use%20Generators%20in%20Python" aria-label=Twitter><i class="fab fa-twitter fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2fmastro35.github.io%2ftpc%2fposts%2f2018-04-17-generators-in-python-should-i-use-them%2f&title=When%20To%20Use%20Generators%20in%20Python" aria-label=Linkedin><i class="fab fa-linkedin fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2fmastro35.github.io%2ftpc%2fposts%2f2018-04-17-generators-in-python-should-i-use-them%2f&is_video=false&description=When%20To%20Use%20Generators%20in%20Python" aria-label=Pinterest><i class="fab fa-pinterest fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="mailto:?subject=When%20To%20Use%20Generators%20in%20Python&body=Check out this article: https%3a%2f%2fmastro35.github.io%2ftpc%2fposts%2f2018-04-17-generators-in-python-should-i-use-them%2f" aria-label=Email><i class="fas fa-envelope fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://getpocket.com/save?url=https%3a%2f%2fmastro35.github.io%2ftpc%2fposts%2f2018-04-17-generators-in-python-should-i-use-them%2f&title=When%20To%20Use%20Generators%20in%20Python" aria-label=Pocket><i class="fab fa-get-pocket fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://reddit.com/submit?url=https%3a%2f%2fmastro35.github.io%2ftpc%2fposts%2f2018-04-17-generators-in-python-should-i-use-them%2f&title=When%20To%20Use%20Generators%20in%20Python" aria-label=reddit><i class="fab fa-reddit fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://www.tumblr.com/share/link?url=https%3a%2f%2fmastro35.github.io%2ftpc%2fposts%2f2018-04-17-generators-in-python-should-i-use-them%2f&name=When%20To%20Use%20Generators%20in%20Python&description=Following%20a%20request%20of%20a%20reader%2c%20today%20we%26rsquo%3bre%20going%20to%20discuss%20when%20to%20use%20iterators%20and%20generators%20in%20Python.%0aFirst%20of%20all%2c%20it%26rsquo%3bs%20important%20to%20know%20what%20iterators%20and%20generators%20are%2c%20so%20if%20you%20don%26rsquo%3bt%20know%20exactly%20what%20they%20are%2c%20I%20suggest%20to%20have%20a%20look%20at%20my%20previous%20article%20on%20this%20topic.%0aNow%20that%20everything%20is%20clear%2c%20we%20can%20start%20analyzing%20when%20to%20use%20these%20features.%0a%20Let%26rsquo%3bs%20start%20saying%20that%20if%20you%20have%20read%20my%20previous%20article%2c%20the%20use%20of%20the%20iterator%20protocol%20should%20be%20quite%20clear%3a%20you%20use%20iterator%20protocol%20when%20you%20have%20a%20custom%20object%20that%20you%20want%20to%20be%20%26ldquo%3biterable%26rdquo%3b." aria-label=Tumblr><i class="fab fa-tumblr fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fmastro35.github.io%2ftpc%2fposts%2f2018-04-17-generators-in-python-should-i-use-them%2f&t=When%20To%20Use%20Generators%20in%20Python" aria-label="Hacker News"><i class="fab fa-hacker-news fa-lg" aria-hidden=true></i></a></li></ul></div><div id=actions-footer><a id=menu-toggle class=icon href=# onclick="return $('#nav-footer').toggle(),!1" aria-label=Menu><i class="fas fa-bars fa-lg" aria-hidden=true></i> Menu</a>
<a id=toc-toggle class=icon href=# onclick="return $('#toc-footer').toggle(),!1" aria-label=TOC><i class="fas fa-list fa-lg" aria-hidden=true></i> TOC</a>
<a id=share-toggle class=icon href=# onclick="return $('#share-footer').toggle(),!1" aria-label=Share><i class="fas fa-share-alt fa-lg" aria-hidden=true></i> share</a>
<a id=top style=display:none class=icon href=# onclick="$('html, body').animate({scrollTop:0},'fast')" aria-label="Top of Page"><i class="fas fa-chevron-up fa-lg" aria-hidden=true></i> Top</a></div></div></div><footer id=footer><div class=footer-left>Copyright &copy; 2021 Davide Mastromatteo</div><div class=footer-right><nav><ul><li><a href=../../>Home</a></li><li><a href=../../posts>Articles</a></li><li><a href=../../tags>Tags</a></li><li><a href=../../about>About</a></li><li><a href=../../help_us>Help Us</a></li><li><a href=https://buttondown.email/thepythoncorner>Newsletter</a></li><li><a href=https://shop.spreadshirt.com/the-python-corner>Swag Store</a></li></ul></nav></div></footer></div></body><link rel=stylesheet href=../../lib/font-awesome/css/all.min.css><script src=../../lib/jquery/jquery.min.js></script><script src=../../js/main.js></script><script src=../../js/code-copy.js></script></html>
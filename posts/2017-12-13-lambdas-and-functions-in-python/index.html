<!doctype html><html lang=en-us><head><script data-ad-client=ca-pub-1030730506660314 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script><script id=mNCC language=javascript>medianet_width="728",medianet_height="90",medianet_crid="167545135",medianet_versionId="3111299"</script><script src="//contextual.media.net/nmedianet.js?cid=8CU62P5S3"></script><script type=text/javascript src=https://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js></script><script type=text/javascript src=https://blockchain.info/Resources/js/pay-now-button.js></script><link rel=preload href=../../lib/font-awesome/webfonts/fa-brands-400.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=../../lib/font-awesome/webfonts/fa-regular-400.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=../../lib/font-awesome/webfonts/fa-solid-900.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=../../lib/JetBrainsMono/web/woff2/JetBrainsMono-Regular.woff2 as=font type=font/woff2 crossorigin=anonymous><script type=text/javascript src=https://latest.cactus.chat/cactus.js></script><link rel=stylesheet href=https://latest.cactus.chat/style.css type=text/css><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><title>Lambdas and functions in Python | The Python Corner</title><link rel=canonical href=https://mastro35.github.io/tpc/posts/2017-12-13-lambdas-and-functions-in-python/><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="all,follow"><meta name=googlebot content="index,follow,snippet,archive"><meta property="og:title" content="Lambdas and functions in Python"><meta property="og:description" content="In my last post, I discussed some ways to avoid nested code in Python and discussing the &ldquo;filter&rdquo; and &ldquo;map&rdquo; functions I mentioned the lambda functions.
After that article, some reader asked me to write a little more about this topic, so &mldr; here I am. :)
Let&rsquo;s start with a mantra. If you want to know what something is, in Python, just use your REPL.
So, start the Python REPL and define a lambda:"><meta property="og:type" content="article"><meta property="og:url" content="https://mastro35.github.io/tpc/posts/2017-12-13-lambdas-and-functions-in-python/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2017-12-13T19:06:00+01:00"><meta property="article:modified_time" content="2017-12-13T19:06:00+01:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Lambdas and functions in Python"><meta name=twitter:description content="In my last post, I discussed some ways to avoid nested code in Python and discussing the &ldquo;filter&rdquo; and &ldquo;map&rdquo; functions I mentioned the lambda functions.
After that article, some reader asked me to write a little more about this topic, so &mldr; here I am. :)
Let&rsquo;s start with a mantra. If you want to know what something is, in Python, just use your REPL.
So, start the Python REPL and define a lambda:"><link rel=stylesheet href=https://mastro35.github.io/tpc/css/styles.c05d68261bf086a9d7713c4f8a6215a3601608e267a816a7ee58f139b3d1aae51222aae2081c8e0c6bd35e1334773b7a16283022f31f92afd93bb37e5e822e66.css integrity="sha512-wF1oJhvwhqnXcTxPimIVo2AWCOJnqBan7ljxObPRquUSIqriCByODGvTXhM0dzt6FigwIvMfkq/ZO7N+XoIuZg=="><!--[if lt IE 9]><script src=https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js></script><script src=https://oss.maxcdn.com/respond/1.4.2/respond.min.js></script><![endif]--><script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga('create','UA-120027408-1','auto'),ga('send','pageview'))</script><script async src=https://www.google-analytics.com/analytics.js></script></head><body class="max-width mx-auto px3 ltr"><div class="content index py4"><div id=header-post><a id=menu-icon href=#><i class="fas fa-bars fa-lg"></i></a>
<a id=menu-icon-tablet href=#><i class="fas fa-bars fa-lg"></i></a>
<a id=top-icon-tablet href=# onclick="$('html, body').animate({scrollTop:0},'fast')" style=display:none aria-label="Top of Page"><i class="fas fa-chevron-up fa-lg"></i></a>
<span id=menu><span id=nav><ul><li><a href=../../>Home</a></li><li><a href=../../posts>Articles</a></li><li><a href=../../tags>Tags</a></li><li><a href=../../about>About</a></li><li><a href=../../help_us>Help Us</a></li><li><a href=https://buttondown.email/thepythoncorner>Newsletter</a></li><li><a href=https://shop.spreadshirt.com/the-python-corner>Swag Store</a></li></ul></span><br><span id=actions><ul><li><a class=icon href=https://mastro35.github.io/tpc/posts/2017-12-04-the-art-of-avoiding-nested-code/ aria-label=Previous><i class="fas fa-chevron-left" aria-hidden=true onmouseover="$('#i-prev').toggle()" onmouseout="$('#i-prev').toggle()"></i></a></li><li><a class=icon href=https://mastro35.github.io/tpc/posts/2018-04-17-generators-in-python-should-i-use-them/ aria-label=Next><i class="fas fa-chevron-right" aria-hidden=true onmouseover="$('#i-next').toggle()" onmouseout="$('#i-next').toggle()"></i></a></li><li><a class=icon href=# onclick="$('html, body').animate({scrollTop:0},'fast')" aria-label="Top of Page"><i class="fas fa-chevron-up" aria-hidden=true onmouseover="$('#i-top').toggle()" onmouseout="$('#i-top').toggle()"></i></a></li><li><a class=icon href=# aria-label=Share><i class="fas fa-share-alt" aria-hidden=true onmouseover="$('#i-share').toggle()" onmouseout="$('#i-share').toggle()" onclick="return $('#share').toggle(),!1"></i></a></li></ul><span id=i-prev class=info style=display:none>Previous post</span>
<span id=i-next class=info style=display:none>Next post</span>
<span id=i-top class=info style=display:none>Back to top</span>
<span id=i-share class=info style=display:none>Share post</span></span><br><div id=share style=display:none><ul><li><a class=icon href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fmastro35.github.io%2ftpc%2fposts%2f2017-12-13-lambdas-and-functions-in-python%2f" aria-label=Facebook><i class="fab fa-facebook" aria-hidden=true></i></a></li><li><a class=icon href="https://twitter.com/share?url=https%3a%2f%2fmastro35.github.io%2ftpc%2fposts%2f2017-12-13-lambdas-and-functions-in-python%2f&text=Lambdas%20and%20functions%20in%20Python" aria-label=Twitter><i class="fab fa-twitter" aria-hidden=true></i></a></li><li><a class=icon href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2fmastro35.github.io%2ftpc%2fposts%2f2017-12-13-lambdas-and-functions-in-python%2f&title=Lambdas%20and%20functions%20in%20Python" aria-label=Linkedin><i class="fab fa-linkedin" aria-hidden=true></i></a></li><li><a class=icon href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2fmastro35.github.io%2ftpc%2fposts%2f2017-12-13-lambdas-and-functions-in-python%2f&is_video=false&description=Lambdas%20and%20functions%20in%20Python" aria-label=Pinterest><i class="fab fa-pinterest" aria-hidden=true></i></a></li><li><a class=icon href="mailto:?subject=Lambdas%20and%20functions%20in%20Python&body=Check out this article: https%3a%2f%2fmastro35.github.io%2ftpc%2fposts%2f2017-12-13-lambdas-and-functions-in-python%2f" aria-label=Email><i class="fas fa-envelope" aria-hidden=true></i></a></li><li><a class=icon href="https://getpocket.com/save?url=https%3a%2f%2fmastro35.github.io%2ftpc%2fposts%2f2017-12-13-lambdas-and-functions-in-python%2f&title=Lambdas%20and%20functions%20in%20Python" aria-label=Pocket><i class="fab fa-get-pocket" aria-hidden=true></i></a></li><li><a class=icon href="http://reddit.com/submit?url=https%3a%2f%2fmastro35.github.io%2ftpc%2fposts%2f2017-12-13-lambdas-and-functions-in-python%2f&title=Lambdas%20and%20functions%20in%20Python" aria-label=reddit><i class="fab fa-reddit" aria-hidden=true></i></a></li><li><a class=icon href="http://www.tumblr.com/share/link?url=https%3a%2f%2fmastro35.github.io%2ftpc%2fposts%2f2017-12-13-lambdas-and-functions-in-python%2f&name=Lambdas%20and%20functions%20in%20Python&description=In%20my%20last%20post%2c%20I%20discussed%20some%20ways%20to%20avoid%20nested%20code%20in%20Python%20and%20discussing%20the%20%26ldquo%3bfilter%26rdquo%3b%20and%20%26ldquo%3bmap%26rdquo%3b%20functions%20I%20mentioned%20the%20lambda%20functions.%0aAfter%20that%20article%2c%20some%20reader%20asked%20me%20to%20write%20a%20little%20more%20about%20this%20topic%2c%20so%20%26hellip%3b%20here%20I%20am.%20%3a%29%0aLet%26rsquo%3bs%20start%20with%20a%20mantra.%20If%20you%20want%20to%20know%20what%20something%20is%2c%20in%20Python%2c%20just%20use%20your%20REPL.%0aSo%2c%20start%20the%20Python%20REPL%20and%20define%20a%20lambda%3a" aria-label=Tumblr><i class="fab fa-tumblr" aria-hidden=true></i></a></li><li><a class=icon href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fmastro35.github.io%2ftpc%2fposts%2f2017-12-13-lambdas-and-functions-in-python%2f&t=Lambdas%20and%20functions%20in%20Python" aria-label="Hacker News"><i class="fab fa-hacker-news" aria-hidden=true></i></a></li></ul></div><div id=toc><nav id=TableOfContents><ul><li><a href=#the-case-of-the-rpn-calculator>The case of the RPN Calculator</a></li><li><a href=#peters-work>Peter&rsquo;s work</a></li></ul></nav></div></span></div><article class=post itemscope itemtype=http://schema.org/BlogPosting><header><h1 class=posttitle itemprop="name headline">Lambdas and functions in Python</h1><div class=meta><div class=postdate><time datetime="2017-12-13 19:06:00 +0100 +0100" itemprop=datePublished>2017-12-13</time></div><div class=article-read-time><i class="far fa-clock"></i>
16 minute read</div><div class=article-category><i class="fas fa-archive"></i>
<a class=category-link href=../../categories/dev>Dev</a></div><div class=article-tag><i class="fas fa-tag"></i>
<a class=tag-link href=../../tags/featured rel=tag>Featured</a>
,
<a class=tag-link href=../../tags/first-class-objects rel=tag>First Class Objects</a>
,
<a class=tag-link href=../../tags/lambda rel=tag>Lambda</a>
,
<a class=tag-link href=../../tags/python rel=tag>Python</a></div></div></header><div class=content itemprop=articleBody><p><img src=https://imgs.xkcd.com/comics/code_quality_2.png alt=teaser></p><p><a href=https://www.thepythoncorner.com/2017/12/the-art-of-avoiding-nested-code>In my last post</a>, I discussed some ways to avoid nested code in Python and discussing the &ldquo;<em>filter</em>&rdquo; and &ldquo;<em>map</em>&rdquo; functions I mentioned the <em><strong>lambda functions</strong></em>.</p><p>After that article, some reader asked me to write a little more about this topic, so &mldr; here I am. :)</p><p>Let&rsquo;s start with a mantra. If you want to know what something is, in Python, just use your REPL.</p><p>So, start the Python REPL and define a lambda:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span>Python <span style=color:#bd93f9>3.6.2</span> <span style=color:#ff79c6>|</span>Anaconda custom (<span style=color:#bd93f9>64</span><span style=color:#ff79c6>-</span>bit)<span style=color:#ff79c6>|</span> (default, Sep <span style=color:#bd93f9>19</span> <span style=color:#bd93f9>2017</span>, <span style=color:#bd93f9>08</span>:<span style=color:#bd93f9>03</span>:<span style=color:#bd93f9>39</span>) [MSC v<span style=color:#bd93f9>.1900</span> <span style=color:#bd93f9>64</span> bit (AMD64)] on win32
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span>Type <span style=color:#f1fa8c>&#34;help&#34;</span>, <span style=color:#f1fa8c>&#34;copyright&#34;</span>, <span style=color:#f1fa8c>&#34;credits&#34;</span> <span style=color:#ff79c6>or</span> <span style=color:#f1fa8c>&#34;license&#34;</span> <span style=color:#ff79c6>for</span> more information<span style=color:#ff79c6>.</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span><span style=color:#ff79c6>&gt;&gt;&gt;</span> my_lambda <span style=color:#ff79c6>=</span> <span style=color:#ff79c6>lambda</span> x: x<span style=color:#ff79c6>+</span><span style=color:#bd93f9>1</span>
</code></pre></div><p>Now, try to ask Python what is &ldquo;my_lambda&rdquo;</p><div class=highlight><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span style=color:#ff79c6>&gt;&gt;&gt;</span> <span style=color:#8be9fd;font-style:italic>print</span>(my_lambda)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span style=color:#ff79c6>&lt;</span>function <span style=color:#ff79c6>&lt;</span><span style=color:#ff79c6>lambda</span><span style=color:#ff79c6>&gt;</span> at <span style=color:#bd93f9>0x0000021D14663E18</span><span style=color:#ff79c6>&gt;</span>
</code></pre></div><p>It turns out that a &ldquo;lambda&rdquo; is&mldr; just a function!</p><p>Basically, a lambda is just an anonymous function that can be used &ldquo;inline&rdquo; whenever your code expects to find a function. In Python, in fact, functions are first-class objects and that basically means that they can be used like any other objects. They can be passed to other functions, they can be assigned to a name, they can be returned from a function and so on.</p><p>So, in our first example, we just defined a function that takes an argument (x), sums the value 1 to the input argument, and returns the result of this operation.</p><p>What&rsquo;s the name of the function?
It has no name actually, and so I had to assign this anonymous function to the name &ldquo;my_lambda&rdquo; to be able to use it in my code.</p><p>Now I can hear some of you saying:</p><p>Why bother with this stuff?
Why not just use a standard named function?
Couldn&rsquo;t I write something like this?</p><div class=highlight><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span style=color:#ff79c6>&gt;&gt;&gt;</span> <span style=color:#ff79c6>def</span> <span style=color:#50fa7b>my_sum_function</span>(x):
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span style=color:#ff79c6>...</span> <span style=color:#ff79c6>return</span> x<span style=color:#ff79c6>+</span><span style=color:#bd93f9>1</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span style=color:#ff79c6>...</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span><span style=color:#ff79c6>&gt;&gt;&gt;</span> <span style=color:#8be9fd;font-style:italic>print</span> (my_sum_function)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">5</span><span style=color:#ff79c6>&lt;</span>function my_sum_function at <span style=color:#bd93f9>0x0000021D14D83E18</span><span style=color:#ff79c6>&gt;</span>
</code></pre></div><p>Yes, you could actually&mldr; and I will tell you something more: you can pass this function as well to other functions.</p><p>In our example, if we use:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span style=color:#ff79c6>&gt;&gt;&gt;</span> <span style=color:#8be9fd;font-style:italic>print</span>(<span style=color:#8be9fd;font-style:italic>list</span>(<span style=color:#8be9fd;font-style:italic>map</span>(my_lambda, <span style=color:#8be9fd;font-style:italic>range</span>(<span style=color:#bd93f9>10</span>)))) [<span style=color:#bd93f9>1</span>, <span style=color:#bd93f9>2</span>, <span style=color:#bd93f9>3</span>, <span style=color:#bd93f9>4</span>, <span style=color:#bd93f9>5</span>, <span style=color:#bd93f9>6</span>, <span style=color:#bd93f9>7</span>, <span style=color:#bd93f9>8</span>, <span style=color:#bd93f9>9</span>, <span style=color:#bd93f9>10</span>]
</code></pre></div><p>we get the same results of writing:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span style=color:#ff79c6>&gt;&gt;&gt;</span> <span style=color:#8be9fd;font-style:italic>print</span>(<span style=color:#8be9fd;font-style:italic>list</span>(<span style=color:#8be9fd;font-style:italic>map</span>(my_sum_function, <span style=color:#8be9fd;font-style:italic>range</span>(<span style=color:#bd93f9>10</span>))))
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span>[<span style=color:#bd93f9>1</span>, <span style=color:#bd93f9>2</span>, <span style=color:#bd93f9>3</span>, <span style=color:#bd93f9>4</span>, <span style=color:#bd93f9>5</span>, <span style=color:#bd93f9>6</span>, <span style=color:#bd93f9>7</span>, <span style=color:#bd93f9>8</span>, <span style=color:#bd93f9>9</span>, <span style=color:#bd93f9>10</span>]
</code></pre></div><p>So, why bother with lambda functions?</p><p>Well&mldr; it&rsquo;s just a matter of style and readability, because as we will keep saying: readability counts (<a href=https://www.python.org/dev/peps/pep-0020/>&ldquo;The Zen Of Python&rdquo;, rule #7</a>).</p><hr><h2 id=the-case-of-the-rpn-calculator>The case of the RPN Calculator</h2><p>Let&rsquo;s pretend that one of your customers asked you to create a program to simulate a &ldquo;Reverse Polish Notation calculator&rdquo; that they will install on all their employees' computers. You accept this work and get the specs for the program:</p><p>The program should be able to do all the basic operations (divide, sum, subtract, multiply), to find the square root of a number and to power to 2 a number. Obviously, you should be able to clear all the stack of the calculator or just to drop the last inserted number.</p><blockquote><p><strong>RPN Calculator for newbies</strong>
If you already know what is a RPN calculator, skip this part.
If you do not know what is the Reverse Polish Notation, but you are curious, just <a href=https://en.wikipedia.org/wiki/Reverse_Polish_notation>check this out</a>.
If you do not know anything about the Reverse Polish Notation and you want just a brief explanation to keep reading this article&mldr; go ahead.
The Reverse Polish Notation was very relevant in 70&rsquo;s and 80&rsquo;s as Hewlett-Packard used it in their scientific calculators and I personally love this notation.
Basically in a RPN calculator you have a &ldquo;stack&rdquo; where you put the operands with a LIFO (last in, first out) logic.
Then, when you press the button to compute an operation, the calculator takes out from the stack all the operands that the operation ask for, compute the operation and put the result back to the stack.
So, let&rsquo;s do an example. You want the result of the operation 5 x 6. In a standard calc you would act this way:</p><ul><li>press 5</li><li>press *</li><li>press 6</li><li>press =
and on the display you get the result : 30.
In a RPN calculator, you act this way:</li><li>press 5</li><li>press ENTER (and the number 5 is put on the stack)</li><li>press 6</li><li>press ENTER (and the number 6 is put on the stack)</li><li>press *<table><thead><tr><th>Now, before pressing the ‘*' symbol your stack was like this:</th></tr></thead><tbody><tr><td>5</td></tr><tr><td>6</td></tr><tr><td>-</td></tr><tr><td>after pressing the ‘*' symbol, you find on the stack just the result: 30. That&rsquo;s because the calculator knows that for a multiplication you need two operands, so it has &ldquo;popped&rdquo; the first value (6 — remember, it&rsquo;s a stack, it&rsquo;s LIFO), then it has &ldquo;popped&rdquo; the second value (5), it has executed the operation and put back the result (30) on the stack.</td></tr><tr><td>RPN calculators are great since they do not need expressions to be parethesized and there&rsquo;s more: they&rsquo;re cool! :)</td></tr></tbody></table></li></ul></blockquote><p>Now, you accepted the job and you have to start working, but since the deadline of the project is very tight, you decide to ask Max, your IT artist, of writing a GUI for the calculator and Peter, your new intern, of creating the &ldquo;engine&rdquo; of this calculator software.</p><p>Let&rsquo;s focus on Peter&rsquo;s work.</p><h2 id=peters-work>Peter&rsquo;s work</h2><p>After a while, Peter comes proudly to you asserting he has finished coding the calculator engine.</p><p>And that&rsquo;s what he has done so far:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span style=color:#f1fa8c>&#34;&#34;&#34;
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span style=color:#f1fa8c>Engine class of the RPN Calculator
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span style=color:#f1fa8c>&#34;&#34;&#34;</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span><span style=color:#ff79c6>import</span> math
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span><span style=color:#ff79c6>class</span> <span style=color:#50fa7b>rpn_engine</span>:
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span>    <span style=color:#ff79c6>def</span> __init__(self):
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span>        <span style=color:#f1fa8c>&#34;&#34;&#34; Constructor &#34;&#34;&#34;</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span>        self<span style=color:#ff79c6>.</span>stack <span style=color:#ff79c6>=</span> []
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span>    <span style=color:#ff79c6>def</span> <span style=color:#50fa7b>push</span>(self, number):
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span>        <span style=color:#f1fa8c>&#34;&#34;&#34; push a value to the internal stack &#34;&#34;&#34;</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">14</span>        self<span style=color:#ff79c6>.</span>stack<span style=color:#ff79c6>.</span>append(number)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">15</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">16</span>    <span style=color:#ff79c6>def</span> <span style=color:#50fa7b>pop</span>(self):
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">17</span>        <span style=color:#f1fa8c>&#34;&#34;&#34; pop a value from the stack &#34;&#34;&#34;</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">18</span>        <span style=color:#ff79c6>try</span>:
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">19</span>            <span style=color:#ff79c6>return</span> self<span style=color:#ff79c6>.</span>stack<span style=color:#ff79c6>.</span>pop()
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">20</span>        <span style=color:#ff79c6>except</span> IndexError:
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">21</span>            <span style=color:#ff79c6>pass</span> <span style=color:#6272a4># do not notify any error if the stack is empty...</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">22</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">23</span>    <span style=color:#ff79c6>def</span> <span style=color:#50fa7b>sum_two_numbers</span>(self):
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">24</span>        op2 <span style=color:#ff79c6>=</span> self<span style=color:#ff79c6>.</span>stack<span style=color:#ff79c6>.</span>pop()
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">25</span>        op1 <span style=color:#ff79c6>=</span> self<span style=color:#ff79c6>.</span>stack<span style=color:#ff79c6>.</span>pop()
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">26</span>        self<span style=color:#ff79c6>.</span>push(op1 <span style=color:#ff79c6>+</span> op2)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">27</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">28</span>    <span style=color:#ff79c6>def</span> <span style=color:#50fa7b>subtract_two_numbers</span>(self):
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">29</span>        op2 <span style=color:#ff79c6>=</span> self<span style=color:#ff79c6>.</span>stack<span style=color:#ff79c6>.</span>pop()
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">30</span>        op1 <span style=color:#ff79c6>=</span> self<span style=color:#ff79c6>.</span>stack<span style=color:#ff79c6>.</span>pop()
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">31</span>        self<span style=color:#ff79c6>.</span>push(op1 <span style=color:#ff79c6>-</span> op2)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">32</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">33</span>    <span style=color:#ff79c6>def</span> <span style=color:#50fa7b>multiply_two_numbers</span>(self):
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">34</span>        op2 <span style=color:#ff79c6>=</span> self<span style=color:#ff79c6>.</span>stack<span style=color:#ff79c6>.</span>pop()
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">35</span>        op1 <span style=color:#ff79c6>=</span> self<span style=color:#ff79c6>.</span>stack<span style=color:#ff79c6>.</span>pop()
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">36</span>        self<span style=color:#ff79c6>.</span>push(op1 <span style=color:#ff79c6>*</span> op2)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">37</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">38</span>    <span style=color:#ff79c6>def</span> <span style=color:#50fa7b>divide_two_numbers</span>(self):
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">39</span>        op2 <span style=color:#ff79c6>=</span> self<span style=color:#ff79c6>.</span>stack<span style=color:#ff79c6>.</span>pop()
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">40</span>        op1 <span style=color:#ff79c6>=</span> self<span style=color:#ff79c6>.</span>stack<span style=color:#ff79c6>.</span>pop()
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">41</span>        self<span style=color:#ff79c6>.</span>push(op1 <span style=color:#ff79c6>/</span> op2)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">42</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">43</span>    <span style=color:#ff79c6>def</span> <span style=color:#50fa7b>pow2_a_number</span>(self):
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">44</span>        op1 <span style=color:#ff79c6>=</span> self<span style=color:#ff79c6>.</span>stack<span style=color:#ff79c6>.</span>pop()
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">45</span>        self<span style=color:#ff79c6>.</span>push(op1 <span style=color:#ff79c6>*</span> op1)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">46</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">47</span>    <span style=color:#ff79c6>def</span> <span style=color:#50fa7b>sqrt_a_number</span>(self):
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">48</span>        op1 <span style=color:#ff79c6>=</span> self<span style=color:#ff79c6>.</span>stack<span style=color:#ff79c6>.</span>pop()
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">49</span>        self<span style=color:#ff79c6>.</span>push(math<span style=color:#ff79c6>.</span>sqrt(op1))
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">50</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">51</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">52</span>    <span style=color:#ff79c6>def</span> <span style=color:#50fa7b>compute</span>(self, operation):
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">53</span>        <span style=color:#f1fa8c>&#34;&#34;&#34; compute an operation &#34;&#34;&#34;</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">54</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">55</span>        <span style=color:#ff79c6>if</span> operation <span style=color:#ff79c6>==</span> <span style=color:#f1fa8c>&#39;+&#39;</span>:
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">56</span>            self<span style=color:#ff79c6>.</span>sum_two_numbers()
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">57</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">58</span>        <span style=color:#ff79c6>if</span> operation <span style=color:#ff79c6>==</span> <span style=color:#f1fa8c>&#39;-&#39;</span>:
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">59</span>            self<span style=color:#ff79c6>.</span>subtract_two_numbers()
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">60</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">61</span>        <span style=color:#ff79c6>if</span> operation <span style=color:#ff79c6>==</span> <span style=color:#f1fa8c>&#39;*&#39;</span>:
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">62</span>            self<span style=color:#ff79c6>.</span>multiply_two_numbers()
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">63</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">64</span>        <span style=color:#ff79c6>if</span> operation <span style=color:#ff79c6>==</span> <span style=color:#f1fa8c>&#39;/&#39;</span>:
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">65</span>            self<span style=color:#ff79c6>.</span>divide_two_numbers()
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">66</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">67</span>        <span style=color:#ff79c6>if</span> operation <span style=color:#ff79c6>==</span> <span style=color:#f1fa8c>&#39;^2&#39;</span>:
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">68</span>            self<span style=color:#ff79c6>.</span>pow2_a_number()
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">69</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">70</span>        <span style=color:#ff79c6>if</span> operation <span style=color:#ff79c6>==</span> <span style=color:#f1fa8c>&#39;SQRT&#39;</span>:
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">71</span>            self<span style=color:#ff79c6>.</span>sqrt_a_number()
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">72</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">73</span>        <span style=color:#ff79c6>if</span> operation <span style=color:#ff79c6>==</span> <span style=color:#f1fa8c>&#39;C&#39;</span>:
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">74</span>            self<span style=color:#ff79c6>.</span>stack<span style=color:#ff79c6>.</span>pop()
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">75</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">76</span>        <span style=color:#ff79c6>if</span> operation <span style=color:#ff79c6>==</span> <span style=color:#f1fa8c>&#39;AC&#39;</span>:
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">77</span>            self<span style=color:#ff79c6>.</span>stack<span style=color:#ff79c6>.</span>clear()
</code></pre></div><p>In a moment he understands that you&rsquo;re looking at him shocked and states: &ldquo;<em>my code runs fine</em>&rdquo;.</p><p>Now, let&rsquo;s clarify one thing: Peter&rsquo;s right. His code runs (<a href=https://imgs.xkcd.com/comics/code_quality_2.png>so does a burning bus&mldr;</a>).
Nevertheless, his code sucks. That&rsquo;s it.</p><p>So let&rsquo;s have a look at how we can improve this &ldquo;stuff&rdquo;.</p><hr><p>The first problem here is the code duplication. There&rsquo;s a principle of software engineering that is called &ldquo;DRY&rdquo;. It stands for &ldquo;Don&rsquo;t Repeat Yourself&rdquo;.</p><p>Peter has duplicated a lot of code because for every single function he has to get the operands, compute the operation and put the result back to the stack. Wouldn&rsquo;t it be great if we could have a function that does exactly this job, computing the operation we request? How can we achieve this?</p><p>Well, it&rsquo;s really simple actually, because as we said earlier&mldr; functions are first-class objects in Python! So, Peter&rsquo;s code can be simplified a lot.</p><p>Let&rsquo;s have a look at the functions we have to provide.</p><p>All the standard operations (divide, sum, add and multiply) needs two operands to be computed. The &ldquo;sqrt&rdquo; and the &ldquo;pow2&rdquo; functions need just one operand to be computed. The &ldquo;C&rdquo; (to drop the last item in the stack) and &ldquo;AC&rdquo; (to clear the stack) functions, don&rsquo;t need any operand to be computed.</p><p>So, let&rsquo;s rewrite Peter&rsquo;s code this way:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span style=color:#f1fa8c>&#34;&#34;&#34;
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span style=color:#f1fa8c>Engine class of the RPN Calculator
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span style=color:#f1fa8c>&#34;&#34;&#34;</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span><span style=color:#ff79c6>import</span> math
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span><span style=color:#ff79c6>class</span> <span style=color:#50fa7b>rpn_engine</span>:
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span>    <span style=color:#ff79c6>def</span> __init__(self):
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span>        <span style=color:#f1fa8c>&#34;&#34;&#34; Constructor &#34;&#34;&#34;</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span>        self<span style=color:#ff79c6>.</span>stack <span style=color:#ff79c6>=</span> []
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span>    <span style=color:#ff79c6>def</span> <span style=color:#50fa7b>push</span>(self, number):
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span>        <span style=color:#f1fa8c>&#34;&#34;&#34; push a value to the internal stack &#34;&#34;&#34;</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">14</span>        self<span style=color:#ff79c6>.</span>stack<span style=color:#ff79c6>.</span>append(number)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">15</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">16</span>    <span style=color:#ff79c6>def</span> <span style=color:#50fa7b>pop</span>(self):
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">17</span>        <span style=color:#f1fa8c>&#34;&#34;&#34; pop a value from the stack &#34;&#34;&#34;</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">18</span>        <span style=color:#ff79c6>try</span>:
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">19</span>            <span style=color:#ff79c6>return</span> self<span style=color:#ff79c6>.</span>stack<span style=color:#ff79c6>.</span>pop()
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">20</span>        <span style=color:#ff79c6>except</span> IndexError:
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">21</span>            <span style=color:#ff79c6>pass</span> <span style=color:#6272a4># do not notify any error if the stack is empty...</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">22</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">23</span>    <span style=color:#ff79c6>def</span> <span style=color:#50fa7b>sum_two_numbers</span>(self, op1, op2):
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">24</span>        <span style=color:#ff79c6>return</span> op1 <span style=color:#ff79c6>+</span> op2
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">25</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">26</span>    <span style=color:#ff79c6>def</span> <span style=color:#50fa7b>subtract_two_numbers</span>(self, op1, op2):
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">27</span>        <span style=color:#ff79c6>return</span> op1 <span style=color:#ff79c6>-</span> op2
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">28</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">29</span>    <span style=color:#ff79c6>def</span> <span style=color:#50fa7b>multiply_two_numbers</span>(self, op1, op2):
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">30</span>        <span style=color:#ff79c6>return</span> op1 <span style=color:#ff79c6>*</span> op2
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">31</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">32</span>    <span style=color:#ff79c6>def</span> <span style=color:#50fa7b>divide_two_numbers</span>(self, op1, op2):
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">33</span>        <span style=color:#ff79c6>return</span> op1 <span style=color:#ff79c6>/</span> op2
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">34</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">35</span>    <span style=color:#ff79c6>def</span> <span style=color:#50fa7b>pow2_a_number</span>(self, op1):
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">36</span>        <span style=color:#ff79c6>return</span> op1 <span style=color:#ff79c6>*</span> op1
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">37</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">38</span>    <span style=color:#ff79c6>def</span> <span style=color:#50fa7b>sqrt_a_number</span>(self, op1):
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">39</span>        <span style=color:#ff79c6>return</span> math<span style=color:#ff79c6>.</span>sqrt(op1)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">40</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">41</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">42</span>    <span style=color:#ff79c6>def</span> <span style=color:#50fa7b>compute</span>(self, operation):
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">43</span>        <span style=color:#f1fa8c>&#34;&#34;&#34; compute an operation &#34;&#34;&#34;</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">44</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">45</span>        <span style=color:#ff79c6>if</span> operation <span style=color:#ff79c6>==</span> <span style=color:#f1fa8c>&#39;+&#39;</span>:
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">46</span>            self<span style=color:#ff79c6>.</span>compute_operation_with_two_operands(self<span style=color:#ff79c6>.</span>sum_two_numbers)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">47</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">48</span>        <span style=color:#ff79c6>if</span> operation <span style=color:#ff79c6>==</span> <span style=color:#f1fa8c>&#39;-&#39;</span>:
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">49</span>            self<span style=color:#ff79c6>.</span>compute_operation_with_two_operands(self<span style=color:#ff79c6>.</span>subtract_two_numbers)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">50</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">51</span>        <span style=color:#ff79c6>if</span> operation <span style=color:#ff79c6>==</span> <span style=color:#f1fa8c>&#39;*&#39;</span>:
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">52</span>            self<span style=color:#ff79c6>.</span>compute_operation_with_two_operands(self<span style=color:#ff79c6>.</span>multiply_two_numbers)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">53</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">54</span>        <span style=color:#ff79c6>if</span> operation <span style=color:#ff79c6>==</span> <span style=color:#f1fa8c>&#39;/&#39;</span>:
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">55</span>            self<span style=color:#ff79c6>.</span>compute_operation_with_two_operands(self<span style=color:#ff79c6>.</span>divide_two_numbers)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">56</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">57</span>        <span style=color:#ff79c6>if</span> operation <span style=color:#ff79c6>==</span> <span style=color:#f1fa8c>&#39;^2&#39;</span>:
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">58</span>            self<span style=color:#ff79c6>.</span>compute_operation_with_one_operand(self<span style=color:#ff79c6>.</span>pow2_a_number)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">59</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">60</span>        <span style=color:#ff79c6>if</span> operation <span style=color:#ff79c6>==</span> <span style=color:#f1fa8c>&#39;SQRT&#39;</span>:
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">61</span>            self<span style=color:#ff79c6>.</span>compute_operation_with_one_operand(self<span style=color:#ff79c6>.</span>sqrt_a_number)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">62</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">63</span>        <span style=color:#ff79c6>if</span> operation <span style=color:#ff79c6>==</span> <span style=color:#f1fa8c>&#39;C&#39;</span>:
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">64</span>            self<span style=color:#ff79c6>.</span>stack<span style=color:#ff79c6>.</span>pop()
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">65</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">66</span>        <span style=color:#ff79c6>if</span> operation <span style=color:#ff79c6>==</span> <span style=color:#f1fa8c>&#39;AC&#39;</span>:
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">67</span>            self<span style=color:#ff79c6>.</span>stack<span style=color:#ff79c6>.</span>clear()
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">68</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">69</span>    <span style=color:#ff79c6>def</span> <span style=color:#50fa7b>compute_operation_with_two_operands</span>(self, operation):
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">70</span>        <span style=color:#f1fa8c>&#34;&#34;&#34; exec operations with two operands &#34;&#34;&#34;</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">71</span>        <span style=color:#ff79c6>try</span>:
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">72</span>            <span style=color:#ff79c6>if</span> <span style=color:#8be9fd;font-style:italic>len</span>(self<span style=color:#ff79c6>.</span>stack) <span style=color:#ff79c6>&lt;</span> <span style=color:#bd93f9>2</span>:
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">73</span>                <span style=color:#ff79c6>raise</span> BaseException(<span style=color:#f1fa8c>&#34;Not enough operands on the stack&#34;</span>)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">74</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">75</span>            op2 <span style=color:#ff79c6>=</span> self<span style=color:#ff79c6>.</span>stack<span style=color:#ff79c6>.</span>pop()
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">76</span>            op1 <span style=color:#ff79c6>=</span> self<span style=color:#ff79c6>.</span>stack<span style=color:#ff79c6>.</span>pop()
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">77</span>            result <span style=color:#ff79c6>=</span> operation(op1, op2)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">78</span>            self<span style=color:#ff79c6>.</span>push(result)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">79</span>        <span style=color:#ff79c6>except</span> BaseException <span style=color:#ff79c6>as</span> error:
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">80</span>            <span style=color:#8be9fd;font-style:italic>print</span>(error)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">81</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">82</span>    <span style=color:#ff79c6>def</span> <span style=color:#50fa7b>compute_operation_with_one_operand</span>(self, operation):
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">83</span>        <span style=color:#f1fa8c>&#34;&#34;&#34; exec operations with one operand &#34;&#34;&#34;</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">84</span>        <span style=color:#ff79c6>try</span>:
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">85</span>            op1 <span style=color:#ff79c6>=</span> self<span style=color:#ff79c6>.</span>stack<span style=color:#ff79c6>.</span>pop()
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">86</span>            result <span style=color:#ff79c6>=</span> operation(op1)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">87</span>            self<span style=color:#ff79c6>.</span>push(result)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">88</span>        <span style=color:#ff79c6>except</span> BaseException <span style=color:#ff79c6>as</span> error:
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">89</span>            <span style=color:#8be9fd;font-style:italic>print</span>(error)
</code></pre></div><p>Isn&rsquo;t it better? The duplicated code is far less than before and looks at the functions, all they do is to compute the operation and return the results. They are no longer in charge of getting operands and pushing the result to the stack, the readability of the code is definitely improved!</p><p>Now, looking at the code, the first thing I really hate is all the &ldquo;ifs&rdquo; in the compute function. Perhaps replacing them with a &ldquo;switch&rdquo; function&mldr; if only the switch function would exist in Python! :)</p><p>But we can do something better. Why don&rsquo;t we create a <em>catalog</em> of the available functions and then we just use this catalog to decide which function to use?</p><p>Why don&rsquo;t we use a <em>dictionary</em> for that?</p><p>Let&rsquo;s try to modify our code again:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span style=color:#f1fa8c>&#34;&#34;&#34;
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span style=color:#f1fa8c>Engine class of the RPN Calculator
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span style=color:#f1fa8c>&#34;&#34;&#34;</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span><span style=color:#ff79c6>import</span> math
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span><span style=color:#ff79c6>class</span> <span style=color:#50fa7b>rpn_engine</span>:
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span>    <span style=color:#ff79c6>def</span> __init__(self):
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span>        <span style=color:#f1fa8c>&#34;&#34;&#34; Constructor &#34;&#34;&#34;</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span>        self<span style=color:#ff79c6>.</span>stack <span style=color:#ff79c6>=</span> []
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span>        self<span style=color:#ff79c6>.</span>catalog <span style=color:#ff79c6>=</span> self<span style=color:#ff79c6>.</span>get_functions_catalog()
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span>    <span style=color:#ff79c6>def</span> <span style=color:#50fa7b>get_functions_catalog</span>(self):
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">14</span>        <span style=color:#ff79c6>return</span> {<span style=color:#f1fa8c>&#34;+&#34;</span>: self<span style=color:#ff79c6>.</span>sum_two_numbers, 
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">15</span>                <span style=color:#f1fa8c>&#34;-&#34;</span>: self<span style=color:#ff79c6>.</span>subtract_two_numbers, 
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">16</span>                <span style=color:#f1fa8c>&#34;*&#34;</span>: self<span style=color:#ff79c6>.</span>multiply_two_numbers,
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">17</span>                <span style=color:#f1fa8c>&#34;/&#34;</span>: self<span style=color:#ff79c6>.</span>divide_two_numbers,
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">18</span>                <span style=color:#f1fa8c>&#34;^2&#34;</span>: self<span style=color:#ff79c6>.</span>pow2_a_number,
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">19</span>                <span style=color:#f1fa8c>&#34;SQRT&#34;</span>: self<span style=color:#ff79c6>.</span>sqrt_a_number,
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">20</span>                <span style=color:#f1fa8c>&#34;C&#34;</span>: self<span style=color:#ff79c6>.</span>stack<span style=color:#ff79c6>.</span>pop,
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">21</span>                <span style=color:#f1fa8c>&#34;AC&#34;</span>: self<span style=color:#ff79c6>.</span>stack<span style=color:#ff79c6>.</span>clear}
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">22</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">23</span>    <span style=color:#ff79c6>def</span> <span style=color:#50fa7b>push</span>(self, number):
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">24</span>        <span style=color:#f1fa8c>&#34;&#34;&#34; push a value to the internal stack &#34;&#34;&#34;</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">25</span>        self<span style=color:#ff79c6>.</span>stack<span style=color:#ff79c6>.</span>append(number)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">26</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">27</span>    <span style=color:#ff79c6>def</span> <span style=color:#50fa7b>pop</span>(self):
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">28</span>        <span style=color:#f1fa8c>&#34;&#34;&#34; pop a value from the stack &#34;&#34;&#34;</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">29</span>        <span style=color:#ff79c6>try</span>:
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">30</span>            <span style=color:#ff79c6>return</span> self<span style=color:#ff79c6>.</span>stack<span style=color:#ff79c6>.</span>pop()
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">31</span>        <span style=color:#ff79c6>except</span> IndexError:
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">32</span>            <span style=color:#ff79c6>pass</span> <span style=color:#6272a4># do not notify any error if the stack is empty...</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">33</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">34</span>    <span style=color:#ff79c6>def</span> <span style=color:#50fa7b>sum_two_numbers</span>(self, op1, op2):
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">35</span>        <span style=color:#ff79c6>return</span> op1 <span style=color:#ff79c6>+</span> op2
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">36</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">37</span>    <span style=color:#ff79c6>def</span> <span style=color:#50fa7b>subtract_two_numbers</span>(self, op1, op2):
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">38</span>        <span style=color:#ff79c6>return</span> op1 <span style=color:#ff79c6>-</span> op2
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">39</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">40</span>    <span style=color:#ff79c6>def</span> <span style=color:#50fa7b>multiply_two_numbers</span>(self, op1, op2):
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">41</span>        <span style=color:#ff79c6>return</span> op1 <span style=color:#ff79c6>*</span> op2
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">42</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">43</span>    <span style=color:#ff79c6>def</span> <span style=color:#50fa7b>divide_two_numbers</span>(self, op1, op2):
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">44</span>        <span style=color:#ff79c6>return</span> op1 <span style=color:#ff79c6>/</span> op2
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">45</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">46</span>    <span style=color:#ff79c6>def</span> <span style=color:#50fa7b>pow2_a_number</span>(self, op1):
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">47</span>        <span style=color:#ff79c6>return</span> op1 <span style=color:#ff79c6>*</span> op1
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">48</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">49</span>    <span style=color:#ff79c6>def</span> <span style=color:#50fa7b>sqrt_a_number</span>(self, op1):
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">50</span>        <span style=color:#ff79c6>return</span> math<span style=color:#ff79c6>.</span>sqrt(op1)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">51</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">52</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">53</span>    <span style=color:#ff79c6>def</span> <span style=color:#50fa7b>compute</span>(self, operation):
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">54</span>        <span style=color:#f1fa8c>&#34;&#34;&#34; compute an operation &#34;&#34;&#34;</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">55</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">56</span>        <span style=color:#ff79c6>if</span> operation <span style=color:#ff79c6>in</span> [<span style=color:#f1fa8c>&#39;+&#39;</span>, <span style=color:#f1fa8c>&#39;-&#39;</span>, <span style=color:#f1fa8c>&#39;*&#39;</span>, <span style=color:#f1fa8c>&#39;/&#39;</span>]:
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">57</span>            self<span style=color:#ff79c6>.</span>compute_operation_with_two_operands(self<span style=color:#ff79c6>.</span>catalog[operation])
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">58</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">59</span>        <span style=color:#ff79c6>if</span> operation <span style=color:#ff79c6>in</span> [<span style=color:#f1fa8c>&#39;^2&#39;</span>, <span style=color:#f1fa8c>&#39;SQRT&#39;</span>]:
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">60</span>            self<span style=color:#ff79c6>.</span>compute_operation_with_one_operand(self<span style=color:#ff79c6>.</span>catalog[operation])
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">61</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">62</span>        <span style=color:#ff79c6>if</span> operation <span style=color:#ff79c6>in</span> [<span style=color:#f1fa8c>&#39;C&#39;</span>, <span style=color:#f1fa8c>&#39;AC&#39;</span>]:
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">63</span>            self<span style=color:#ff79c6>.</span>compute_operation_with_no_operands(self<span style=color:#ff79c6>.</span>catalog[operation])
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">64</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">65</span>    <span style=color:#ff79c6>def</span> <span style=color:#50fa7b>compute_operation_with_two_operands</span>(self, operation):
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">66</span>        <span style=color:#f1fa8c>&#34;&#34;&#34; exec operations with two operands &#34;&#34;&#34;</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">67</span>        <span style=color:#ff79c6>try</span>:
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">68</span>            <span style=color:#ff79c6>if</span> <span style=color:#8be9fd;font-style:italic>len</span>(self<span style=color:#ff79c6>.</span>stack) <span style=color:#ff79c6>&lt;</span> <span style=color:#bd93f9>2</span>:
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">69</span>                <span style=color:#ff79c6>raise</span> BaseException(<span style=color:#f1fa8c>&#34;Not enough operands on the stack&#34;</span>)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">70</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">71</span>            op2 <span style=color:#ff79c6>=</span> self<span style=color:#ff79c6>.</span>stack<span style=color:#ff79c6>.</span>pop()
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">72</span>            op1 <span style=color:#ff79c6>=</span> self<span style=color:#ff79c6>.</span>stack<span style=color:#ff79c6>.</span>pop()
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">73</span>            result <span style=color:#ff79c6>=</span> operation(op1, op2)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">74</span>            self<span style=color:#ff79c6>.</span>push(result)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">75</span>        <span style=color:#ff79c6>except</span> BaseException <span style=color:#ff79c6>as</span> error:
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">76</span>            <span style=color:#8be9fd;font-style:italic>print</span>(error)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">77</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">78</span>    <span style=color:#ff79c6>def</span> <span style=color:#50fa7b>compute_operation_with_one_operand</span>(self, operation):
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">79</span>        <span style=color:#f1fa8c>&#34;&#34;&#34; exec operations with one operand &#34;&#34;&#34;</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">80</span>        <span style=color:#ff79c6>try</span>:
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">81</span>            op1 <span style=color:#ff79c6>=</span> self<span style=color:#ff79c6>.</span>stack<span style=color:#ff79c6>.</span>pop()
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">82</span>            result <span style=color:#ff79c6>=</span> operation(op1)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">83</span>            self<span style=color:#ff79c6>.</span>push(result)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">84</span>        <span style=color:#ff79c6>except</span> BaseException <span style=color:#ff79c6>as</span> error:
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">85</span>            <span style=color:#8be9fd;font-style:italic>print</span>(error)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">86</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">87</span>    <span style=color:#ff79c6>def</span> <span style=color:#50fa7b>compute_operation_with_no_operands</span>(self, operation):
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">88</span>        <span style=color:#f1fa8c>&#34;&#34;&#34; exec operations with no operands &#34;&#34;&#34;</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">89</span>        <span style=color:#ff79c6>try</span>:
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">90</span>            operation()
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">91</span>        <span style=color:#ff79c6>except</span> BaseException <span style=color:#ff79c6>as</span> error:
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">92</span>            <span style=color:#8be9fd;font-style:italic>print</span>(error)
</code></pre></div><p>Wow, almost all our &ldquo;<em>if(s)</em>&rdquo; are gone! And now we have a catalog of functions that we can expand as we want. So for example, if we need to implement a factorial function, we will just add the function to the catalog and implement a custom method in the code. That&rsquo;s really good!</p><p>Even if &mldr;</p><p>It would be great to act only on the catalog, wouldn&rsquo;t it?
But wait&mldr; shouldn&rsquo;t we talk about lambdas in this article?</p><p>Here&rsquo;s where lambdas can be useful! We don&rsquo;t need a standard defined function for a simple calc, we need just an inline lambda for that!</p><div class=highlight><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span style=color:#f1fa8c>&#34;&#34;&#34;
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span style=color:#f1fa8c>Engine class of the RPN Calculator
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span style=color:#f1fa8c>&#34;&#34;&#34;</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span><span style=color:#ff79c6>import</span> math
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span><span style=color:#ff79c6>class</span> <span style=color:#50fa7b>rpn_engine</span>:
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span>    <span style=color:#ff79c6>def</span> __init__(self):
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span>        <span style=color:#f1fa8c>&#34;&#34;&#34; Constructor &#34;&#34;&#34;</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span>        self<span style=color:#ff79c6>.</span>stack <span style=color:#ff79c6>=</span> []
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span>        self<span style=color:#ff79c6>.</span>catalog <span style=color:#ff79c6>=</span> self<span style=color:#ff79c6>.</span>get_functions_catalog()
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span>    <span style=color:#ff79c6>def</span> <span style=color:#50fa7b>get_functions_catalog</span>(self):
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">14</span>        <span style=color:#ff79c6>return</span> {<span style=color:#f1fa8c>&#34;+&#34;</span>: <span style=color:#ff79c6>lambda</span> x, y: x <span style=color:#ff79c6>+</span> y,
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">15</span>                <span style=color:#f1fa8c>&#34;-&#34;</span>: <span style=color:#ff79c6>lambda</span> x, y: x <span style=color:#ff79c6>-</span> y,
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">16</span>                <span style=color:#f1fa8c>&#34;*&#34;</span>: <span style=color:#ff79c6>lambda</span> x, y: x <span style=color:#ff79c6>*</span> y,
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">17</span>                <span style=color:#f1fa8c>&#34;/&#34;</span>: <span style=color:#ff79c6>lambda</span> x, y: x <span style=color:#ff79c6>/</span> y,
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">18</span>                <span style=color:#f1fa8c>&#34;^2&#34;</span>: <span style=color:#ff79c6>lambda</span> x: x <span style=color:#ff79c6>*</span> x,
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">19</span>                <span style=color:#f1fa8c>&#34;SQRT&#34;</span>: <span style=color:#ff79c6>lambda</span> x: math<span style=color:#ff79c6>.</span>sqrt(x),
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">20</span>                <span style=color:#f1fa8c>&#34;C&#34;</span>: self<span style=color:#ff79c6>.</span>stack<span style=color:#ff79c6>.</span>pop,
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">21</span>                <span style=color:#f1fa8c>&#34;AC&#34;</span>: self<span style=color:#ff79c6>.</span>stack<span style=color:#ff79c6>.</span>clear}
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">22</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">23</span>    <span style=color:#ff79c6>def</span> <span style=color:#50fa7b>push</span>(self, number):
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">24</span>        <span style=color:#f1fa8c>&#34;&#34;&#34; push a value to the internal stack &#34;&#34;&#34;</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">25</span>        self<span style=color:#ff79c6>.</span>stack<span style=color:#ff79c6>.</span>append(number)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">26</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">27</span>    <span style=color:#ff79c6>def</span> <span style=color:#50fa7b>pop</span>(self):
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">28</span>        <span style=color:#f1fa8c>&#34;&#34;&#34; pop a value from the stack &#34;&#34;&#34;</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">29</span>        <span style=color:#ff79c6>try</span>:
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">30</span>            <span style=color:#ff79c6>return</span> self<span style=color:#ff79c6>.</span>stack<span style=color:#ff79c6>.</span>pop()
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">31</span>        <span style=color:#ff79c6>except</span> IndexError:
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">32</span>            <span style=color:#ff79c6>pass</span> <span style=color:#6272a4># do not notify any error if the stack is empty...</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">33</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">34</span>    <span style=color:#ff79c6>def</span> <span style=color:#50fa7b>compute</span>(self, operation):
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">35</span>        <span style=color:#f1fa8c>&#34;&#34;&#34; compute an operation &#34;&#34;&#34;</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">36</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">37</span>        <span style=color:#ff79c6>if</span> operation <span style=color:#ff79c6>in</span> [<span style=color:#f1fa8c>&#39;+&#39;</span>, <span style=color:#f1fa8c>&#39;-&#39;</span>, <span style=color:#f1fa8c>&#39;*&#39;</span>, <span style=color:#f1fa8c>&#39;/&#39;</span>]:
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">38</span>            self<span style=color:#ff79c6>.</span>compute_operation_with_two_operands(self<span style=color:#ff79c6>.</span>catalog[operation])
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">39</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">40</span>        <span style=color:#ff79c6>if</span> operation <span style=color:#ff79c6>in</span> [<span style=color:#f1fa8c>&#39;^2&#39;</span>, <span style=color:#f1fa8c>&#39;SQRT&#39;</span>]:
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">41</span>            self<span style=color:#ff79c6>.</span>compute_operation_with_one_operand(self<span style=color:#ff79c6>.</span>catalog[operation])
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">42</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">43</span>        <span style=color:#ff79c6>if</span> operation <span style=color:#ff79c6>in</span> [<span style=color:#f1fa8c>&#39;C&#39;</span>, <span style=color:#f1fa8c>&#39;AC&#39;</span>]:
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">44</span>            self<span style=color:#ff79c6>.</span>compute_operation_with_no_operands(self<span style=color:#ff79c6>.</span>catalog[operation])
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">45</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">46</span>    <span style=color:#ff79c6>def</span> <span style=color:#50fa7b>compute_operation_with_two_operands</span>(self, operation):
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">47</span>        <span style=color:#f1fa8c>&#34;&#34;&#34; exec operations with two operands &#34;&#34;&#34;</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">48</span>        <span style=color:#ff79c6>try</span>:
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">49</span>            <span style=color:#ff79c6>if</span> <span style=color:#8be9fd;font-style:italic>len</span>(self<span style=color:#ff79c6>.</span>stack) <span style=color:#ff79c6>&lt;</span> <span style=color:#bd93f9>2</span>:
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">50</span>                <span style=color:#ff79c6>raise</span> BaseException(<span style=color:#f1fa8c>&#34;Not enough operands on the stack&#34;</span>)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">51</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">52</span>            op2 <span style=color:#ff79c6>=</span> self<span style=color:#ff79c6>.</span>stack<span style=color:#ff79c6>.</span>pop()
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">53</span>            op1 <span style=color:#ff79c6>=</span> self<span style=color:#ff79c6>.</span>stack<span style=color:#ff79c6>.</span>pop()
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">54</span>            result <span style=color:#ff79c6>=</span> operation(op1, op2)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">55</span>            self<span style=color:#ff79c6>.</span>push(result)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">56</span>        <span style=color:#ff79c6>except</span> BaseException <span style=color:#ff79c6>as</span> error:
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">57</span>            <span style=color:#8be9fd;font-style:italic>print</span>(error)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">58</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">59</span>    <span style=color:#ff79c6>def</span> <span style=color:#50fa7b>compute_operation_with_one_operand</span>(self, operation):
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">60</span>        <span style=color:#f1fa8c>&#34;&#34;&#34; exec operations with one operand &#34;&#34;&#34;</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">61</span>        <span style=color:#ff79c6>try</span>:
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">62</span>            op1 <span style=color:#ff79c6>=</span> self<span style=color:#ff79c6>.</span>stack<span style=color:#ff79c6>.</span>pop()
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">63</span>            result <span style=color:#ff79c6>=</span> operation(op1)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">64</span>            self<span style=color:#ff79c6>.</span>push(result)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">65</span>        <span style=color:#ff79c6>except</span> BaseException <span style=color:#ff79c6>as</span> error:
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">66</span>            <span style=color:#8be9fd;font-style:italic>print</span>(error)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">67</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">68</span>    <span style=color:#ff79c6>def</span> <span style=color:#50fa7b>compute_operation_with_no_operands</span>(self, operation):
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">69</span>        <span style=color:#f1fa8c>&#34;&#34;&#34; exec operations with no operands &#34;&#34;&#34;</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">70</span>        <span style=color:#ff79c6>try</span>:
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">71</span>            operation()
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">72</span>        <span style=color:#ff79c6>except</span> BaseException <span style=color:#ff79c6>as</span> error:
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">73</span>            <span style=color:#8be9fd;font-style:italic>print</span>(error)
</code></pre></div><p>Wow, this code rocks now! :)</p><p>Even if&mldr;</p><p>Let&rsquo;s pretend that we have to add the factorial function, could we just modify the catalog?</p><p>Unfortunately no.</p><p>There&rsquo;s another place we have to modify&mldr; we have to modify also the compute function because we need to specify that the factorial function is a &ldquo;one operand function&rdquo;.</p><p>That&rsquo;s bad, we do know that it is a one operand function, it&rsquo;s obvious since we need to call the math.factorial(x) function passing just the x argument. If only there were a way to determine how many arguments a function needs at runtime&mldr;</p><p>There is actually. In the &ldquo;inspect&rdquo; module, there&rsquo;s a &ldquo;signature&rdquo; function that can help us inspect the signature of our method at runtime. So, let&rsquo;s start the REPL and do a quick test:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span style=color:#ff79c6>&gt;&gt;&gt;</span> a <span style=color:#ff79c6>=</span> <span style=color:#ff79c6>lambda</span> x, y: x <span style=color:#ff79c6>+</span> y
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span style=color:#ff79c6>&gt;&gt;&gt;</span> <span style=color:#ff79c6>from</span> inspect <span style=color:#ff79c6>import</span> signature
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span style=color:#ff79c6>&gt;&gt;&gt;</span> my_signature <span style=color:#ff79c6>=</span> signature(a)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span><span style=color:#ff79c6>&gt;&gt;&gt;</span> <span style=color:#8be9fd;font-style:italic>print</span>(my_signature)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">5</span>(x, y)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">6</span><span style=color:#ff79c6>&gt;&gt;&gt;</span> <span style=color:#8be9fd;font-style:italic>print</span> (my_signature<span style=color:#ff79c6>.</span>parameters)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">7</span>OrderedDict([(‘x<span style=color:#f1fa8c>&#39;, &lt;Parameter &#34;x&#34;&gt;), (‘y&#39;</span>, <span style=color:#ff79c6>&lt;</span>Parameter <span style=color:#f1fa8c>&#34;y&#34;</span><span style=color:#ff79c6>&gt;</span>)])
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">8</span><span style=color:#ff79c6>&gt;&gt;&gt;</span> <span style=color:#8be9fd;font-style:italic>print</span> (<span style=color:#8be9fd;font-style:italic>len</span>(my_signature<span style=color:#ff79c6>.</span>parameters))
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">9</span><span style=color:#bd93f9>2</span>
</code></pre></div><p>Yes, amazing. We could determine at runtime how many operands our function needs!</p><div class=highlight><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span style=color:#f1fa8c>&#34;&#34;&#34;
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span style=color:#f1fa8c>Engine class of the RPN Calculator
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span style=color:#f1fa8c>&#34;&#34;&#34;</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span><span style=color:#ff79c6>import</span> math
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span><span style=color:#ff79c6>from</span> inspect <span style=color:#ff79c6>import</span> signature
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span><span style=color:#ff79c6>class</span> <span style=color:#50fa7b>rpn_engine</span>:
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span>    <span style=color:#ff79c6>def</span> __init__(self):
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span>        <span style=color:#f1fa8c>&#34;&#34;&#34; Constructor &#34;&#34;&#34;</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span>        self<span style=color:#ff79c6>.</span>stack <span style=color:#ff79c6>=</span> []
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span>        self<span style=color:#ff79c6>.</span>catalog <span style=color:#ff79c6>=</span> self<span style=color:#ff79c6>.</span>get_functions_catalog()
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">14</span>    <span style=color:#ff79c6>def</span> <span style=color:#50fa7b>get_functions_catalog</span>(self):
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">15</span>        <span style=color:#f1fa8c>&#34;&#34;&#34; Returns the catalog of all the functions supported by the calculator &#34;&#34;&#34;</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">16</span>        <span style=color:#ff79c6>return</span> {<span style=color:#f1fa8c>&#34;+&#34;</span>: <span style=color:#ff79c6>lambda</span> x, y: x <span style=color:#ff79c6>+</span> y,
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">17</span>                <span style=color:#f1fa8c>&#34;-&#34;</span>: <span style=color:#ff79c6>lambda</span> x, y: x <span style=color:#ff79c6>-</span> y,
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">18</span>                <span style=color:#f1fa8c>&#34;*&#34;</span>: <span style=color:#ff79c6>lambda</span> x, y: x <span style=color:#ff79c6>*</span> y,
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">19</span>                <span style=color:#f1fa8c>&#34;/&#34;</span>: <span style=color:#ff79c6>lambda</span> x, y: x <span style=color:#ff79c6>/</span> y,
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">20</span>                <span style=color:#f1fa8c>&#34;^2&#34;</span>: <span style=color:#ff79c6>lambda</span> x: x <span style=color:#ff79c6>*</span> x,
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">21</span>                <span style=color:#f1fa8c>&#34;SQRT&#34;</span>: <span style=color:#ff79c6>lambda</span> x: math<span style=color:#ff79c6>.</span>sqrt(x),
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">22</span>                <span style=color:#f1fa8c>&#34;C&#34;</span>: <span style=color:#ff79c6>lambda</span>: self<span style=color:#ff79c6>.</span>stack<span style=color:#ff79c6>.</span>pop(),
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">23</span>                <span style=color:#f1fa8c>&#34;AC&#34;</span>: <span style=color:#ff79c6>lambda</span>: self<span style=color:#ff79c6>.</span>stack<span style=color:#ff79c6>.</span>clear()}
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">24</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">25</span>    <span style=color:#ff79c6>def</span> <span style=color:#50fa7b>push</span>(self, number):
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">26</span>        <span style=color:#f1fa8c>&#34;&#34;&#34; push a value to the internal stack &#34;&#34;&#34;</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">27</span>        self<span style=color:#ff79c6>.</span>stack<span style=color:#ff79c6>.</span>append(number)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">28</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">29</span>    <span style=color:#ff79c6>def</span> <span style=color:#50fa7b>pop</span>(self):
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">30</span>        <span style=color:#f1fa8c>&#34;&#34;&#34; pop a value from the stack &#34;&#34;&#34;</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">31</span>        <span style=color:#ff79c6>try</span>:
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">32</span>            <span style=color:#ff79c6>return</span> self<span style=color:#ff79c6>.</span>stack<span style=color:#ff79c6>.</span>pop()
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">33</span>        <span style=color:#ff79c6>except</span> IndexError:
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">34</span>            <span style=color:#ff79c6>pass</span> <span style=color:#6272a4># do not notify any error if the stack is empty...</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">35</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">36</span>    <span style=color:#ff79c6>def</span> <span style=color:#50fa7b>compute</span>(self, operation):
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">37</span>        <span style=color:#f1fa8c>&#34;&#34;&#34; compute an operation &#34;&#34;&#34;</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">38</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">39</span>        function_requested <span style=color:#ff79c6>=</span> self<span style=color:#ff79c6>.</span>catalog[operation]
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">40</span>        number_of_operands <span style=color:#ff79c6>=</span> <span style=color:#bd93f9>0</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">41</span>        function_signature <span style=color:#ff79c6>=</span> signature(function_requested)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">42</span>        number_of_operands <span style=color:#ff79c6>=</span> <span style=color:#8be9fd;font-style:italic>len</span>(function_signature<span style=color:#ff79c6>.</span>parameters)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">43</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">44</span>        <span style=color:#ff79c6>if</span> number_of_operands <span style=color:#ff79c6>==</span> <span style=color:#bd93f9>2</span>:
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">45</span>            self<span style=color:#ff79c6>.</span>compute_operation_with_two_operands(self<span style=color:#ff79c6>.</span>catalog[operation])
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">46</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">47</span>        <span style=color:#ff79c6>if</span> number_of_operands <span style=color:#ff79c6>==</span> <span style=color:#bd93f9>1</span>:
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">48</span>            self<span style=color:#ff79c6>.</span>compute_operation_with_one_operand(self<span style=color:#ff79c6>.</span>catalog[operation])
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">49</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">50</span>        <span style=color:#ff79c6>if</span> number_of_operands <span style=color:#ff79c6>==</span> <span style=color:#bd93f9>0</span>:
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">51</span>            self<span style=color:#ff79c6>.</span>compute_operation_with_no_operands(self<span style=color:#ff79c6>.</span>catalog[operation])
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">52</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">53</span>    <span style=color:#ff79c6>def</span> <span style=color:#50fa7b>compute_operation_with_two_operands</span>(self, operation):
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">54</span>        <span style=color:#f1fa8c>&#34;&#34;&#34; exec operations with two operands &#34;&#34;&#34;</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">55</span>        <span style=color:#ff79c6>try</span>:
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">56</span>            <span style=color:#ff79c6>if</span> <span style=color:#8be9fd;font-style:italic>len</span>(self<span style=color:#ff79c6>.</span>stack) <span style=color:#ff79c6>&lt;</span> <span style=color:#bd93f9>2</span>:
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">57</span>                <span style=color:#ff79c6>raise</span> BaseException(<span style=color:#f1fa8c>&#34;Not enough operands on the stack&#34;</span>)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">58</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">59</span>            op2 <span style=color:#ff79c6>=</span> self<span style=color:#ff79c6>.</span>stack<span style=color:#ff79c6>.</span>pop()
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">60</span>            op1 <span style=color:#ff79c6>=</span> self<span style=color:#ff79c6>.</span>stack<span style=color:#ff79c6>.</span>pop()
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">61</span>            result <span style=color:#ff79c6>=</span> operation(op1, op2)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">62</span>            self<span style=color:#ff79c6>.</span>push(result)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">63</span>        <span style=color:#ff79c6>except</span> BaseException <span style=color:#ff79c6>as</span> error:
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">64</span>            <span style=color:#8be9fd;font-style:italic>print</span>(error)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">65</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">66</span>    <span style=color:#ff79c6>def</span> <span style=color:#50fa7b>compute_operation_with_one_operand</span>(self, operation):
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">67</span>        <span style=color:#f1fa8c>&#34;&#34;&#34; exec operations with one operand &#34;&#34;&#34;</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">68</span>        <span style=color:#ff79c6>try</span>:
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">69</span>            op1 <span style=color:#ff79c6>=</span> self<span style=color:#ff79c6>.</span>stack<span style=color:#ff79c6>.</span>pop()
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">70</span>            result <span style=color:#ff79c6>=</span> operation(op1)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">71</span>            self<span style=color:#ff79c6>.</span>push(result)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">72</span>        <span style=color:#ff79c6>except</span> BaseException <span style=color:#ff79c6>as</span> error:
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">73</span>            <span style=color:#8be9fd;font-style:italic>print</span>(error)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">74</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">75</span>    <span style=color:#ff79c6>def</span> <span style=color:#50fa7b>compute_operation_with_no_operands</span>(self, operation):
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">76</span>        <span style=color:#f1fa8c>&#34;&#34;&#34; exec operations with no operands &#34;&#34;&#34;</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">77</span>        <span style=color:#ff79c6>try</span>:
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">78</span>            operation()
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">79</span>        <span style=color:#ff79c6>except</span> BaseException <span style=color:#ff79c6>as</span> error:
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">80</span>            <span style=color:#8be9fd;font-style:italic>print</span>(error)
</code></pre></div><p>As <a href=https://it.wikiquote.org/wiki/Neil_Armstrong>someone</a> said, &ldquo;That&rsquo;s one small step for man, one giant leap for mankind.&rdquo; :)</p><p>Note that in this last code we have modified the zero operands functions in the catalog from</p><div class=highlight><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span style=color:#f1fa8c>&#34;C&#34;</span>: self<span style=color:#ff79c6>.</span>stack<span style=color:#ff79c6>.</span>pop,
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span style=color:#f1fa8c>&#34;AC&#34;</span>: self<span style=color:#ff79c6>.</span>stack<span style=color:#ff79c6>.</span>clear
</code></pre></div><p>to</p><div class=highlight><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span style=color:#f1fa8c>&#34;C&#34;</span>: <span style=color:#ff79c6>lambda</span>: self<span style=color:#ff79c6>.</span>stack<span style=color:#ff79c6>.</span>pop(),
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span style=color:#f1fa8c>&#34;AC&#34;</span>: <span style=color:#ff79c6>lambda</span>: self<span style=color:#ff79c6>.</span>stack<span style=color:#ff79c6>.</span>clear()}
</code></pre></div><p>Why?</p><p>Well, the problem is that in the *compute *function we are trying to determine the number of parameters from the signature of the method. The problem is that for built-in methods written in C, we can&rsquo;t do that.</p><p>Let&rsquo;s try it by yourself, start a REPL:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span style=color:#ff79c6>&gt;&gt;&gt;</span> <span style=color:#ff79c6>from</span> inpect <span style=color:#ff79c6>import</span> signature
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span style=color:#ff79c6>&gt;&gt;&gt;</span> a <span style=color:#ff79c6>=</span> []
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span style=color:#ff79c6>&gt;&gt;&gt;</span> my_sig <span style=color:#ff79c6>=</span> signature(a<span style=color:#ff79c6>.</span>clear)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span>Traceback (most recent call last):
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span> File <span style=color:#f1fa8c>&#34;&lt;stdin&gt;&#34;</span>, line <span style=color:#bd93f9>1</span>, <span style=color:#ff79c6>in</span> <span style=color:#ff79c6>&lt;</span>module<span style=color:#ff79c6>&gt;</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span> File <span style=color:#f1fa8c>&#34;C:UsersMASTROMATTEOAppDataLocalContinuumanaconda3libinspect.py&#34;</span>, line <span style=color:#bd93f9>3033</span>, <span style=color:#ff79c6>in</span> signature
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span> <span style=color:#ff79c6>return</span> Signature<span style=color:#ff79c6>.</span>from_callable(obj, follow_wrapped<span style=color:#ff79c6>=</span>follow_wrapped)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span> File <span style=color:#f1fa8c>&#34;C:UsersMASTROMATTEOAppDataLocalContinuumanaconda3libinspect.py&#34;</span>, line <span style=color:#bd93f9>2783</span>, <span style=color:#ff79c6>in</span> from_callable
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span> follow_wrapper_chains<span style=color:#ff79c6>=</span>follow_wrapped)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span> File <span style=color:#f1fa8c>&#34;C:UsersMASTROMATTEOAppDataLocalContinuumanaconda3libinspect.py&#34;</span>, line <span style=color:#bd93f9>2262</span>, <span style=color:#ff79c6>in</span> _signature_from_callable
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span> skip_bound_arg<span style=color:#ff79c6>=</span>skip_bound_arg)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span> File <span style=color:#f1fa8c>&#34;C:UsersMASTROMATTEOAppDataLocalContinuumanaconda3libinspect.py&#34;</span>, line <span style=color:#bd93f9>2087</span>, <span style=color:#ff79c6>in</span> _signature_from_builtin
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span> <span style=color:#ff79c6>raise</span> ValueError(<span style=color:#f1fa8c>&#34;no signature found for builtin </span><span style=color:#f1fa8c>{!r}</span><span style=color:#f1fa8c>&#34;</span><span style=color:#ff79c6>.</span>format(func))
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">14</span>ValueError: no signature found <span style=color:#ff79c6>for</span> builtin <span style=color:#ff79c6>&lt;</span>built<span style=color:#ff79c6>-</span><span style=color:#ff79c6>in</span> method clear of <span style=color:#8be9fd;font-style:italic>list</span> <span style=color:#8be9fd;font-style:italic>object</span> at <span style=color:#bd93f9>0x000001ED6EB18F88</span><span style=color:#ff79c6>&gt;</span>
</code></pre></div><p>as you can see we can&rsquo;t get the signature of a built-in method.</p><p>Our possibilities to solve this problem were:</p><ul><li>Handle this special case in our code, trapping the exception raised when we tried to get the signature for the self.stack.pop() function and the self.stack.clear() function</li><li>Encapsulate the built-in functions in void lambdas, so as to have the signature functions extract the signature from our void lambda function and not from the built-in function contained.</li></ul><p>And we have obviously chosen the second possibility since it is the most &ldquo;Pythonic&rdquo; we had. :)</p><p>That&rsquo;s all folks. Today&rsquo;s article has explored some aspect of functions and lambdas in Python and I hope you got the message I wanted to send.</p><blockquote><p>think twice, code once.</p></blockquote><p>Sometimes developers are lazy and don&rsquo;t think too much at what can mean maintain bad code.</p><p>Let&rsquo;s have a look at the first Peter&rsquo;s code of the article and try to figure out what could have meant to add the factorial function then. We should have created another function, duplicated more code, and modified the &ldquo;compute&rdquo; function, right? With our last code we just need to add a single line to our catalog:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span style=color:#f1fa8c>&#34;!&#34;</span>: <span style=color:#ff79c6>lambda</span> x: math<span style=color:#ff79c6>.</span>factorial(x),
</code></pre></div><p>Try to think at what could have meant to add another feature to the program for logging all the calculations requested and the given results. We had been supposed to modify a dozen functions of our code to add the feature right? And we would have had to modify as well all the new functions that we will have inserted from now on. Now we can add the feature just in the three methods that really compute the requested calculation depending on the number of the operands requested.</p><p>Wait, three methods? Wouldn&rsquo;t it be possible to have just a method that works regardless of the number of operands that are requested by the function? :)</p><p>Happy coding!</p><p>D.</p></div></article><hr><h2 style=color:#2bbc8a;text-align:center>Did you find this article helpful?</h2><br><style>.bmc-button img{height:34px!important;width:35px!important;margin-bottom:1px!important;box-shadow:none!important;border:none!important;vertical-align:middle!important}.bmc-button{padding:7px 10px!important;line-height:35px!important;height:51px!important;min-width:217px!important;text-decoration:none!important;display:inline-flex!important;color:#fff!important;background-color:#ff813f!important;border-radius:5px!important;border:1px solid transparent!important;padding:7px 10px!important;font-size:22px!important;letter-spacing:.6px!important;box-shadow:0 1px 2px rgba(190,190,190,.5)!important;-webkit-box-shadow:0 1px 2px 2px rgba(190,190,190,.5)!important;margin:0 auto!important;font-family:cookie,cursive!important;-webkit-box-sizing:border-box!important;box-sizing:border-box!important;-o-transition:.3s all linear!important;-webkit-transition:.3s all linear!important;-moz-transition:.3s all linear!important;-ms-transition:.3s all linear!important;transition:.3s all linear!important}.bmc-button:hover,.bmc-button:active,.bmc-button:focus{-webkit-box-shadow:0 1px 2px 2px rgba(190,190,190,.5)!important;text-decoration:none!important;box-shadow:0 1px 2px 2px rgba(190,190,190,.5)!important;opacity:.85!important;color:#fff!important}</style><link href="https://fonts.googleapis.com/css?family=Cookie" rel=stylesheet><a class=bmc-button target=_blank href=https://www.buymeacoffee.com/dXjDHmt style=align:left><img src=https://cdn.buymeacoffee.com/buttons/bmc-new-btn-logo.svg alt="Buy me a coffee!" align=left>
<span style=margin-left:15px;font-size:28px!important>Buy me a coffee!</span></a><hr><div class=blog-post-comments><div id=disquss_thread><script src=https://utteranc.es/client.js repo=mastro35/tpc issue-term=pathname label="The Python Corner" theme=github-dark crossorigin=anonymous async></script></div></div><div id=footer-post-container><div id=footer-post><div id=nav-footer style=display:none><ul><li><a href=../../>Home</a></li><li><a href=../../posts>Articles</a></li><li><a href=../../tags>Tags</a></li><li><a href=../../about>About</a></li><li><a href=../../help_us>Help Us</a></li><li><a href=https://buttondown.email/thepythoncorner>Newsletter</a></li><li><a href=https://shop.spreadshirt.com/the-python-corner>Swag Store</a></li></ul></div><div id=toc-footer style=display:none><nav id=TableOfContents><ul><li><a href=#the-case-of-the-rpn-calculator>The case of the RPN Calculator</a></li><li><a href=#peters-work>Peter&rsquo;s work</a></li></ul></nav></div><div id=share-footer style=display:none><ul><li><a class=icon href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fmastro35.github.io%2ftpc%2fposts%2f2017-12-13-lambdas-and-functions-in-python%2f" aria-label=Facebook><i class="fab fa-facebook fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://twitter.com/share?url=https%3a%2f%2fmastro35.github.io%2ftpc%2fposts%2f2017-12-13-lambdas-and-functions-in-python%2f&text=Lambdas%20and%20functions%20in%20Python" aria-label=Twitter><i class="fab fa-twitter fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2fmastro35.github.io%2ftpc%2fposts%2f2017-12-13-lambdas-and-functions-in-python%2f&title=Lambdas%20and%20functions%20in%20Python" aria-label=Linkedin><i class="fab fa-linkedin fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2fmastro35.github.io%2ftpc%2fposts%2f2017-12-13-lambdas-and-functions-in-python%2f&is_video=false&description=Lambdas%20and%20functions%20in%20Python" aria-label=Pinterest><i class="fab fa-pinterest fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="mailto:?subject=Lambdas%20and%20functions%20in%20Python&body=Check out this article: https%3a%2f%2fmastro35.github.io%2ftpc%2fposts%2f2017-12-13-lambdas-and-functions-in-python%2f" aria-label=Email><i class="fas fa-envelope fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://getpocket.com/save?url=https%3a%2f%2fmastro35.github.io%2ftpc%2fposts%2f2017-12-13-lambdas-and-functions-in-python%2f&title=Lambdas%20and%20functions%20in%20Python" aria-label=Pocket><i class="fab fa-get-pocket fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://reddit.com/submit?url=https%3a%2f%2fmastro35.github.io%2ftpc%2fposts%2f2017-12-13-lambdas-and-functions-in-python%2f&title=Lambdas%20and%20functions%20in%20Python" aria-label=reddit><i class="fab fa-reddit fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://www.tumblr.com/share/link?url=https%3a%2f%2fmastro35.github.io%2ftpc%2fposts%2f2017-12-13-lambdas-and-functions-in-python%2f&name=Lambdas%20and%20functions%20in%20Python&description=In%20my%20last%20post%2c%20I%20discussed%20some%20ways%20to%20avoid%20nested%20code%20in%20Python%20and%20discussing%20the%20%26ldquo%3bfilter%26rdquo%3b%20and%20%26ldquo%3bmap%26rdquo%3b%20functions%20I%20mentioned%20the%20lambda%20functions.%0aAfter%20that%20article%2c%20some%20reader%20asked%20me%20to%20write%20a%20little%20more%20about%20this%20topic%2c%20so%20%26hellip%3b%20here%20I%20am.%20%3a%29%0aLet%26rsquo%3bs%20start%20with%20a%20mantra.%20If%20you%20want%20to%20know%20what%20something%20is%2c%20in%20Python%2c%20just%20use%20your%20REPL.%0aSo%2c%20start%20the%20Python%20REPL%20and%20define%20a%20lambda%3a" aria-label=Tumblr><i class="fab fa-tumblr fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fmastro35.github.io%2ftpc%2fposts%2f2017-12-13-lambdas-and-functions-in-python%2f&t=Lambdas%20and%20functions%20in%20Python" aria-label="Hacker News"><i class="fab fa-hacker-news fa-lg" aria-hidden=true></i></a></li></ul></div><div id=actions-footer><a id=menu-toggle class=icon href=# onclick="return $('#nav-footer').toggle(),!1" aria-label=Menu><i class="fas fa-bars fa-lg" aria-hidden=true></i> Menu</a>
<a id=toc-toggle class=icon href=# onclick="return $('#toc-footer').toggle(),!1" aria-label=TOC><i class="fas fa-list fa-lg" aria-hidden=true></i> TOC</a>
<a id=share-toggle class=icon href=# onclick="return $('#share-footer').toggle(),!1" aria-label=Share><i class="fas fa-share-alt fa-lg" aria-hidden=true></i> share</a>
<a id=top style=display:none class=icon href=# onclick="$('html, body').animate({scrollTop:0},'fast')" aria-label="Top of Page"><i class="fas fa-chevron-up fa-lg" aria-hidden=true></i> Top</a></div></div></div><footer id=footer><div class=footer-left>Copyright &copy; 2021 Davide Mastromatteo</div><div class=footer-right><nav><ul><li><a href=../../>Home</a></li><li><a href=../../posts>Articles</a></li><li><a href=../../tags>Tags</a></li><li><a href=../../about>About</a></li><li><a href=../../help_us>Help Us</a></li><li><a href=https://buttondown.email/thepythoncorner>Newsletter</a></li><li><a href=https://shop.spreadshirt.com/the-python-corner>Swag Store</a></li></ul></nav></div></footer></div></body><link rel=stylesheet href=../../lib/font-awesome/css/all.min.css><script src=../../lib/jquery/jquery.min.js></script><script src=../../js/main.js></script><script src=../../js/code-copy.js></script></html>